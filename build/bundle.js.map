{"version":3,"sources":["webpack:///webpack/bootstrap c6e89127fbe1dac0f5d5","webpack:///./js/Vector.js","webpack:///./js/Color.js","webpack:///./js/MapSerializer.js","webpack:///./js/Tile.js","webpack:///./js/Game.js","webpack:///./css/main.css?b1a5","webpack:///./js/Animation.js","webpack:///./js/BSPTree.js","webpack:///./js/DefaultMap.js","webpack:///./js/Map.js","webpack:///./js/MapObject.js","webpack:///./js/MapScreen.js","webpack:///./js/Objective.js","webpack:///./js/Polygon.js","webpack:///./js/PolygonRenderer.js","webpack:///./js/Viewport.js","webpack:///./js/main.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/lib/urls.js","webpack:///./css/main.css","webpack:///./~/style-loader/lib/addStyles.js"],"names":["Point","x","y","z","p","perc","getX","getY","getZ","v","rad","cost","Math","cos","sint","sin","mcost","vx","vy","vz","dot","newx","newy","newz","s","Vector","mag","sqrt","p1","p2","Color","r","g","b","a","floor","serialize","map","mapString","tiles","getTiles","i","length","tileRow","j","tile","tileString","mapObjects","getMapObjects","mapObject","mapObjectString","getObjective","serializeTurnPlayers","serializeActions","deserialize","splitString","split","tileArrayString","mapObjectArrayString","settings","tileRowStrings","tileStrings","props","tileClass","getClass","link","push","mapObjectStrings","objective","turnPlayers","deserializeTurnPlayers","actions","deserializeActions","Tile","h","left","right","top","down","dir","constructor","name","TILE_MAP","PlainTile","EmptyTile","e","Game","width","height","canvas","document","createElement","body","appendChild","screen","start","window","dmap","addEventListener","rect","getBoundingClientRect","handleClick","clientX","clientY","handleMouseDown","handleMouseMove","handleMouseUp","handleMouseLeave","preventDefault","handleKeyDown","code","handleKeyUp","doAction","Animation","transitions","frames","destroy","frame","state","key","undefined","TransitionNoop","isInitialized","initialize","nextState","evaluate","t","TransitionLinear","end","TransitionQuadraticBezier","p0","BSPTree","faces","nodes","front","back","getPoints","n","getNormal","frontFaces","backFaces","pos","cut","frontPoints","backPoints","points","lastD","createFromPoints","abs","d","prevP","prevD","mid","midpoint","getPolygon","splitFace","face1","face2","face","addFace","forEach","idx","indexOf","splice","removeFace","fn","viewport","viewDir","getViewDir","traverse","exampleMapString","defaultMap","Map","turnPlayer","turnPlayerIdx","listeners","flattenedArray","row","concat","getTilesFlattened","getMapObject","filter","m","objs","getKey","Error","ret","move","transfer","attack","check","sx","sy","dx","dy","srcTile","obj","dstTile","l","trigger","Object","values","reduce","getMoveablePaths","getAttackableTiles","str","parseInt","COUNTER","MapObject","id","setMapObject","getH","POLYGON_MAP","cls","NAME_MAP","slice","Shard","vessel","unsetMapObject","srcKey","dstKey","dstColor","BlueShard","RedShard","YellowShard","Vessel","arguments","player","movement","range","mO","getPlayer","getShard","consumeShard","newObj","origObj","WhiteVessel","srcColor","getColor","srcHoverColor","getHoverColor","dstHoverColor","targetTiles","targets","getAttackedObjects","paths","path","objKey","color","hoverColor","shardKey","dirs","queue","Set","nextQueue","keySet","tkey","add","startKey","keysToDelete","canMoveThrough","canMoveTo","shard","BlueVessel","RedVessel","YellowVessel","bs","rs","ys","w","TLEN","MapScreen","pressed","staticPolygons","dynamicPolygons","animations","polygons","polygon","createBox","createIcosahedron","createTetrahedron","setColor","overlays","renderer","addListener","renderLoop","updatePosition","rotate","PI","polygonsToDestroy","animation","finishedAnimations","getState","getNextState","applyState","finished","destroyAfter","keys","render","requestAnimationFrame","step","startCenter","getCenter","nextCenter","nextX","nextY","nextZ","max","getR","getG","getB","hr","hg","hb","shardTransitions","ha","sa","shardAnimation","srcTransitions","dstTransitions","setMouse","updateRates","t1","t3","t2","r1","r2","Objective","num","success","OBJECT_FNS","players","enemies","Polygon","type","setPolygon","clippedFace","hover","originalFaces","stroke","point","translate","c","Array","from","currentState","getA","sr","sg","sb","rate","newFacePoints","clippedPoints","getClippedPoints","minDist","minDistIdx","match","cp","nextcp","currDist","getMag","cDist1","cDist2","distInc","PolygonFace","setVisiblePoints","points1","points2","blacklist","getEdgeBlacklist","sharedPoints","f","newBlacklist","idx1","idx2","nidx","pidx","np","pp","v1","normalize","v2","setEdgeBlacklist","scale","p3","cross","unitNormal","normal","visiblePoints","mapping","edgeBlacklist","ctx","fillStyle","getString","beginPath","k","moveTo","lineTo","fill","nextK","edge","strokeStyle","getStroke","Overlay","text","fillRect","strokeRect","textAlign","textBaseline","font","fillText","PolygonRenderer","faceSort","staticFaces","getFaces","sort","bsp","hoveredObj","getContext","clearRect","facesToDraw","addFaces","projectFace","visible","mouseInside","removeFaces","calcClippedFace","getClippedFace","getVisiblePoints","overlay","toggleHover","draw","restoreFaces","Viewport","p4","calcVectors","rates","mx","my","viewVector","pointVector","pz","li","lz","ri","rz","projected","threshold","p5","basis1","basis2","threshhold","vector","cosTheta","acos","xDist","yDist","zDist","copy","s1","s2","s3","calc","theta1","theta2","theta3","rad1","rad2","rad3","Promise","resolve","reject","endpoint","dz","rotateByBasis","translateAlongBasis","zPos","dist","px","py","innerWidth","innerHeight","module","exports","useSourceMap","list","toString","item","content","cssWithMappingToString","join","modules","mediaQuery","alreadyImportedModules","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","css","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","o","$1","test","newUrl"],"mappings":"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CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c6e89127fbe1dac0f5d5","class Point {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    midpoint(p, perc) {\n        const x = (1 - perc) * this.x + perc * p.getX();\n        const y = (1 - perc) * this.y + perc * p.getY();\n        const z = (1 - perc) * this.z + perc * p.getZ();\n        return new Point(x, y, z);\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    translate(x, y, z) {\n        this.x += x;\n        this.y += y;\n        this.z += z;\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n    }\n\n    dot(p) {\n        return this.x * p.getX() + this.y * p.getY() + this.z * p.getZ();\n    }\n\n    copy() {\n        return new Point(this.x, this.y, this.z);\n    }\n\n    equals(p) {\n        return this.x === p.getX() && this.y === p.getY() && this.z === p.getZ();\n    }\n}\n\nclass Vector {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.mag = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    static createFromPoints(p1, p2) {\n        return new Vector(p2.getX() - p1.getX(), p2.getY() - p1.getY(), p2.getZ() - p1.getZ());\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    getMag() {\n        return this.mag;\n    }\n\n    normalize() {\n        this.x = this.x / this.mag;\n        this.y = this.y / this.mag;\n        this.z = this.z / this.mag;\n        this.mag = 1;\n    }\n\n    cross(v) {\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const x = this.y * vz - this.z * vy;\n        const y = this.z * vx - this.x * vz;\n        const z = this.x * vy - this.y * vx;\n        return new Vector(x, y, z);\n    }\n\n    dot(v) {\n        return this.x * v.getX() + this.y * v.getY() + this.z * v.getZ();\n    }\n\n    equals(v) {\n        return this.x === v.getX() && this.y === v.getY() && this.z === v.getZ();\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n}\n\nexport { Point, Vector };\n\n\n// WEBPACK FOOTER //\n// ./js/Vector.js","class Color {\n    constructor(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    getString() {\n        return `rgba(${Math.floor(this.r)}, ${Math.floor(this.g)}, ${Math.floor(this.b)}, ${this.a})`;\n    }\n\n    getR() {\n        return this.r;\n    }\n\n    getG() {\n        return this.g;\n    }\n\n    getB() {\n        return this.b;\n    }\n\n    getA() {\n        return this.a;\n    }\n\n    translate(r, g, b, a) {\n        this.r += r;\n        this.g += g;\n        this.b += b;\n        this.a += a;\n    }\n}\n\nexport { Color }\n\n\n// WEBPACK FOOTER //\n// ./js/Color.js","import { Tile } from \"./Tile\";\nimport { MapObject } from \"./MapObject\";\nimport { Map } from './Map';\nimport { Objective } from './Objective';\n\nfunction serialize(map) {\n    let mapString = '';\n    const tiles = map.getTiles();\n    for (let i = 0; i < tiles.length; i++) {\n        const tileRow = tiles[i];\n        for (let j = 0; j < tileRow.length; j++) {\n            const tile = tileRow[j];\n            const tileString = tile.serialize();\n            mapString += tileString;\n            if (j !== tileRow.length - 1) {\n                mapString += ' ';\n            }\n        }\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    const mapObjects = map.getMapObjects();\n    for (let i = 0; i < mapObjects.length; i++) {\n        const mapObject = mapObjects[i];\n        const mapObjectString = mapObject.serialize();\n        mapString += mapObjectString;\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    mapString += map.getObjective().serialize();\n    mapString += '\\n';\n    mapString += map.serializeTurnPlayers();\n    mapString += '\\n';\n    mapString += map.serializeActions();\n    return mapString;\n}\n\nfunction deserialize(mapString) {\n    const splitString = mapString.split('\\n===\\n');\n    const tileArrayString = splitString[0];\n    const mapObjectArrayString = splitString[1];\n    const settings = splitString[2].split('\\n');\n\n    const tiles = [];\n    const tileRowStrings = tileArrayString.split('\\n');\n    for (let y = 0; y < tileRowStrings.length; y++) {\n        const tileRow = [];\n        const tileStrings = tileRowStrings[y].split(' ');\n        for (let x = 0; x < tileStrings.length; x++) {\n            const props = tileStrings[x].split('-');\n            const tileClass = Tile.getClass(props[0]);\n            const tile = new tileClass(x, y, props[1]);\n\n            if (x > 0) {\n                tile.link('left', tileRow[x - 1]);\n                tileRow[x - 1].link('right', tile);\n            }\n            if (y > 0) {\n                tile.link('top', tiles[y - 1][x]);\n                tiles[y - 1][x].link('down', tile);\n            }\n            tileRow.push(tile);\n        }\n        tiles.push(tileRow);\n    }\n\n    const mapObjectStrings = mapObjectArrayString.split('\\n');\n    for (let i = 0; i < mapObjectStrings.length; i++) {\n        const mapObject = MapObject.deserialize(mapObjectStrings[i], tiles);\n    }\n\n    const objective = Objective.deserialize(settings[0]);\n    const turnPlayers = Map.deserializeTurnPlayers(settings[1]);\n    const actions = Map.deserializeActions(settings[2]);\n    return new Map(tiles, objective, turnPlayers, actions);\n}\n\nexport { serialize, deserialize }\n\n\n\n// WEBPACK FOOTER //\n// ./js/MapSerializer.js","class Tile {\n\n    constructor(x, y, h) {\n        this.x = x;\n        this.y = y;\n        this.h = h;\n        this.left = null;\n        this.right = null;\n        this.top = null;\n        this.down = null;\n        this.mapObject = null;\n    }\n\n    link(dir, tile) {\n        this[dir] = tile;\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getH() {\n        return this.h;\n    }\n\n    setMapObject(mapObject) {\n        this.mapObject = mapObject;\n    }\n\n    unsetMapObject() {\n        this.mapObject = null;\n    }\n\n    getMapObject() {\n        return this.mapObject;\n    }\n\n    serialize() {\n        return `${this.constructor.name()}-${this.h}`\n    }\n\n    static getClass(name) {\n        return TILE_MAP[name];\n    }\n\n    getKey() {\n        return `${this.constructor.name()}-${this.x}-${this.y}`\n    }\n\n}\n\nclass PlainTile extends Tile {\n\n    static name() {\n        return 'p';\n    }\n}\n\nclass EmptyTile extends Tile {\n\n    static name() {\n        return 'e';\n    }\n}\n\nconst TILE_MAP = {\n    p: PlainTile,\n    e: EmptyTile,\n};\n\nexport { Tile, EmptyTile, PlainTile };\n\n\n// WEBPACK FOOTER //\n// ./js/Tile.js","import { MapScreen } from \"./MapScreen\";\nimport DefaultMap from \"./DefaultMap\";\n\nexport default class Game {\n    constructor(width, height) {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n\n    start() {\n        document.body.appendChild(this.canvas);\n        this.screen = new MapScreen(this.canvas, DefaultMap);\n        this.screen.start();\n        window.dmap = DefaultMap;\n    \n        this.canvas.addEventListener(\"click\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleClick(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousedown\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseDown(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousemove\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseMove(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseup\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseUp(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseleave\", (e) => {\n            this.screen.handleMouseLeave();\n        });\n\n        document.addEventListener(\"keydown\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyDown(e.code);\n        });\n\n        document.addEventListener(\"keyup\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyUp(e.code);\n        });\n\n        /*this.loadAssets().then(() => {\n\n            this.canvas.addEventListener(\"click\", (e) => {\n                console.log(e);\n            });\n\n            this.loadDemo();\n        });*/\n        dmap.doAction('move', 0, 0, 0, 1);\n        dmap.doAction('transfer', 0, 1, 1, 0);\n        dmap.doAction('end');\n        dmap.doAction('move', 2, 1, 1, 4);\n        dmap.doAction('end');\n        dmap.doAction('move', 0, 1, 0, 2);\n        dmap.doAction('end');\n        dmap.doAction('move', 1, 4, 0, 3);\n    }\n\n    /*loadAssets() {\n        let loadingPromise = new Promise((resolve, reject) => {\n            resolve();\n        });\n        return loadingPromise\n    }*/\n}\n\n\n// WEBPACK FOOTER //\n// ./js/Game.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/main.css\n// module id = 5\n// module chunks = 0","class Animation {\n    \n    constructor(transitions, frames, destroy = false) {\n        this.frame = 0;\n        this.frames = frames;\n        this.destroy= destroy;\n        this.transitions = transitions;\n    }\n\n    initialize(state) {\n        for (let key in state) {\n            if (this.transitions[key] === undefined) {\n                this.transitions[key] = new TransitionNoop(state[key]);\n            } else if (!this.transitions[key].isInitialized()) {\n                this.transitions[key].initialize(state[key]);\n            }\n        }\n    }\n\n    isInitialized() {\n        return this.frame !== 0;\n    }\n\n    finished() {\n        return this.frame === this.frames;\n    }\n\n    destroyAfter() {\n        return this.destroy;\n    }\n\n    getNextState() {\n        this.frame += 1;\n        const nextState = {};\n        for (let key in this.transitions) {\n            nextState[key] = this.transitions[key].evaluate(this.frame / this.frames);\n        }\n        return nextState;\n    }\n}\n\nclass TransitionNoop {\n\n    constructor(start) {\n        this.start = start;\n    }\n\n    evaluate(t) {\n        return this.start;\n    }\n}\n\nclass TransitionLinear {\n\n    constructor(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n\n    isInitialized() {\n        return this.start !== null;\n    }\n\n    initialize(start) {\n        this.start = start;\n    }\n\n    evaluate(t) {\n        return this.start + (this.end - this.start) * t;\n    }\n}\n\nclass TransitionQuadraticBezier {\n    constructor(p0, p1, p2) {\n        this.p0 = p0;\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    isInitialized() {\n        return true;\n    }\n\n    evaluate(t) {\n        return (1 - t) * (1 - t) * this.p0 + 2 * (1 - t) * t * this.p1 + t * t * this.p2;\n    }\n}\n\nexport { Animation, TransitionNoop, TransitionLinear, TransitionQuadraticBezier }\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./js/Animation.js","import { Vector } from './Vector';\n\nclass BSPTree {\n    \n    constructor(faces) {\n        this.nodes = [];\n        this.front = null;\n        this.back = null;\n        if (faces.length == 0) {\n            return;\n        }\n\n        this.nodes = [faces[0]];\n        const p0 = faces[0].getPoints()[0];\n        const n = faces[0].getNormal();\n        const frontFaces = [];\n        const backFaces = [];\n\n        for (let i = 1; i < faces.length; i++) {\n            let pos;\n            let cut = false;\n            const frontPoints = [];\n            const backPoints = [];\n            const points = faces[i].getPoints();\n\n            //Get initial pos\n            const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n            if (Math.abs(lastD) < 0.001) {\n                pos = null;\n            } else if (lastD > 0) {\n                pos = 'front';\n            } else {\n                pos = 'back';\n            }\n\n            // Iterate over points\n            for (let j = 0; j < points.length; j++) {\n                const p = points[j];\n                const d = Vector.createFromPoints(p0, p).dot(n);\n                if (Math.abs(d) < 0.001) {\n                    pos = null;\n                    frontPoints.push(p);\n                    backPoints.push(p);\n                } else if (d > 0) {\n                    if (pos === 'back') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    frontPoints.push(p);\n                    pos = 'front';\n                } else {\n                    if (pos === 'front') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    backPoints.push(p);\n                    pos = 'back';\n                }\n            }\n\n            if (cut) {\n                // Split a face...\n                const { face1, face2 } = faces[i].getPolygon().splitFace(faces[i], frontPoints, backPoints);\n                frontFaces.push(face1);\n                backFaces.push(face2);\n            } else {\n                if (frontPoints.length === points.length && backPoints.length === points.length) {\n                    this.nodes.push(faces[i]);\n                } else if (frontPoints.length === points.length) {\n                    frontFaces.push(faces[i]);\n                } else {\n                    backFaces.push(faces[i]);\n                }\n            }\n        }\n\n        if (frontFaces.length > 0) {\n            this.front = new BSPTree(frontFaces);\n        }\n        if (backFaces.length > 0) {\n            this.back = new BSPTree(backFaces);\n        }\n    }\n\n    addFace(face) {\n        if (this.nodes.length === 0) {\n            this.nodes = [face];\n            return;\n        }\n        const p0 = this.nodes[0].getPoints()[0];\n        const n = this.nodes[0].getNormal();\n        let pos;\n        let cut = false;\n        const frontPoints = [];\n        const backPoints = [];\n        const points = face.getPoints();\n\n        //Get initial pos\n        const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n        if (Math.abs(lastD) < 0.001) {\n            pos = null;\n        } else if (lastD > 0) {\n            pos = 'front';\n        } else {\n            pos = 'back';\n        }\n\n        // Iterate over points\n        for (let j = 0; j < points.length; j++) {\n            const p = points[j];\n            const d = Vector.createFromPoints(p0, p).dot(n);\n            if (Math.abs(d) < 0.001) {\n                pos = null;\n                frontPoints.push(p);\n                backPoints.push(p);\n            } else if (d > 0) {\n                if (pos === 'back') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                frontPoints.push(p);\n                pos = 'front';\n            } else {\n                if (pos === 'front') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                backPoints.push(p);\n                pos = 'back';\n            }\n        }\n\n        if (cut) {\n            // Split a face...\n            const { face1, face2 } = face.getPolygon().splitFace(face, frontPoints, backPoints);\n            if (this.front !== null) {\n                this.front.addFace(face1);\n            } else {\n                this.front = new BSPTree([face1]);\n            }\n            if (this.back !== null) {\n                this.back.addFace(face2);\n            } else {\n                this.back = new BSPTree([face2]);\n            }\n        } else {\n            if (frontPoints.length === points.length && backPoints.length === points.length) {\n                this.nodes.push(face);\n            } else if (frontPoints.length === points.length) {\n                if (this.front !== null) {\n                    this.front.addFace(face);\n                } else {\n                    this.front = new BSPTree([face]);\n                }\n            } else {\n                if (this.back !== null) {\n                    this.back.addFace(face);\n                } else {\n                    this.back = new BSPTree([face]);\n                }\n            }\n        }\n    }\n\n    addFaces(faces) {\n        faces.forEach(face => this.addFace(face));\n    }\n\n    removeFace(face) {\n        const idx = this.nodes.indexOf(face);\n        if (idx !== -1) {\n            this.nodes.splice(idx, 1);\n            return;\n        }\n        if (this.front !== null) {\n            this.front.removeFace(face);\n        }\n        if (this.back !== null) {\n            this.back.removeFace(face);\n        }\n    }\n\n    removeFaces(faces) {\n        faces.forEach(face => this.removeFace(face));\n    }\n\n    traverse(fn, viewport) {\n        if (this.nodes.length > 0) {\n            const n = this.nodes[0].getNormal();\n            const p = this.nodes[0].getPoints()[0];\n            const viewDir = viewport.getViewDir(p, n);\n            if (viewDir === 'towards') {\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n            } else {\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                \n            }\n        }\n    }\n}\n\nexport { BSPTree };\n\n\n// WEBPACK FOOTER //\n// ./js/BSPTree.js","import { deserialize } from \"./MapSerializer\";\n\nvar exampleMapString = \n`p-1 p-2 p-3\np-2 p-3 p-2\np-3 p-1 p-1\np-1 e-1 p-1\np-1 p-1 p-1\n===\nw-0-0-0\nw-1-0-0\nw-2-0-1\nw-2-1-1\nbs-0-1\nrs-0-2\nys-0-3\n===\n0\n0-1\n1-1-1`;\n/*\nvar exampleMapString = \n`p-1\np-3\n===\nk-0-0-0-20`;*/\n\nconst defaultMap = deserialize(exampleMapString);\n\nexport default defaultMap;\n\n\n// WEBPACK FOOTER //\n// ./js/DefaultMap.js","import { serialize } from \"./MapSerializer\";\n\nclass Map {\n\n    constructor(tiles, objective, turnPlayers, actions) {\n        this.tiles = tiles\n        this.objective = objective;\n        this.turnPlayers = turnPlayers;\n        this.turnPlayer = turnPlayers[0];\n        this.turnPlayerIdx = 0;\n        this.actions = actions;\n        this.listeners = [];\n    }\n\n    getTiles() {\n        return this.tiles;\n    }\n\n    getTilesFlattened() {\n        let flattenedArray = [];\n        this.tiles.forEach((row) => {\n            flattenedArray = flattenedArray.concat(row);\n        });\n        return flattenedArray;\n    }\n\n    getMapObjects() {\n        return this.getTilesFlattened().map(t => t.getMapObject()).filter(m => m !== null);\n    }\n\n    getMapObject(key) {\n        const objs = this.getMapObjects().filter(m => m.getKey() === key);\n        if (objs.length !== 1) {\n            throw Error('Invalid Key');\n        }\n        return objs[0];\n    }\n\n    getObjective() {\n        return this.objective;\n    }\n\n    serializeTurnPlayers() {\n        let ret = '';\n        let idx = this.turnPlayerIdx;\n        for (let i = 0; i < this.turnPlayers.length; i++) {\n            ret += this.turnPlayers[idx];\n            if (i !== this.turnPlayers.length - 1) {\n                ret += '-';\n            }\n            idx = (idx + 1) % this.turnPlayers.length;\n        }\n        return ret;\n    }\n\n    static deserializeTurnPlayers(str) {\n        return str.split('-');\n    }\n\n    getTurnPlayer() {\n        return this.turnPlayer;\n    }\n\n    serializeActions() {\n        return `${this.actions.move}-${this.actions.transfer}-${this.actions.attack}`;\n    }\n\n    static deserializeActions(str) {\n        const s = str.split('-');\n        return {\n            move: parseInt(s[0]),\n            transfer: parseInt(s[1]),\n            attack: parseInt(s[2]),\n        };\n    }\n\n    isResolved() {\n        return this.objective.check(this);\n    }\n\n    serialize() {\n        return serialize(this);\n    }\n\n    /*\n       Actions:\n        move/attack\n        transfer\n    */\n    doAction(name, sx, sy, dx, dy) {\n        if (this.actions[name] > 0) {\n            const srcTile = this.tiles[sy][sx];\n            const obj = srcTile.getMapObject();\n            const dstTile = this.tiles[dy][dx]; \n            const e = obj[name](dstTile, this.turnPlayer);\n            this.actions[name] -= 1;\n\n            this.listeners.forEach(l => l.trigger(e));\n        } else if (name !== 'end') {\n            throw Error('Invalid action');\n        }\n        if (name === 'end' || Object.values(this.actions).reduce((a,b) => a + b, 0) === 0) {\n            this.turnPlayerIdx = (this.turnPlayerIdx + 1) % this.turnPlayers.length;\n            this.turnPlayer = this.turnPlayers[this.turnPlayerIdx];\n            this.actions = {\n                move: 1,\n                transfer: 1,\n                attack: 1,\n            };\n        }\n    }\n\n    getMovablePaths(key) {\n        const obj = this.getMapObject(key);\n        return obj.getMoveablePaths();\n    }\n\n    getAttackableTiles(key) {\n        const obj = this.getMapObject(key);\n        return obj.getAttackableTiles();\n    }\n\n    addListener(l) {\n        this.listeners.push(l);\n    }\n\n}\n\nexport { Map }\n\n\n// WEBPACK FOOTER //\n// ./js/Map.js","import { Color } from './Color';\nimport { EmptyTile } from './Tile';\n\nlet COUNTER = 0;\n\nclass MapObject {\n\n    constructor(props, tile = null, id = null) {\n        this.tile = tile;\n        if (tile !== null) {\n            tile.setMapObject(this);\n        }\n        if (id === null) {\n            this.id = `mapObject-${COUNTER}`;\n            COUNTER += 1;\n        } else {\n            this.id = id;\n        }\n    }\n\n    getTile() {\n        return this.tile;\n    }\n\n    getX() {\n        return this.tile.getX();\n    }\n\n    getY() {\n        return this.tile.getY();\n    }\n\n    getH() {\n        return this.tile.getH();\n    }\n\n    serialize() {\n        return `${this.constructor.name()}-${this.getX()}-${this.getY()}`;\n    }\n\n    static deserialize(props, tiles) {\n        const p = props.split('-');\n        const cls = NAME_MAP[p[0]];\n        const x = parseInt(p[1]);\n        const y = parseInt(p[2]);\n        return new cls(p.slice(3, p.length), tiles[y][x]);\n    }\n\n    setReferences(tiles, mapObjects) {\n        this.tile = tiles[this.y][this.x];\n        this.tile.setMapObject(this);\n    }\n\n    getActions() {\n        return [];\n    }\n\n    getPlayer() {\n        return null;\n    }\n\n    getPolygon() {\n        return POLYGON_MAP[this.constructor.name()];\n    }\n\n    getKey() {\n        return this.id;\n    }\n}\n\nclass Shard extends MapObject {\n\n    attackedBy(vessel) {\n        this.tile.unsetMapObject();\n        return {\n            name: 'attack',\n            srcKey: vessel.getKey(),\n            dstKey: this.getKey(),\n            dstColor: null,\n        };\n    }\n}\n\nclass BlueShard extends Shard {\n\n    static name() {\n        return 'bs';\n    }\n\n    getColor() {\n        return new Color(0, 0, 255, 1);\n    }\n\n    getHoverColor() {\n        return new Color(0, 0, 255, 1);\n    }\n}\n\nclass RedShard extends Shard {\n    static name() {\n        return 'rs';\n    }\n\n    getColor() {\n        return new Color(255, 0, 0, 1);\n    }\n\n    getHoverColor() {\n        return new Color(255, 0, 0, 1);\n    }\n}\n\nclass YellowShard extends Shard {\n    static name() {\n        return 'ys';\n    }\n\n    getColor() {\n        return new Color(255, 255, 0, 1);\n    }\n\n    getHoverColor() {\n        return new Color(255, 255, 0, 1);\n    }\n}\n\n\nclass Vessel extends MapObject {\n\n    constructor(props, tile) {\n        super(...arguments);\n        this.player = props[0];\n        this.movement = 4;\n        this.range = 1;\n    }\n\n\n    serialize() {\n        return `${super.serialize()}-${this.player}`\n    }\n\n    transfer(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n        const mO = tile.getMapObject();\n        if (mO !== null && mO.getPlayer() === this.player && this.getShard() !== null) {\n            const cls = mO.consumeShard(this.getShard());\n            var newObj = new cls([mO.getPlayer()], tile, mO.getKey());\n            var origObj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                name: 'transfer',\n                srcKey: this.getKey(), \n                dstKey: mO.getKey(),\n                srcColor: origObj.getColor(),\n                srcHoverColor: origObj.getHoverColor(),\n                dstColor: newObj.getColor(),\n                dstHoverColor: newObj.getHoverColor(),\n            }\n        } else {\n            throw Error('Invalid transfer tile');\n        }\n    }\n\n    attack(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n\n        const targetTiles = this.getAttackableTiles();\n        const key = tile.getKey();\n\n        if (targetTiles.indexOf(key) === -1) {\n            throw Error('Invalid action: cannot reach tile');\n        }\n\n        const targets = this.getAttackedObjects(tile);\n\n        if (targets.length === 0) {\n            throw Error('Invalid attack tile');\n        } else {\n            targets.forEach(target => t)\n        }\n    }\n\n    move(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n\n        const paths = this.getMoveablePaths();\n        const key = tile.getKey();\n\n        if (paths[key] === undefined) {\n            throw Error('Invalid action: cannot reach tile');\n        }\n\n        const mO = tile.getMapObject();\n        if (mO === null) {\n            this.tile.unsetMapObject();\n            tile.setMapObject(this);\n            this.tile = tile;\n            return {\n                name: 'move',\n                path: paths[key],\n                objKey: this.getKey(),\n            };\n        } else if (mO instanceof Shard) {\n            const cls = this.consumeShard(mO);\n            var newObj = new cls([this.player], tile, this.getKey());\n            this.tile.unsetMapObject();\n            return {\n                name: 'move',\n                path: paths[key],\n                color: newObj.getColor(),\n                hoverColor: newObj.getHoverColor(),\n                objKey: this.getKey(),\n                shardKey: mO.getKey(),\n            };\n        }\n        throw Error('Invalid move tile');\n    }\n\n    getPlayer() {\n        return this.player;\n    }\n\n    getShard() {\n        return null;\n    }\n\n    getAttackableTiles() {\n        const dirs = ['left', 'right', 'top', 'down'];\n        let queue = new Set([this.tile]);\n        let nextQueue;\n        const keySet = new Set();\n        for (let i = 0; i < this.range; i++) {\n            nextQueue = new Set();\n            queue.forEach(tile => {\n                const key = tile.getKey();\n                dirs.forEach((dir) => {\n                    const t = tile[dir];\n                    if (t !== null && t !== this.tile) {\n                        const tkey = t.getKey();\n                        nextQueue.add(t);\n                        keySet.add(tkey);\n                    }\n                })\n            });\n            queue = nextQueue;\n        }\n        return keySet;\n    }\n\n    getAttackedObjects(tile) {\n        const mO = tile.getMapObject();\n        if (mO === null) {\n            return [];\n        } else {\n            return [mO];\n        }\n    }\n\n    getMoveablePaths() {\n        const dirs = ['left', 'right', 'top', 'down'];\n        let queue = new Set([this.tile]);\n        let nextQueue;\n        const paths = {};\n        const startKey = this.tile.getKey();\n        paths[startKey] = [startKey];\n        const keysToDelete = [startKey];\n        for (let i = 0; i < this.movement; i++) {\n            nextQueue = new Set();\n            queue.forEach(tile => {\n                const key = tile.getKey();\n                dirs.forEach((dir) => {\n                    const t = tile[dir];\n                    if (t !== null && t !== this.tile) {\n                        if (this.canMoveThrough(t) && Math.abs(t.getH() - tile.getH()) < 2) {\n                            const tkey = t.getKey();\n                            if (paths[tkey] === undefined) {\n                                nextQueue.add(t);\n                                paths[tkey] = paths[key].concat(tkey);\n                                if (!this.canMoveTo(t)) {\n                                    keysToDelete.push(tkey);\n                                }\n                            }\n                        }\n                    }\n                })\n            });\n            queue = nextQueue;\n        }\n        keysToDelete.forEach(key => delete paths[key]);\n        return paths;\n    }\n\n    canMoveThrough(tile) {\n        if (tile instanceof EmptyTile) {\n            return false;\n        }\n        const mO = tile.getMapObject();\n        if (mO === null || mO instanceof Shard || mO.getPlayer() === this.player) {\n            return true;\n        }\n        return false;\n    }\n\n    canMoveTo(tile) {\n        if (tile instanceof EmptyTile) {\n            return false;\n        }\n        const mO = tile.getMapObject();\n        if (mO === null || mO instanceof Shard) {\n            return true;\n        }\n        return false;\n    }\n\n    attackedBy(vessel) {\n        this.tile.unsetMapObject();\n        return {\n            name: 'attack',\n            srcKey: vessel.getKey(),\n            dstKey: this.getKey(),\n            dstColor: null,\n        };\n    }\n}\n\nclass WhiteVessel extends Vessel {\n\n    consumeShard(shard) {\n        if (shard instanceof BlueShard) {\n            return BlueVessel;\n        } else if (shard instanceof RedShard) {\n            return RedVessel;\n        } else if (shard instanceof YellowShard) {\n            return YellowVessel;\n        }\n    }\n\n    static name() {\n        return 'w';\n    }\n\n    getColor() {\n        return new Color(255, 255, 255, 1);\n    }\n\n    getHoverColor() {\n        return new Color(230, 230, 230, 1);\n    }\n}\n\nclass BlueVessel extends Vessel {\n\n    constructor() {\n        super(...arguments);\n        this.range = 2;\n    }\n\n    static name() {\n        return 'b';\n    }\n\n    getShard() {\n        return new BlueShard();\n    }\n\n    getColor() {\n        return new Color(0, 0, 255, 1);\n    }\n\n    getHoverColor() {\n        return new Color(0, 0, 255, 1);\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                name: 'attack',\n                srcKey: vessel.getKey(),\n                dstKey: this.getKey(),\n                dstColor: obj.getColor(),\n                dstHoverColor: obj.getHoverColor(),\n            };\n        }\n    }\n}\n\nclass RedVessel extends Vessel {\n\n    static name() {\n        return 'r';\n    }\n\n    getShard() {\n        return new RedShard();\n    }\n\n    getColor() {\n        return new Color(255, 0, 0, 1);\n    }\n\n    getHoverColor() {\n        return new Color(255, 0, 0, 1);\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                name: 'attack',\n                srcKey: vessel.getKey(),\n                dstKey: this.getKey(),\n                dstColor: obj.getColor(),\n                dstHoverColor: obj.getHoverColor(),\n            };\n        }\n    }\n}\n\nclass YellowVessel extends Vessel {\n\n    constructor() {\n        super(...arguments);\n        this.movement = 5;\n    }\n\n    static name() {\n        return 'y';\n    }\n\n    getShard() {\n        return new YellowShard();\n    }\n\n    getColor() {\n        return new Color(255, 255, 0, 1);\n    }\n\n    getHoverColor() {\n        return new Color(255, 255, 0, 1);\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                name: 'attack',\n                srcKey: vessel.getKey(),\n                dstKey: this.getKey(),\n                dstColor: obj.getColor(),\n                dstHoverColor: obj.getHoverColor(),\n            };\n        }\n    }\n}\n\nconst NAME_MAP = {\n    bs: BlueShard,\n    rs: RedShard,\n    ys: YellowShard,\n    w: WhiteVessel,\n    b: BlueVessel,\n    r: RedVessel,\n    y: YellowVessel,\n}\n\nconst POLYGON_MAP = {\n    bs: 'tetrahedron',\n    rs: 'tetrahedron',\n    ys: 'tetrahedron',\n    w: 'icosahedron',\n    b: 'icosahedron',\n    r: 'icosahedron',\n    y: 'icosahedron',\n}\n\nexport { MapObject }\n\n\n// WEBPACK FOOTER //\n// ./js/MapObject.js","import { Point, Vector } from \"./Vector\";\nimport { Animation, TransitionNoop, TransitionLinear, TransitionQuadraticBezier } from \"./Animation\";\nimport { Viewport } from \"./Viewport\";\nimport { Polygon, Overlay } from \"./Polygon\";\nimport { PolygonRenderer} from \"./PolygonRenderer\";\n\nconst TLEN = 100;\n\nclass MapScreen {\n\n    constructor(canvas, map) {\n        this.canvas = canvas;\n        this.map = map;\n        this.viewport = new Viewport(\n            new Point(0, 0, 500),\n            new Point(this.canvas.width, 0, 500),\n            new Point(0, this.canvas.height, 500),\n            new Point(this.canvas.width, this.canvas.height, 500),\n            500\n        );\n        this.pressed = {};\n\n        this.staticPolygons = {};\n        this.dynamicPolygons = {};\n        this.animations = [];\n\n        this.map.getTilesFlattened().filter(t => t.constructor.name() !== 'e').reduce((polygons, tile) => {\n            const polygon = Polygon.createBox(tile.getX() * TLEN, tile.getY() * TLEN, 0, TLEN, TLEN, tile.getH() * TLEN);\n            polygons[tile.getKey()] = polygon;\n            return polygons;\n        }, this.staticPolygons);\n\n        this.map.getMapObjects().reduce((polygons, mapObject) => {\n            let polygon;\n            if (mapObject.getPolygon() === 'icosahedron') {\n                polygon = Polygon.createIcosahedron(mapObject.getX() * TLEN + TLEN / 2, mapObject.getY() * TLEN + TLEN / 2, mapObject.getH() * TLEN + TLEN / 2, 20);\n            } else if (mapObject.getPolygon() === 'tetrahedron') {\n                polygon = Polygon.createTetrahedron(mapObject.getX() * TLEN + TLEN / 2, mapObject.getY() * TLEN + TLEN / 2, mapObject.getH() * TLEN + TLEN / 2, 20);\n            }\n            polygon.setColor(mapObject.getColor(), mapObject.getHoverColor());\n            polygons[mapObject.getKey()] = polygon;\n            return polygons;\n        }, this.dynamicPolygons);\n\n        this.overlays = {\n            'move': new Overlay(50, 50, 150, 50, 'move'),\n            'attack': new Overlay(50, 100, 150, 50, 'attack'),\n            'transfer': new Overlay(50, 150, 150, 50, 'transfer'), \n            'end': new Overlay(50, 200, 150, 50, 'end'),\n        };\n\n        this.r = new Vector(0, 0, 1);\n\n        this.renderer = new PolygonRenderer(this.canvas, Object.values(this.staticPolygons), (a,b) => a.getNormal().getZ() - b.getNormal().getZ());\n        map.addListener(this);\n    }\n\n    start() {\n        this.renderLoop();\n    }\n\n    renderLoop() {\n        this.viewport.updatePosition();\n        this.r.rotate(new Vector(1, 0, 0), 1 * Math.PI / 180);\n        Object.values(this.dynamicPolygons).forEach(p => {\n            p.rotate(this.r, 1 * Math.PI / 180);\n        });\n\n\n        const polygonsToDestroy = [];\n        if (this.animations.length > 0) {\n            const animation = this.animations[0];\n            const finishedAnimations = [];\n            for (let key in animation) {\n                const a = animation[key];\n                const p = this.dynamicPolygons[key];\n                if (!a.isInitialized()) {\n                    a.initialize(p.getState());\n                }\n                const state = a.getNextState()\n                p.applyState(state);\n                if (a.finished()) {\n                    finishedAnimations.push(key);\n                    if (a.destroyAfter()) {\n                        polygonsToDestroy.push(key);\n                    }\n                }\n            }\n            finishedAnimations.forEach(key => delete animation[key]);\n            if (Object.keys(animation).length === 0) {\n                this.animations.splice(0, 1);\n            }\n        }\n\n\n        this.renderer.render(this.viewport, Object.values(this.dynamicPolygons), Object.values(this.overlays));\n\n        polygonsToDestroy.forEach(key => delete this.dynamicPolygons[key]);\n\n\n        window.requestAnimationFrame((step) => {\n            this.renderLoop();\n        });\n    }\n\n    trigger(e) {\n        if (e.name === 'move') {\n            const startCenter = this.staticPolygons[e.path[0]].getCenter();\n            let x = startCenter.getX();\n            let y = startCenter.getY();\n            let z = (startCenter.getZ() * 2) + (TLEN / 2);\n\n            for (let i = 1; i < e.path.length; i++) {\n                const animation = {};\n                const nextCenter = this.staticPolygons[e.path[i]].getCenter();\n                const nextX = nextCenter.getX();\n                const nextY = nextCenter.getY();\n                const nextZ = (nextCenter.getZ() * 2) + (TLEN / 2);\n                const transitions = {};\n                if (z === nextZ) {\n                    transitions.x = new TransitionLinear(x, nextX);\n                    transitions.y = new TransitionLinear(y, nextY);\n                    transitions.z = new TransitionLinear(z, nextZ);\n                } else {\n                    transitions.x = new TransitionQuadraticBezier(x, z > nextZ ? nextX : x, nextX);\n                    transitions.y = new TransitionQuadraticBezier(y, z > nextZ ? nextY : y, nextY);\n                    transitions.z = new TransitionQuadraticBezier(z, Math.max(z, nextZ), nextZ);\n                }\n\n                if (e.color !== undefined && i === e.path.length - 1) {\n                    transitions.r = new TransitionLinear(null, e.color.getR());\n                    transitions.g = new TransitionLinear(null, e.color.getG());\n                    transitions.b = new TransitionLinear(null, e.color.getB());\n                    transitions.hr = new TransitionLinear(null, e.hoverColor.getR());\n                    transitions.hg = new TransitionLinear(null, e.hoverColor.getG());\n                    transitions.hb = new TransitionLinear(null, e.hoverColor.getB());\n\n                    const shardTransitions = {}\n                    shardTransitions.a = new TransitionLinear(null, 0);\n                    shardTransitions.ha = new TransitionLinear(null, 0);\n                    shardTransitions.sa = new TransitionLinear(null, 0);\n                    const shardAnimation = new Animation(shardTransitions, 30, true);\n                    animation[e.shardKey] = shardAnimation\n                }\n\n                animation[e.objKey] = new Animation(transitions, 30);\n\n                this.animations.push(animation);\n\n                x = nextX;\n                y = nextY;\n                z = nextZ;\n            }\n        } else if (e.name === 'transfer') {\n            const animation = {};\n\n            const srcTransitions = {}\n            srcTransitions.r = new TransitionLinear(null, e.srcColor.getR());\n            srcTransitions.g = new TransitionLinear(null, e.srcColor.getG());\n            srcTransitions.b = new TransitionLinear(null, e.srcColor.getB());\n            srcTransitions.hr = new TransitionLinear(null, e.srcHoverColor.getR());\n            srcTransitions.hg = new TransitionLinear(null, e.srcHoverColor.getG());\n            srcTransitions.hb = new TransitionLinear(null, e.srcHoverColor.getB());\n            animation[e.srcKey] = new Animation(srcTransitions, 30);\n\n            const dstTransitions = {}\n            dstTransitions.r = new TransitionLinear(null, e.dstColor.getR());\n            dstTransitions.g = new TransitionLinear(null, e.dstColor.getG());\n            dstTransitions.b = new TransitionLinear(null, e.dstColor.getB());\n            dstTransitions.hr = new TransitionLinear(null, e.dstHoverColor.getR());\n            dstTransitions.hg = new TransitionLinear(null, e.dstHoverColor.getG());\n            dstTransitions.hb = new TransitionLinear(null, e.dstHoverColor.getB());\n            animation[e.dstKey] = new Animation(dstTransitions, 30);\n\n            this.animations.push(animation);\n        } else if (e.name === 'attack') {\n            const animation = {};\n\n            const dstTransitions = {}\n            if (e.dstColor === null) {\n                dstTransitions.a = new TransitionLinear(null, 0);\n                dstTransitions.ha = new TransitionLinear(null, 0);\n                dstTransitions.sa = new TransitionLinear(null, 0);\n                animation[e.dstKey] = new Animation(dstTransitions, 30, true);\n            } else {\n                dstTransitions.r = new TransitionLinear(null, e.dstColor.getR());\n                dstTransitions.g = new TransitionLinear(null, e.dstColor.getG());\n                dstTransitions.b = new TransitionLinear(null, e.dstColor.getB());\n                dstTransitions.hr = new TransitionLinear(null, e.dstHoverColor.getR());\n                dstTransitions.hg = new TransitionLinear(null, e.dstHoverColor.getG());\n                dstTransitions.hb = new TransitionLinear(null, e.dstHoverColor.getB());\n                animation[e.dstKey] = new Animation(dstTransitions, 30);\n            }\n\n            this.animations.push(animation);\n        }\n    }\n\n    handleMouseDown(x, y) {\n        //this.startDragX = x;\n        //this.startDragY = y;\n    }\n\n    handleMouseMove(x, y) {\n        this.viewport.setMouse(x,y);\n        /*if (this.startDragX !== null && this.startDragY !== null) {\n            const dx = this.startDragX - x;\n            const dy = this.startDragY - y;\n            this.viewport.translateAlongBasis(dx, dy);\n            this.startDragX = x;\n            this.startDragY = y;\n        }*/\n        //this.mapRenderer.renderMap();\n    }\n\n    handleMouseUp(x, y) {\n        //this.startDragX = null;\n        //this.startDragY = null;\n    }\n\n    handleClick(x, y) {\n        //this.viewport.mx = this.viewport.x1 + x;\n        //this.viewport.my = this.viewport.y1 + y;\n        /*const clickedObj = this.mapRenderer.getClickedObject();\n        if (clickedObj instanceof Tile) {\n            const action = this.map.getSelectedAction(clickedObj);\n            if (action !== null && action.action === 'move') {\n                this.mapRenderer.animateMove(action.actor, action.receiver).then(() => {\n                    this.map.applyAction(action.actor, action.action, action.receiver);\n                });\n            }\n        } else if (clickedObj instanceof ActorAction) {\n            this.map.getTurnActor().handleAction(clickedObj);\n        }*/\n        //const clickedObjs = this.mapRenderer.getClickedObjects();\n\n        //const rerender = this.map.clicked(clickedObjs);\n        //if (rerender) {\n            //this.mapRenderer.renderMap(this.map, this.viewport);\n        //}\n    }\n\n    handleMouseLeave() {\n        this.viewport.setMouse(null, null);\n        //this.startDragX = null;\n        //this.startDragY = null;\n        //this.mapRenderer.renderMap(this.map, this.viewport);\n    }\n\n    handleKeyDown(code) {\n        if (!this.pressed[code]) {\n            this.pressed[code] = true;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = 20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = -20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = 3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = -3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n\n    handleKeyUp(code) {\n        if (this.pressed[code]) {\n            this.pressed[code] = false;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = -20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = 20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = -3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = 3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n}\n\nexport { MapScreen }\n\n\n// WEBPACK FOOTER //\n// ./js/MapScreen.js","class Objective {\n\n    constructor(fn, num) {\n        this.fn = fn;\n        this.num = num;\n    }\n\n    serialize() {\n        return this.num;\n    }\n\n    static deserialize(num) {\n        return new Objective(OBJECT_FNS[num], num);\n    }\n\n    check(map) {\n        return this.fn.check(map);\n    }\n\n    success(map) {\n        return this.fn.success(map);\n    }\n\n}\n\nconst OBJECT_FNS = {\n    0: {\n        check: map => {\n            let players = map.getMapObjects().map(m => m.getPlayer()).filter(p => p !== null);\n            let player = players.filter(p => p === '0');\n            let enemies =  players.filter(p => p !== '0');\n            return player.length === 0 || enemies.length === 0;\n        },\n        success: map => {\n            let players = map.getMapObjects().map(m => m.getPlayer());\n            let enemies =  players.filter(p => p !== '0' && p !== null);\n            return enemies.length === 0;\n        }\n    },\n}\n\nexport { Objective }\n\n\n// WEBPACK FOOTER //\n// ./js/Objective.js","import { Point, Vector } from \"./Vector\";\nimport { Color } from \"./Color\";\n\nclass Polygon {\n    constructor(faces, type) {\n        this.faces = faces;\n        faces.forEach(face => face.setPolygon(this));\n        this.type = type;\n        this.clippedFace = null;\n        this.hover = false;\n        this.originalFaces = faces.slice();\n        this.color = new Color(204, 204, 204, 1);\n        this.hoverColor = new Color(230, 230, 230, 1);\n        this.stroke = new Color(0, 0, 0, 1);\n    }\n\n    translate(x, y, z) {\n        this.getPoints().forEach(point => point.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        const c = this.getCenter();\n        this.getPoints().forEach(point => {\n            point.translate(-c.getX(), -c.getY(), -c.getZ());\n            point.rotate(v, rad);\n            point.translate(c.getX(), c.getY(), c.getZ());\n        });\n        this.faces.forEach(face => {\n            face.getNormal().rotate(v, rad);\n        });\n    }\n\n    getColor() {\n        return this.hover ? this.hoverColor : this.color;\n    }\n\n    setColor(color, hoverColor) {\n        this.color = color;\n        this.hoverColor = hoverColor;\n    }\n\n    getStroke() {\n        return this.stroke\n    }\n\n    toggleHover() {\n        this.hover = !this.hover;\n    }\n\n    getFaces() {\n        return this.faces;\n    }\n\n    getPoints() {\n        return Array.from(new Set(this.faces.reduce((a,b) => a.concat(b.getPoints()), [])));\n    }\n\n    getCenter() {\n        const points = this.getPoints();\n        const x = points.reduce((a,b) => a + b.getX(), 0) / points.length;\n        const y = points.reduce((a,b) => a + b.getY(), 0) / points.length;\n        const z = points.reduce((a,b) => a + b.getZ(), 0) / points.length;\n        return new Point(x, y, z);\n    }\n\n    calcRate(end, frames) {\n        const currentState = {\n            x: this.getCenter().getX(),\n            y: this.getCenter().getY(),\n            z: this.getCenter().getZ(),\n            r: this.color.getR(),\n            g: this.color.getG(),\n            b: this.color.getB(),\n            a: this.color.getA(),\n            hr: this.hoverColor.getR(),\n            hg: this.hoverColor.getG(),\n            hb: this.hoverColor.getB(),\n            ha: this.hoverColor.getA(),\n            sr: this.stroke.getR(),\n            sg: this.stroke.getG(),\n            sb: this.stroke.getB(),\n            sa: this.stroke.getA(),\n        };\n        const rate = {};\n        for (let key in end) {\n            rate[key] = (end[key] - currentState[key]) / frames;\n        }\n        for (let key in currentState) {\n            if (rate[key] === undefined) {\n                rate[key] = 0;\n            }\n        }\n        return rate;\n    }\n\n    getState() {\n        return {\n            x: this.getCenter().getX(),\n            y: this.getCenter().getY(),\n            z: this.getCenter().getZ(),\n            r: this.color.getR(),\n            g: this.color.getG(),\n            b: this.color.getB(),\n            a: this.color.getA(),\n            hr: this.hoverColor.getR(),\n            hg: this.hoverColor.getG(),\n            hb: this.hoverColor.getB(),\n            ha: this.hoverColor.getA(),\n            sr: this.stroke.getR(),\n            sg: this.stroke.getG(),\n            sb: this.stroke.getB(),\n            sa: this.stroke.getA(),\n        };\n    }\n\n    applyState({x, y, z, r, g, b, a, hr, hg, hb, ha, sr, sg, sb, sa}) {\n        const currentState = this.getState();\n        this.translate(x - currentState.x, y - currentState.y, z - currentState.z);\n        this.color.translate(r - currentState.r, g - currentState.g, b - currentState.b, a - currentState.a);\n        this.hoverColor.translate(hr - currentState.hr, hg - currentState.hg, hb - currentState.hb, ha - currentState.ha);\n        this.stroke.translate(sr - currentState.sr, sg - currentState.sg, sb - currentState.sb, sa - currentState.sa);\n    }\n\n    restoreFaces() {\n        this.faces = this.originalFaces.slice();\n    }\n\n    getClippedFace() {\n        return this.clippedFace;\n    }\n\n    calcClippedFace() {\n        let newFacePoints = null;\n        this.faces.forEach(face => {\n            const clippedPoints = face.getClippedPoints();\n            if (clippedPoints.length > 0) {\n                if (newFacePoints === null) {\n                    newFacePoints = clippedPoints.slice();\n                } else {\n                    for (let i = 0; i < clippedPoints.length; i++) {\n                        const c = clippedPoints[i];\n                        let minDist = null;\n                        let minDistIdx = null;\n                        let match = false;\n                        for (let j = 0; j < newFacePoints.length; j++) {\n                            const cp = newFacePoints[j];\n                            const nextcp = j == newFacePoints.length - 1 ? newFacePoints[0] : newFacePoints[j + 1];\n                            const currDist = Vector.createFromPoints(cp, nextcp).getMag();\n                            const cDist1 = Vector.createFromPoints(cp, c).getMag();\n                            const cDist2 = Vector.createFromPoints(nextcp, c).getMag();\n                            const distInc = cDist1 + cDist2 - currDist;\n                            if (distInc === 0) {\n                                match = true;\n                                break;\n                            }\n                            if (minDist == null || distInc < minDist) {\n                                minDist = distInc;\n                                minDistIdx = j;\n                            }\n                        }\n                        if (!match) {\n                            if (minDistIdx == newFacePoints.length - 1) {\n                                newFacePoints.splice(0, 0, c);\n                            } else {\n                                newFacePoints.splice(minDistIdx + 1, 0, c);\n                            }\n                        }\n                    }\n\n                }\n            }\n        });\n        if (newFacePoints !== null) {\n            this.clippedFace = new PolygonFace();\n            this.clippedFace.setVisiblePoints(newFacePoints, []);\n            this.clippedFace.setPolygon(this);\n        } else {\n            this.clippedFace = null;\n        }\n    }\n\n    splitFace(face, points1, points2) {\n        this.faces.splice(this.faces.indexOf(face), 1);\n        const blacklist = face.getEdgeBlacklist();\n        const sharedPoints = points1.filter(p => points2.indexOf(p) !== -1);\n        const n = face.getNormal();\n\n        const [face1, face2] = [points1, points2].map(points => {\n            const f = new PolygonFace(points, n);\n            f.setPolygon(this);\n            const newBlacklist = [sharedPoints];\n            blacklist.forEach(b => {\n                const idx1 = points.indexOf(b[0]);\n                const idx2 = points.indexOf(b[1]);\n                if (idx1 !== -1 && idx2 !== -1) {\n                    newBlacklist.push(b);\n                } else if (idx1 !== -1 || idx2 !== -1) {\n                    const idx = idx1 !== -1 ? idx1 : idx2;\n                    const nidx = idx === points.length - 1 ? 0 : idx + 1;\n                    const pidx = idx === 0 ? points.length - 1 : idx - 1;\n                    const p = points[idx];\n                    const np = points[nidx];\n                    const pp = points[pidx];\n                    if (sharedPoints.indexOf(np) === -1) {\n                        newBlacklist.push([p, pp]);\n                    } else if (sharedPoints.indexOf(pp) === -1) {\n                        newBlacklist.push([p, np]);\n                    } else {\n                        // You've got a triangle\n                        const v1 = Vector.createFromPoints(b[0], b[1]);\n                        v1.normalize();\n                        const v2 = Vector.createFromPoints(p, np);\n                        v2.normalize();\n                        if (Math.abs(Math.abs(v1.dot(v2)) - 1) < 0.001) {\n                            newBlacklist.push([p, np]);\n                        } else {\n                            newBlacklist.push([p, pp]);\n                        }\n                    }\n                }\n            });\n            f.setEdgeBlacklist(newBlacklist);\n            this.faces.push(f);\n            return f;\n        });\n\n        return {\n            face1,\n            face2\n        };\n    }\n\n    static createBox(x, y, z, w, l, h) {\n        const v = [\n            new Point(x, y, z + h),\n            new Point(x + w, y, z + h),\n            new Point(x + w, y + l, z + h),\n            new Point(x , y + l, z + h),\n            new Point(x, y, z),\n            new Point(x + w, y, z),\n            new Point(x + w, y + l, z),\n            new Point(x, y + l, z),\n        ];\n        const faces = [\n            new PolygonFace([v[0], v[1], v[2], v[3]], new Vector(0, 0, 1)),\n            new PolygonFace([v[1], v[2], v[6], v[5]], new Vector(1, 0, 0)),\n            new PolygonFace([v[4], v[5], v[6], v[7]], new Vector(0, 0, -1)),\n            new PolygonFace([v[0], v[1], v[5], v[4]], new Vector(0, -1, 0)),\n            new PolygonFace([v[0], v[3], v[7], v[4]], new Vector(-1, 0, 0)),\n            new PolygonFace([v[2], v[3], v[7], v[6]], new Vector(0, 1, 0))\n        ];\n\n        return new Polygon(faces, 'box');\n    }\n\n    static createIcosahedron(x, y, z, scale) {\n        const t = (1 + Math.sqrt(5)) / 2;\n        const v = [\n            new Point(-1, t, 0),\n            new Point(1, t, 0),\n            new Point(-1, -t, 0),\n            new Point(1, -t, 0),\n            new Point(0, -1, t),\n            new Point(0, 1, t),\n            new Point(0, -1, -t),\n            new Point(0, 1, -t),\n            new Point(t, 0, -1),\n            new Point(t, 0, 1),\n            new Point(-t, 0, -1),\n            new Point(-t, 0, 1)\n        ];\n\n        const faces = [\n        [0, 11, 5],\n        [0, 5, 1],\n        [0, 1, 7],\n        [0, 7, 10],\n        [0, 10, 11],\n\n        [1, 5, 9],\n        [5, 11, 4],\n        [11, 10, 2],\n        [10, 7, 6],\n        [7, 1, 8],\n\n        [3, 9, 4],\n        [3, 4, 2],\n        [3, 2, 6],\n        [3, 6, 8],\n        [3, 8, 9],\n\n        [4, 9, 5],\n        [2, 4, 11],\n        [6, 2, 10],\n        [8, 6, 7],\n        [9, 8, 1]\n        ].map(idx => {\n            const p1 = v[idx[0]];\n            const p2 = v[idx[1]];\n            const p3 = v[idx[2]];\n            const v1 = Vector.createFromPoints(p1, p2);\n            const v2 = Vector.createFromPoints(p1, p3);\n            const n = v1.cross(v2);\n            n.normalize();\n            return new PolygonFace([p1, p2, p3], n);\n        });\n\n        v.forEach(v => {\n            v.scale(scale);\n            v.translate(x, y, z);\n        });\n\n        return new Polygon(faces, 'icosahedron');\n    }\n\n    static createTetrahedron(x, y, z, scale) {\n        const t = 1 / Math.sqrt(2);\n        const v = [\n            new Point(1, 0, -t),\n            new Point(-1, 0 , -t),\n            new Point(0, 1, t),\n            new Point(0, -1, t)\n        ];\n\n        const faces = [\n            [0, 2, 3],\n            [1, 3, 2],\n            [2, 0, 1],\n            [3, 1, 0]\n        ].map(idx => {\n            const p1 = v[idx[0]];\n            const p2 = v[idx[1]];\n            const p3 = v[idx[2]];\n            const v1 = Vector.createFromPoints(p1, p2);\n            const v2 = Vector.createFromPoints(p1, p3);\n            const n = v1.cross(v2);\n            n.normalize();\n            return new PolygonFace([p1, p2, p3], n);\n        });\n\n        v.forEach(v => {\n            v.scale(scale);\n            v.translate(x, y, z);\n        });\n\n        return new Polygon(faces, 'tetrahedron');\n    }\n}\n\nclass PolygonFace {\n    constructor(points, unitNormal) {\n        this.points = points;\n        this.normal = unitNormal;\n        this.polygon = null;\n        this.visiblePoints = [];\n        this.mapping = [];\n        this.edgeBlacklist = [];\n    }\n\n    translate(x, y, z) {\n        this.points.forEach(p => p.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        this.points.forEach(p => p.rotate(v, rad));\n        this.normal.rotate(v, rad);\n    }\n\n    getPoints() {\n        return this.points;\n    }\n\n    getNormal() {\n        return this.normal;\n    }\n\n    getPolygon() {\n        return this.polygon;\n    }\n\n    setPolygon(polygon) {\n        this.polygon = polygon;\n    }\n\n    getClippedPoints() {\n        const clippedPoints = [];\n        for (let i = 0; i < this.mapping.length; i++) {\n            if (typeof this.mapping[i] !== 'number') {\n                clippedPoints.push(this.visiblePoints[i]);\n            }\n        }\n        return clippedPoints;\n    }\n\n    getVisiblePoints() {\n        return this.visiblePoints;\n    }\n\n    setVisiblePoints(points, mapping) {\n        this.visiblePoints = points;\n        this.mapping = mapping;\n    }\n\n    getEdgeBlacklist() {\n        return this.edgeBlacklist;\n    }\n\n    setEdgeBlacklist(blacklist) {\n        this.edgeBlacklist = blacklist;\n    }\n\n    draw(ctx) {\n        ctx.fillStyle = this.polygon.getColor().getString();\n        ctx.beginPath();\n        let k;\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            if (k == 0) {\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n            }\n            if (k == this.visiblePoints.length - 1) {\n                ctx.lineTo(this.visiblePoints[0].getX(), this.visiblePoints[0].getY());\n            } else {\n                ctx.lineTo(this.visiblePoints[k + 1].getX(), this.visiblePoints[k + 1].getY());\n            }\n        }\n        ctx.fill();\n\n        let nextK;\n        let edge;\n        let blacklist;\n        ctx.strokeStyle = this.polygon.getStroke().getString();\n        //Draw outline\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            nextK = k === this.visiblePoints.length - 1 ? 0 : k + 1;\n            edge = null;\n            blacklist = false;\n            if (typeof this.mapping[k] === 'number') {\n                if (typeof this.mapping[nextK] === 'number') {\n                    edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK]]];\n                } else {\n                    if (this.points[this.mapping[k]] === this.points[this.mapping[nextK][0]]) {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][1]]];\n                    } else {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][0]]];\n                    }\n                }\n            } else if (typeof this.mapping[nextK] === 'number') {\n                if (this.points[this.mapping[k][0]] === this.points[this.mapping[nextK]]) {\n                    edge = [this.points[this.mapping[k][1]], this.points[this.mapping[nextK]]];\n                } else {\n                    edge = [this.points[this.mapping[k][0]], this.points[this.mapping[nextK]]];\n                }\n            }\n\n            if (edge !== null) {\n                blacklist = this.edgeBlacklist.filter(b => b.indexOf(edge[0]) !== -1 && b.indexOf(edge[1]) !== -1).length > 0;\n            }\n\n            if (!blacklist) {\n                ctx.beginPath();\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n                ctx.lineTo(this.visiblePoints[nextK].getX(), this.visiblePoints[nextK].getY());\n                ctx.stroke();\n            }\n        }\n    }\n}\n\nclass Overlay {\n    constructor(x, y, w, h, text) {\n        this.color = new Color(230, 230, 230, 1);\n        this.hoverColor = new Color(242, 242, 242, 1);\n        this.stroke = new Color(0, 0, 0, 1);\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n        this.text = text;\n        this.hover = false;\n    }\n\n    toggleHover() {\n        this.hover = !this.hover;\n    }\n\n    getVisiblePoints() {\n        return [\n            new Point(this.x, this.y, 0),\n            new Point(this.x + this.w, this.y, 0),\n            new Point(this.x + this.w, this.y + this.h, 0),\n            new Point(this.x, this.y + this.h, 0),\n        ];\n    }\n\n    draw(ctx) {\n        if (this.hover) {\n            ctx.fillStyle = this.hoverColor.getString();\n        } else {\n            ctx.fillStyle = this.color.getString();\n        }\n        ctx.strokeStyle = this.stroke.getString();\n        ctx.fillRect(this.x, this.y, this.w, this.h);\n        ctx.strokeRect(this.x, this.y, this.w, this.h);\n        ctx.fillStyle = 'black';\n        ctx.textAlign = 'center';\n        ctx.textBaseline= 'middle'; \n        ctx.font = '30px Arial';\n        ctx.fillText(this.text, this.x + (this.w / 2), this.y + (this.h / 2));\n    }\n}\n\nexport { Polygon, PolygonFace, Overlay };\n\n\n// WEBPACK FOOTER //\n// ./js/Polygon.js","import { BSPTree } from \"./BSPTree\";\n\nclass PolygonRenderer {\n    \n    constructor(canvas, staticPolygons, faceSort = () => {}) {\n        this.canvas = canvas;\n        const staticFaces = staticPolygons.reduce((a, b) => a.concat(b.getFaces()), []);\n        staticFaces.sort(faceSort);\n        this.bsp = new BSPTree(staticFaces);\n        this.staticPolygons = staticPolygons;\n        this.hoveredObj = null;\n    }\n\n    render(viewport, polygons, overlays) {\n        const ctx = this.canvas.getContext('2d');\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        const facesToDraw = [];\n        let hoveredObj = null;\n\n        this.bsp.addFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.bsp.traverse((face) => {\n            const { visiblePoints, mapping, visible} = viewport.projectFace(face);\n            face.setVisiblePoints(visiblePoints, mapping);\n            if (visible) {\n                if (viewport.mouseInside(visiblePoints)) {\n                    hoveredObj = face.getPolygon();\n                }\n                facesToDraw.push(face);\n            }\n        }, viewport);\n\n        this.bsp.removeFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.staticPolygons.concat(polygons).forEach(polygon => {\n            polygon.calcClippedFace();\n            const clippedFace = polygon.getClippedFace();\n            if (clippedFace !== null) {\n                if (viewport.mouseInside(clippedFace.getVisiblePoints())) {\n                    hoveredObj = polygon;\n                }\n                facesToDraw.push(clippedFace);\n            }\n        });\n\n        overlays.forEach(overlay => {\n            if (viewport.mouseInside(overlay.getVisiblePoints())) {\n                hoveredObj = overlay;\n            }\n            facesToDraw.push(overlay);\n        });\n\n        if (this.hoveredObj !== null) {\n            this.hoveredObj.toggleHover();\n        }\n        if (hoveredObj !== null) {\n            this.hoveredObj = hoveredObj;\n            this.hoveredObj.toggleHover();\n        } else {\n            this.hoveredObj = null;\n        }\n\n        facesToDraw.forEach(face => face.draw(ctx));\n\n        polygons.forEach(polygon => polygon.restoreFaces());\n    }\n}\n\nexport { PolygonRenderer };\n\n\n// WEBPACK FOOTER //\n// ./js/PolygonRenderer.js","import { Point, Vector } from './Vector';\n\nclass Viewport {\n\n    /*\n        p1 (origin)       p2\n        --------------------\n        |                  |\n        |                  |\n        |                  |\n        --------------------\n        p3                p4\n     */\n    constructor(p1, p2, p3, p4, d=-1) {\n        this.p1 = p1;\n        this.p2 = p2;\n        this.p3 = p3;\n        this.p4 = p4;\n        this.d = d;\n        this.calcVectors();\n\n        this.rates = {\n            r1: 0,\n            r2: 0,\n            t1: 0,\n            t2: 0,\n            t3: 0,\n        };\n        this.mx = null;\n        this.my = null;\n        this.animation = null;\n    }\n\n    projectFace(face) {\n        const points = face.getPoints();\n        const n = face.getNormal();\n        const visiblePoints = [];\n        const clippedPoints = [];\n        const mapping = [];\n        let viewVector, pointVector, pz, li, lz, ri, rz, midpoint, projected;\n        let threshold = this.d;\n        let visible = null;\n        if (this.d === -1) {\n            threshold = 0;\n            visible = this.unitNormal.dot(n) < 0;\n        }\n\n        for (let i = 0; i < points.length; i++) {\n            if (this.d !== -1) {\n                viewVector = Vector.createFromPoints(this.p5, points[i]);\n            } else {\n                viewVector = Vector.createFromPoints(this.midpoint, points[i]);\n            }\n            pz = viewVector.dot(this.unitNormal);\n            if (pz >= threshold) {\n                if (visible === null) {\n                    visible = viewVector.dot(n) < 0;\n                }\n                if (this.d === -1) {\n                    pointVector = Vector.createFromPoints(this.p1, points[i]);\n                } else {\n                    midpoint = this.p5.midpoint(points[i], this.d / pz);\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                }\n                projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                visiblePoints.push(projected);\n                mapping.push(i);\n            } else {\n                li = i == 0 ? points.length - 1 : i - 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[li]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[li]);\n                }\n                lz = viewVector.dot(this.unitNormal);\n                if (lz >= threshold) {\n                    midpoint = points[i].midpoint(points[li], (threshold - pz) / (lz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([li, i]);\n                }\n                ri = i == points.length - 1 ? 0 : i + 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[ri]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[ri]);\n                }\n                rz = viewVector.dot(this.unitNormal);\n                if (rz >= threshold) {\n                    midpoint = points[i].midpoint(points[ri], (threshold - pz) / (rz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([i, ri]);\n                }\n            }\n        }\n        return {\n            visiblePoints,\n            mapping,\n            visible\n        };\n    }\n\n    projectPoint(point) {\n        let viewVector, pointVector, threshold;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n            threshold = this.d;\n        } else {\n            viewVector = Vector.createFromPoints(this.midpoint, point);\n            threshhold = 0;\n        }\n\n        const pz = viewVector.dot(this.unitNormal);\n        if (pz >= threshold) {\n            if (this.d !== -1) {\n                const midpoint = this.p5.midpoint(point, this.d / pz);\n                pointVector = Vector.createFromPoints(this.p1, midpoint);\n            } else {\n                pointVector = Vector.createFromPoints(this.p1, point);\n            }\n            return new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n        }\n        return null;\n    }\n\n    calcViewAngle(point, vector) {\n        let viewVector;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n        } else {\n            viewVector = this.unitNormal;\n        }\n        const cosTheta = viewVector.dot(vector) / viewVector.getMag();\n        return Math.acos(cosTheta);\n    }\n\n    calcVectors() {\n        this.basis1 = Vector.createFromPoints(this.p1, this.p2);\n        this.width = this.basis1.mag;\n        this.basis1.normalize();\n        this.basis2 = Vector.createFromPoints(this.p1, this.p3);\n        this.height = this.basis2.mag;\n        this.basis2.normalize();\n        this.unitNormal = this.basis2.cross(this.basis1);\n        this.midpoint = this.p1.midpoint(this.p4, 0.5);\n        if (this.d !== -1) {\n            const xDist = this.unitNormal.x * this.d; \n            const yDist = this.unitNormal.y * this.d;\n            const zDist = this.unitNormal.z * this.d;\n            this.p5 = this.midpoint.copy()\n            this.p5.translate(-xDist, -yDist, -zDist);\n        }\n    }\n\n    translateAlongBasis(s1, s2, s3) {\n        const xDist = this.basis1.x * s1 + this.basis2.x * s2 + this.unitNormal.x * s3;\n        const yDist = this.basis1.y * s1 + this.basis2.y * s2 + this.unitNormal.y * s3;\n        const zDist = this.basis1.z * s1 + this.basis2.z * s2 + this.unitNormal.z * s3;\n        this.translate(xDist, yDist, zDist);\n    }\n\n    translate(x, y, z, calc=true) {\n        this.p1.translate(x, y, z);\n        this.p2.translate(x, y, z);\n        this.p3.translate(x, y, z);\n        this.p4.translate(x, y, z);\n        if (calc) {\n            this.calcVectors();\n        }\n    }\n\n    rotateByBasis(theta1, theta2, theta3) {\n        const xDist = this.midpoint.getX();\n        const yDist = this.midpoint.getY();\n        const zDist = this.midpoint.getZ();\n        const rad1 = theta1 / 360 * Math.PI;\n        const rad2 = theta2 / 360 * Math.PI;\n        const rad3 = theta3 / 360 * Math.PI;\n\n        this.translate(-xDist, -yDist, -zDist, false);\n        this.p1.rotate(this.basis1, rad1);\n        this.p1.rotate(this.basis2, rad2);\n        this.p1.rotate(this.unitNormal, rad3);\n        this.p2.rotate(this.basis1, rad1);\n        this.p2.rotate(this.basis2, rad2);\n        this.p2.rotate(this.unitNormal, rad3);\n        this.p3.rotate(this.basis1, rad1);\n        this.p3.rotate(this.basis2, rad2);\n        this.p3.rotate(this.unitNormal, rad3);\n        this.p4.rotate(this.basis1, rad1);\n        this.p4.rotate(this.basis2, rad2);\n        this.p4.rotate(this.unitNormal, rad3);\n        this.translate(xDist, yDist, zDist, true);\n    }\n\n    animate(animation) {\n        return new Promise((resolve, reject) => {\n            animation.resolve = resolve;\n            this.animation = animation;\n        });\n    }\n\n    updatePosition() {\n        if (this.animation !== null) {\n            if (this.animation.rate === null) {\n                this.animation.rate = {\n                    x: (this.animation.endpoint.getX() - this.p1.getX()) / this.animation.frames,\n                    y: (this.animation.endpoint.getY() - this.p1.getY()) / this.animation.frames,\n                    z: (this.animation.endpoint.getZ() - this.p1.getZ()) / this.animation.frames\n                }\n            }\n            const dx = this.animation.rate.x;\n            const dy = this.animation.rate.y;\n            const dz = this.animation.rate.z;\n            this.translate(dx, dy, dz);\n            this.animation.frames -= 1;\n            if (this.animation.frames === 0) {\n                this.animation.resolve();\n                this.animation = null;\n            }\n        } else {\n            if (this.rates.r1 || this.rates.r2) {\n                this.rotateByBasis(this.rates.r1, this.rates.r2, 0);\n            }\n            if (this.rates.t1 || this.rates.t2 || this.rates.t3) {\n                this.translateAlongBasis(this.rates.t1, this.rates.t2, this.rates.t3);\n            }\n        }\n    }\n\n    updateRates(rates) {\n        this.rates.r1 += (rates.r1 || 0);\n        this.rates.r2 += (rates.r2 || 0);\n        this.rates.t1 += (rates.t1 || 0);\n        this.rates.t2 += (rates.t2 || 0);\n        this.rates.t3 += (rates.t3 || 0);\n    }\n\n    setMouse(x, y) {\n        this.mx = x;\n        this.my = y;\n    }\n\n    mouseInside(points) {\n        if (this.mx === null && this.my === null) {\n            return false;\n        }\n        let zPos = null;\n        for (let i = 0; i < points.length; i++) {\n            const p = points[i];\n            const np = i === points.length - 1 ? points[0] : points[i + 1];\n            const v1 = {\n                x: np.getX() - p.getX(),\n                y: np.getY() - p.getY(),\n            };\n            const v2 = {\n                x: this.mx - p.getX(),\n                y: this.my - p.getY(),\n            };\n            const cross = (v1.x * v2.y) - (v1.y * v2.x);\n            if (zPos === null) {\n                zPos = cross > 0;\n            } else if ((cross > 0) !== zPos) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getViewDir(point, n) {\n        let dot;\n        if (this.d === -1) {\n            dot = n.dot(this.unitNormal);\n        } else {\n            dot = n.dot(Vector.createFromPoints(this.p5, point));\n        }\n        return dot <= 0 ? 'towards' : 'away';\n    }\n\n    getViewVector(point) {\n        if (this.d !== -1) {\n            return new Vector.createFromPoints(this.p5, point);\n        } else {\n            return this.unitNormal;\n        }\n    }\n\n    getCenteredP1(point, dist) {\n        const px = point.getX() - dist * this.unitNormal.getX();\n        const py = point.getY() - dist * this.unitNormal.getY();\n        const pz = point.getZ() - dist * this.unitNormal.getZ();\n        const dx = px - this.midpoint.getX();\n        const dy = py - this.midpoint.getY();\n        const dz = pz - this.midpoint.getZ();\n        return new Point(this.p1.getX() + dx, this.p1.getY() + dy, this.p1.getZ() + dz);\n    }\n}\n\nexport { Viewport };\n\n\n// WEBPACK FOOTER //\n// ./js/Viewport.js","import Game from \"./Game\";\nimport \"../css/main.css\"\n\nconst g = new Game(window.innerWidth - 16, window.innerHeight - 16);\ng.start();\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/style-loader/lib/urls.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"canvas {\\n\\tborder: 1px solid black;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./css/main.css\n// module id = 19\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/addStyles.js\n// module id = 20\n// module chunks = 0"],"sourceRoot":""}