{"version":3,"sources":["webpack:///webpack/bootstrap 1d33bf30a27e219d7852","webpack:///./js/Vector.js","webpack:///./js/Color.js","webpack:///./js/Tile.js","webpack:///./js/MapObject.js","webpack:///./js/MapSerializer.js","webpack:///./js/Objective.js","webpack:///./js/Game.js","webpack:///./css/main.css?b1a5","webpack:///./js/Animation.js","webpack:///./js/BSPTree.js","webpack:///./js/DefaultMap.js","webpack:///./js/Map.js","webpack:///./js/MapScreen.js","webpack:///./js/Polygon.js","webpack:///./js/PolygonRenderer.js","webpack:///./js/Viewport.js","webpack:///./js/main.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/lib/urls.js","webpack:///./css/main.css","webpack:///./~/style-loader/lib/addStyles.js"],"names":["Point","x","y","z","p","perc","getX","getY","getZ","v","rad","cost","Math","cos","sint","sin","mcost","vx","vy","vz","dot","newx","newy","newz","s","Vector","mag","sqrt","p1","p2","Color","r","g","b","a","floor","Tile","h","left","right","top","down","mapObject","dir","tile","constructor","name","json","type","key","getKey","toJSON","PlainTile","EmptyTile","TileGroup","tiles","map","t","getMapObject","filter","m","TileFactory","e","create","cls","getJSON","propString","props","split","parseInt","getPropString","MapObject","player","setMapObject","getH","Error","Shard","vessel","unsetMapObject","color","BlueShard","RedShard","YellowShard","Vessel","arguments","movement","range","paths","getMoveablePaths","srcKey","actions","push","src","dst","path","objs","getShard","o","tileGroups","getAttackableTileGroups","getMapObjects","length","getTiles","target","consumeShard","newObj","origObj","WhiteVessel","forEach","attackedBy","mO","dirs","queue","Set","nextQueue","tileSet","i","add","Array","from","startKey","keysToDelete","canMoveThrough","abs","tkey","undefined","concat","canMoveTo","getPlayer","shard","BlueVessel","RedVessel","YellowVessel","obj","getColor","dirs1","dirs2","t2","dir2","tileArray","tileKeys","objKeys","ret","NAME_MAP","bs","rs","ys","w","POLYGON_MAP","MapObjectFactory","serialize","state","mapString","mapObjects","tileRow","j","tileString","mapObjectString","objective","turnPlayers","join","move","transfer","attack","deserialize","splitString","tileArrayString","mapObjectArrayString","settings","tileRowStrings","tileStrings","mapObjectStrings","slice","Objective","Objective1","players","enemies","ObjectiveFactory","Game","width","height","canvas","document","createElement","window","dmap","body","appendChild","screen","start","addEventListener","rect","getBoundingClientRect","handleClick","clientX","clientY","handleMouseDown","handleMouseMove","handleMouseUp","handleMouseLeave","preventDefault","handleKeyDown","code","handleKeyUp","Animation","transitions","frames","destroy","frame","TransitionNoop","isInitialized","initialize","nextState","evaluate","TransitionLinear","end","TransitionQuadraticBezier","p0","BSPTree","faces","nodes","front","back","getPoints","n","getNormal","frontFaces","backFaces","pos","cut","frontPoints","backPoints","points","lastD","createFromPoints","d","prevP","prevD","mid","midpoint","getPolygon","splitFace","face1","face2","face","addFace","idx","indexOf","splice","removeFace","fn","viewport","viewDir","getViewDir","traverse","exampleMapString","defaultMap","Map","tileMap","setTile","link","listeners","cachedActions","action","validActions","getActions","l","trigger","Object","values","reduce","shift","getMoveActions","getTransferActions","getAttackActions","turnPlayer","check","doAction","DEFAULT_COLOR","NEXT_VALID_COLOR","VALID_COLOR","VALID_HOVER_COLOR","SELECTED_COLOR","OVERLAY_DEFAULT_COLOR","OVERLAY_DISABLE_COLOR","OVERLAY_HOVER_COLOR","MapScreen","pressed","dynamicPolygons","animations","staticPolygons","polygons","keyMap","tilePolygon","mapObjectPolygon","mode","hoverKey","hoverMainKeyMap","hoverSecondaryKeyMap","overlays","overlay","srcList","keys","k","renderer","addListener","renderLoop","updatePosition","getOverlays","render","updateHover","requestAnimationFrame","step","cancelHover","getHoveredObj","setHover","hoverMainKeys","hoverSecondaryKeys","startCenter","getCenter","TLEN","animation","nextCenter","nextX","nextY","nextZ","max","getR","getG","getB","shardTransitions","sa","shardAnimation","shardKey","objKey","srcTransitions","srcColor","dstTransitions","dstColor","dstKey","setMouse","prevKeyGroup","setColor","validKeyGroups","keyGroup","mapArgs","prevKey","args","selectedKeyGroup","nextValidKeyGroups","getMoveableKeys","getTransferableKeys","getAttackableKeys","getMoveableTargets","getTransferableTargets","getAttackableTargets","nextAction","console","log","updateRates","t1","t3","r1","r2","COUNTER","HOVER_NONE","HOVER_MAIN","HOVER_SECONDARY","Polygon","setPolygon","clippedFace","originalFaces","stroke","hover","hoverState","point","translate","c","rotate","getA","sr","sg","sb","currentState","getState","set","newFacePoints","clippedPoints","getClippedPoints","minDist","minDistIdx","match","cp","nextcp","currDist","getMag","cDist1","cDist2","distInc","PolygonFace","setVisiblePoints","points1","points2","blacklist","getEdgeBlacklist","sharedPoints","f","newBlacklist","idx1","idx2","nidx","pidx","np","pp","v1","normalize","v2","setEdgeBlacklist","scale","p3","cross","unitNormal","normal","polygon","visiblePoints","mapping","edgeBlacklist","ctx","fillStyle","getDrawColor","getString","beginPath","moveTo","lineTo","fill","nextK","edge","strokeStyle","getStroke","Overlay","text","fillRect","strokeRect","textAlign","textBaseline","font","fillText","PolygonFactory","tlen","retVal","createBox","shape","createTetrahedron","createIcosahedron","PolygonRenderer","faceSort","staticFaces","getFaces","sort","bsp","hoveredObj","getContext","clearRect","facesToDraw","addFaces","projectFace","visible","mouseInside","removeFaces","calcClippedFace","getClippedFace","getVisiblePoints","draw","restoreFaces","Viewport","p4","calcVectors","rates","mx","my","viewVector","pointVector","pz","li","lz","ri","rz","projected","threshold","p5","basis1","basis2","threshhold","vector","cosTheta","acos","xDist","yDist","zDist","copy","s1","s2","s3","calc","theta1","theta2","theta3","rad1","PI","rad2","rad3","Promise","resolve","reject","rate","endpoint","dx","dy","dz","rotateByBasis","translateAlongBasis","zPos","dist","px","py","innerWidth","innerHeight","module","exports","useSourceMap","list","toString","item","content","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","id","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","css","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","$1","test","newUrl"],"mappings":"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EA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1d33bf30a27e219d7852","class Point {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    midpoint(p, perc) {\n        const x = (1 - perc) * this.x + perc * p.getX();\n        const y = (1 - perc) * this.y + perc * p.getY();\n        const z = (1 - perc) * this.z + perc * p.getZ();\n        return new Point(x, y, z);\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    translate(x, y, z) {\n        this.x += x;\n        this.y += y;\n        this.z += z;\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n    }\n\n    dot(p) {\n        return this.x * p.getX() + this.y * p.getY() + this.z * p.getZ();\n    }\n\n    copy() {\n        return new Point(this.x, this.y, this.z);\n    }\n\n    equals(p) {\n        return this.x === p.getX() && this.y === p.getY() && this.z === p.getZ();\n    }\n}\n\nclass Vector {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.mag = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    static createFromPoints(p1, p2) {\n        return new Vector(p2.getX() - p1.getX(), p2.getY() - p1.getY(), p2.getZ() - p1.getZ());\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    getMag() {\n        return this.mag;\n    }\n\n    normalize() {\n        this.x = this.x / this.mag;\n        this.y = this.y / this.mag;\n        this.z = this.z / this.mag;\n        this.mag = 1;\n    }\n\n    cross(v) {\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const x = this.y * vz - this.z * vy;\n        const y = this.z * vx - this.x * vz;\n        const z = this.x * vy - this.y * vx;\n        return new Vector(x, y, z);\n    }\n\n    dot(v) {\n        return this.x * v.getX() + this.y * v.getY() + this.z * v.getZ();\n    }\n\n    equals(v) {\n        return this.x === v.getX() && this.y === v.getY() && this.z === v.getZ();\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n}\n\nexport { Point, Vector };\n\n\n// WEBPACK FOOTER //\n// ./js/Vector.js","class Color {\n    constructor(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    set(r, g, b, a) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n\n    getString() {\n        return `rgba(${Math.floor(this.r)}, ${Math.floor(this.g)}, ${Math.floor(this.b)}, ${this.a})`;\n    }\n\n    getR() {\n        return this.r;\n    }\n\n    getG() {\n        return this.g;\n    }\n\n    getB() {\n        return this.b;\n    }\n\n    getA() {\n        return this.a;\n    }\n\n    translate(r, g, b, a) {\n        this.r += r;\n        this.g += g;\n        this.b += b;\n        this.a += a;\n    }\n}\n\nexport { Color }\n\n\n// WEBPACK FOOTER //\n// ./js/Color.js","class Tile {\n\n    constructor(x, y, h) {\n        this.x = x;\n        this.y = y;\n        this.h = h;\n        this.left = null;\n        this.right = null;\n        this.top = null;\n        this.down = null;\n        this.mapObject = null;\n    }\n\n    link(dir, tile) {\n        this[dir] = tile;\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getH() {\n        return this.h;\n    }\n\n    setMapObject(mapObject) {\n        this.mapObject = mapObject;\n    }\n\n    unsetMapObject() {\n        this.mapObject = null;\n    }\n\n    getMapObject() {\n        return this.mapObject;\n    }\n\n    getKey() {\n        return `${this.constructor.name()}-${this.x}-${this.y}`\n    }\n\n    toJSON() {\n        const json = {\n            x: this.x,\n            y: this.y,\n            h: this.h,\n            type: this.constructor.name(),\n            key: this.getKey(),\n        }\n        if (this.mapObject !== null) {\n            json.mapObject = this.mapObject.toJSON();\n        }\n        return json;\n    }\n\n}\n\nclass PlainTile extends Tile {\n\n    static name() {\n        return 'p';\n    }\n}\n\nclass EmptyTile extends Tile {\n\n    static name() {\n        return 'e';\n    }\n}\n\nclass TileGroup {\n    constructor(tiles) {\n        this.tiles = tiles;\n    }\n\n    getMapObjects() {\n        return this.tiles.map(t => t.getMapObject()).filter(m => m !== null);\n    }\n\n    getTiles() {\n        return this.tiles;\n    }\n}\n\nconst TileFactory = {\n    map: {\n        p: PlainTile,\n        e: EmptyTile,\n    },\n    create: function(json) {\n        const cls = this.map[json.type];\n        return new cls(json.x, json.y, json.h);\n    },\n    getJSON: function(propString) {\n        const props = propString.split('-');\n        return {\n            type: props[0],\n            h: parseInt(props[1]),\n        };\n    },\n    getPropString: function(json) {\n        return `${json.type}-${json.h}`;\n    }\n};\n\nexport { Tile, EmptyTile, PlainTile, TileGroup, TileFactory };\n\n\n// WEBPACK FOOTER //\n// ./js/Tile.js","import { Color } from './Color';\nimport { Tile, EmptyTile, TileGroup } from './Tile';\n\nclass MapObject {\n\n    constructor(props, tile = null) {\n        this.player = null;\n        this.tile = tile;\n        if (tile !== null) {\n            tile.setMapObject(this);\n        }\n    }\n\n    setTile(tile) {\n        this.tile = tile;\n        tile.setMapObject(this);\n    }\n\n    getTile() {\n        return this.tile;\n    }\n\n    getX() {\n        return this.tile.getX();\n    }\n\n    getY() {\n        return this.tile.getY();\n    }\n\n    getH() {\n        return this.tile.getH();\n    }\n\n    getPlayer() {\n        return this.player;\n    }\n\n    toJSON() {\n        return {\n            type: this.constructor.name(),\n            x: this.tile.getX(),\n            y: this.tile.getY(),\n        };\n    }\n\n    static name() {\n        throw Error('Unimplemented');\n    }\n}\n\nclass Shard extends MapObject {\n\n    attackedBy(vessel) {\n        this.tile.unsetMapObject();\n        return {\n            key: this.getKey(),\n            color: null,\n        };\n    }\n}\n\nclass BlueShard extends Shard {\n    static name() {\n        return 'bs';\n    }\n}\n\nclass RedShard extends Shard {\n    static name() {\n        return 'rs';\n    }\n}\n\nclass YellowShard extends Shard {\n    static name() {\n        return 'ys';\n    }\n}\n\n\nclass Vessel extends MapObject {\n\n    constructor(props, tile = null) {\n        super(...arguments);\n        this.player = props.player\n        this.movement = 4;\n        this.range = 1;\n    }\n\n    toJSON() {\n        const json = super.toJSON();\n        json.player = this.player;\n        return json;\n    }\n\n    getMoveActions() {\n        const paths = this.getMoveablePaths();\n        const srcKey = this.tile.getKey();\n        const actions = [];\n        for (let key in paths) {\n            actions.push({\n                name: 'move',\n                src: srcKey,\n                dst: key,\n                path: paths[key],\n            });\n        }\n        return actions;\n    }\n\n    getTransferActions(objs) {\n        if (this.getShard() === null) {\n            return [];\n        }\n        return objs.filter(o => o !== this && o.getShard() === null).map(o => {\n            return {\n                name: 'transfer',\n                src: this.tile.getKey(),\n                dst: o.tile.getKey(),\n            };\n        });\n    }\n\n    getAttackActions() {\n        let tileGroups = this.getAttackableTileGroups();\n        tileGroups = tileGroups.filter(t => t.getMapObjects().length > 0);\n        return tileGroups.map(t => {\n            return {\n                name: 'attack',\n                src: this.tile.getKey(),\n                dst: t.getTiles().map(tile => tile.getKey()),\n            };\n        });\n    }\n\n    transfer(tile) {\n        const target = tile.getMapObject();\n        const cls = target.consumeShard(this.getShard());\n        const newObj = new cls(target.toJSON(), tile);\n        const origObj = new WhiteVessel(this.toJSON(), this.tile);\n    }\n\n    attack(tiles) {\n        tiles.map(t => t.getMapObject()).filter(m => m !== null).forEach(m => m.attackedBy(this));\n    }\n\n    move(tile) {\n        const mO = tile.getMapObject();\n        if (mO === null) {\n            this.tile.unsetMapObject();\n            tile.setMapObject(this);\n            this.tile = tile;\n        } else if (mO instanceof Shard) {\n            const cls = this.consumeShard(mO);\n            var newObj = new cls(this.toJSON(), tile);\n            this.tile.unsetMapObject();\n        }\n    }\n\n    getShard() {\n        return null;\n    }\n\n    getAttackableTileGroups() {\n        const dirs = ['left', 'right', 'top', 'down'];\n        let queue = new Set([this.tile]);\n        let nextQueue;\n        const tileSet = new Set();\n        for (let i = 0; i < this.range; i++) {\n            nextQueue = new Set();\n            queue.forEach(tile => {\n                dirs.forEach((dir) => {\n                    const t = tile[dir];\n                    if (t !== null && t !== this.tile) {\n                        nextQueue.add(t);\n                        tileSet.add(t);\n                    }\n                })\n            });\n            queue = nextQueue;\n        }\n        return Array.from(tileSet).map(t => new TileGroup([t]));\n    }\n\n    getMoveablePaths() {\n        const dirs = ['left', 'right', 'top', 'down'];\n        let queue = new Set([this.tile]);\n        let nextQueue;\n        const paths = {};\n        const startKey = this.tile.getKey();\n        paths[startKey] = [startKey];\n        const keysToDelete = [startKey];\n        for (let i = 0; i < this.movement; i++) {\n            nextQueue = new Set();\n            queue.forEach(tile => {\n                const key = tile.getKey();\n                dirs.forEach((dir) => {\n                    const t = tile[dir];\n                    if (t !== null && t !== this.tile) {\n                        if (this.canMoveThrough(t) && Math.abs(t.getH() - tile.getH()) < 2) {\n                            const tkey = t.getKey();\n                            if (paths[tkey] === undefined) {\n                                nextQueue.add(t);\n                                paths[tkey] = paths[key].concat(tkey);\n                                if (!this.canMoveTo(t)) {\n                                    keysToDelete.push(tkey);\n                                }\n                            }\n                        }\n                    }\n                })\n            });\n            queue = nextQueue;\n        }\n        keysToDelete.forEach(key => delete paths[key]);\n        return paths;\n    }\n\n    canMoveThrough(tile) {\n        if (tile instanceof EmptyTile) {\n            return false;\n        }\n        const mO = tile.getMapObject();\n        if (mO === null || mO instanceof Shard || mO.getPlayer() === this.player) {\n            return true;\n        }\n        return false;\n    }\n\n    canMoveTo(tile) {\n        if (tile instanceof EmptyTile) {\n            return false;\n        }\n        const mO = tile.getMapObject();\n        if (mO === null || mO instanceof Shard) {\n            return true;\n        }\n        return false;\n    }\n\n    attackedBy(vessel) {\n        this.tile.unsetMapObject();\n        return {\n            key: this.getKey(),\n            color: null,\n        };\n    }\n}\n\nclass WhiteVessel extends Vessel {\n\n    consumeShard(shard) {\n        if (shard instanceof BlueShard) {\n            return BlueVessel;\n        } else if (shard instanceof RedShard) {\n            return RedVessel;\n        } else if (shard instanceof YellowShard) {\n            return YellowVessel;\n        }\n    }\n\n    static name() {\n        return 'w';\n    }\n}\n\nclass BlueVessel extends Vessel {\n\n    constructor() {\n        super(...arguments);\n        this.range = 2;\n    }\n\n    static name() {\n        return 'b';\n    }\n\n    getShard() {\n        return new BlueShard();\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel(this.toJSON(), tile);\n            return {\n                key: this.getKey(),\n                color: obj.getColor(),\n            };\n        }\n    }\n}\n\nclass RedVessel extends Vessel {\n\n    static name() {\n        return 'r';\n    }\n\n    getShard() {\n        return new RedShard();\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                key: this.getKey(),\n                color: obj.getColor(),\n            };\n        }\n    }\n\n    getAttackableTargets() {\n        const dirs1 = ['left', 'right'];\n        const dirs2 = ['top', 'down'];\n        const tileSet = new Set();\n        dirs1.forEach(dir => {\n            const t = this.tile[dir];\n            if (t !== null) {\n                if (t.getMapObject() !== null) {\n                    tileSet.add(t);\n                }\n                dirs2.forEach(dir2 => {\n                    const t2 = t[dir2];\n                    if (t2 !== null && t2.getMapObject() !== null) {\n                        tileSet.add(t2);\n                    }\n                });\n            }\n        });\n        dirs2.forEach(dir => {\n            const t = this.tile[dir];\n            if (t !== null) {\n                if (t.getMapObject() !== null) {\n                    tileSet.add(t);\n                }\n                dirs1.forEach(dir2 => {\n                    const t2 = t[dir2];\n                    if (t2 !== null && t2.getMapObject() !== null) {\n                        tileSet.add(t2);\n                    }\n                });\n            }\n        });\n\n        const tileArray = Array.from(tileSet);\n        const tileKeys = tileArray.map(t => t.getKey());\n        const objKeys = tileArray.map(t => t.getMapObject().getKey());\n        const ret = [];\n        ret.push(tileKeys.concat(objKeys));\n        return ret;\n    }\n}\n\nclass YellowVessel extends Vessel {\n\n    constructor() {\n        super(...arguments);\n        this.movement = 5;\n    }\n\n    static name() {\n        return 'y';\n    }\n\n    getShard() {\n        return new YellowShard();\n    }\n\n    attackedBy(vessel) {\n        if (vessel instanceof WhiteVessel) {\n            const obj = new WhiteVessel([this.player], this.tile, this.getKey());\n            return {\n                key: this.getKey(),\n                color: obj.getColor(),\n            };\n        }\n    }\n}\n\nconst NAME_MAP = {\n    bs: BlueShard,\n    rs: RedShard,\n    ys: YellowShard,\n    w: WhiteVessel,\n    b: BlueVessel,\n    r: RedVessel,\n    y: YellowVessel,\n}\n\nconst POLYGON_MAP = {\n    bs: 'tetrahedron',\n    rs: 'tetrahedron',\n    ys: 'tetrahedron',\n    w: 'icosahedron',\n    b: 'icosahedron',\n    r: 'icosahedron',\n    y: 'icosahedron',\n}\n\nconst MapObjectFactory = {\n    map: {\n        bs: BlueShard,\n        rs: RedShard,\n        ys: YellowShard,\n        w: WhiteVessel,\n        b: BlueVessel,\n        r: RedVessel,\n        y: YellowVessel, \n    },\n    create: function(json) {\n        const cls = this.map[json.type];\n        return new cls(json);\n    },\n    getJSON: function(propString) {\n        const props = propString.split('-');\n        const json = {\n            type: props[0],\n        }\n        if (props.length > 1) {\n            json.player = props[1];\n        }\n        return json;\n    },\n    getPropString: function(json) {\n        let propString = `${json.x}-${json.y}-${json.type}`;\n        if (json.player !== undefined) {\n            propString += `-${json.player}`;\n        }\n        return propString;\n    },\n}\n\nexport { MapObject, MapObjectFactory }\n\n\n// WEBPACK FOOTER //\n// ./js/MapObject.js","import { TileFactory } from \"./Tile\";\nimport { MapObjectFactory } from \"./MapObject\";\nimport { ObjectiveFactory } from './Objective';\nimport { Map } from \"./Map\";\n\nfunction serialize(map) {\n    const state = map.toJSON();\n    let mapString = '';\n    const tiles = state.tiles;\n    const mapObjects = [];\n    for (let i = 0; i < tiles.length; i++) {\n        const tileRow = tiles[i];\n        for (let j = 0; j < tileRow.length; j++) {\n            const tile = tileRow[j];\n            if (tile.mapObject !== undefined) {\n                mapObjects.push(tile.mapObject);\n            }\n            const tileString = TileFactory.getPropString(tile);\n            mapString += tileString;\n            if (j !== tileRow.length - 1) {\n                mapString += ' ';\n            }\n        }\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    for (let i = 0; i < mapObjects.length; i++) {\n        const mapObject = mapObjects[i];\n        const mapObjectString = MapObjectFactory.getPropString(mapObject);\n        mapString += mapObjectString;\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    mapString += ObjectiveFactory.getPropString(state.objective);\n    mapString += '\\n';\n    mapString += state.turnPlayers.join('-');\n    mapString += '\\n';\n    mapString += `${state.actions.move}-${state.actions.transfer}-${state.actions.attack}`;\n    return mapString;\n}\n\nfunction deserialize(mapString) {\n    const state = {};\n    const splitString = mapString.split('\\n===\\n');\n    const tileArrayString = splitString[0];\n    const mapObjectArrayString = splitString[1];\n    const settings = splitString[2].split('\\n');\n\n    const tiles = [];\n    const tileRowStrings = tileArrayString.split('\\n');\n    for (let y = 0; y < tileRowStrings.length; y++) {\n        const tileRow = [];\n        const tileStrings = tileRowStrings[y].split(' ');\n        for (let x = 0; x < tileStrings.length; x++) {\n            const json = TileFactory.getJSON(tileStrings[x]);\n            json.x = x;\n            json.y = y;\n            tileRow.push(json);\n        }\n        tiles.push(tileRow);\n    }\n\n    const mapObjectStrings = mapObjectArrayString.split('\\n');\n    for (let i = 0; i < mapObjectStrings.length; i++) {\n        const props = mapObjectStrings[i].split('-');\n        const x = parseInt(props[0]);\n        const y = parseInt(props[1]);\n        const json = MapObjectFactory.getJSON(props.slice(2, props.length).join('-'));\n        json.x = x;\n        json.y = y;\n        tiles[y][x].mapObject = json;\n    }\n\n    state.objective = ObjectiveFactory.getJSON(settings[0]);\n    state.turnPlayers = settings[1].split('-');\n    const s = settings[2].split('-');\n    state.actions = {\n        move: parseInt(s[0]),\n        transfer: parseInt(s[1]),\n        attack: parseInt(s[2]),\n    };\n    state.tiles = tiles;\n    return new Map(state);\n}\n\nexport { serialize, deserialize }\n\n\n\n// WEBPACK FOOTER //\n// ./js/MapSerializer.js","class Objective {\n\n    serialize() {\n        return this.constructor.name();\n    }\n\n    toJSON() {\n        return this.constructor.name();\n    }\n\n    check(map) {\n        throw Error('Unimplemented');\n    }\n\n    success(map) {\n        throw Error('Unimplemented');\n    }\n\n}\n\nclass Objective1 extends Objective {\n\n    static name() {\n        return 0;\n    }\n\n    check(map) {\n        let players = map.getMapObjects().map(m => m.getPlayer()).filter(p => p !== null);\n        let player = players.filter(p => p === '0');\n        let enemies =  players.filter(p => p !== '0');\n        return player.length === 0 || enemies.length === 0;\n    }\n\n    success(map) {\n        let players = map.getMapObjects().map(m => m.getPlayer());\n        let enemies =  players.filter(p => p !== '0' && p !== null);\n        return enemies.length === 0;\n    }\n}\n\n\nconst ObjectiveFactory = {\n    map: {\n        0: Objective1,\n    },\n    create: function(json) {\n        const cls = this.map[json];\n        return new cls();\n    },\n    getJSON: function(propString) {\n        return parseInt(propString);\n    },\n    getPropString: function(json) {\n        return `${json}`;\n    }\n};\n\nexport { ObjectiveFactory }\n\n\n// WEBPACK FOOTER //\n// ./js/Objective.js","import { MapScreen } from \"./MapScreen\";\nimport DefaultMap from \"./DefaultMap\";\n\nexport default class Game {\n    constructor(width, height) {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n\n    start() {\n        window.dmap = DefaultMap;\n        document.body.appendChild(this.canvas);\n        this.screen = new MapScreen(this.canvas, DefaultMap);\n        this.screen.start();\n    \n        this.canvas.addEventListener(\"click\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleClick(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousedown\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseDown(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousemove\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseMove(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseup\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseUp(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseleave\", (e) => {\n            this.screen.handleMouseLeave();\n        });\n\n        document.addEventListener(\"keydown\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyDown(e.code);\n        });\n\n        document.addEventListener(\"keyup\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyUp(e.code);\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./js/Game.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/main.css\n// module id = 7\n// module chunks = 0","class Animation {\n    \n    constructor(transitions, frames, destroy = false) {\n        this.frame = 0;\n        this.frames = frames;\n        this.destroy= destroy;\n        this.transitions = transitions;\n    }\n\n    initialize(state) {\n        for (let key in state) {\n            if (this.transitions[key] === undefined) {\n                this.transitions[key] = new TransitionNoop(state[key]);\n            } else if (!this.transitions[key].isInitialized()) {\n                this.transitions[key].initialize(state[key]);\n            }\n        }\n    }\n\n    isInitialized() {\n        return this.frame !== 0;\n    }\n\n    finished() {\n        return this.frame === this.frames;\n    }\n\n    destroyAfter() {\n        return this.destroy;\n    }\n\n    getNextState() {\n        this.frame += 1;\n        const nextState = {};\n        for (let key in this.transitions) {\n            nextState[key] = this.transitions[key].evaluate(this.frame / this.frames);\n        }\n        return nextState;\n    }\n}\n\nclass TransitionNoop {\n\n    constructor(start) {\n        this.start = start;\n    }\n\n    evaluate(t) {\n        return this.start;\n    }\n}\n\nclass TransitionLinear {\n\n    constructor(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n\n    isInitialized() {\n        return this.start !== null;\n    }\n\n    initialize(start) {\n        this.start = start;\n    }\n\n    evaluate(t) {\n        return this.start + (this.end - this.start) * t;\n    }\n}\n\nclass TransitionQuadraticBezier {\n    constructor(p0, p1, p2) {\n        this.p0 = p0;\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n\n    isInitialized() {\n        return true;\n    }\n\n    evaluate(t) {\n        return (1 - t) * (1 - t) * this.p0 + 2 * (1 - t) * t * this.p1 + t * t * this.p2;\n    }\n}\n\nexport { Animation, TransitionNoop, TransitionLinear, TransitionQuadraticBezier }\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./js/Animation.js","import { Vector } from './Vector';\n\nclass BSPTree {\n    \n    constructor(faces) {\n        this.nodes = [];\n        this.front = null;\n        this.back = null;\n        if (faces.length == 0) {\n            return;\n        }\n\n        this.nodes = [faces[0]];\n        const p0 = faces[0].getPoints()[0];\n        const n = faces[0].getNormal();\n        const frontFaces = [];\n        const backFaces = [];\n\n        for (let i = 1; i < faces.length; i++) {\n            let pos;\n            let cut = false;\n            const frontPoints = [];\n            const backPoints = [];\n            const points = faces[i].getPoints();\n\n            //Get initial pos\n            const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n            if (Math.abs(lastD) < 0.001) {\n                pos = null;\n            } else if (lastD > 0) {\n                pos = 'front';\n            } else {\n                pos = 'back';\n            }\n\n            // Iterate over points\n            for (let j = 0; j < points.length; j++) {\n                const p = points[j];\n                const d = Vector.createFromPoints(p0, p).dot(n);\n                if (Math.abs(d) < 0.001) {\n                    pos = null;\n                    frontPoints.push(p);\n                    backPoints.push(p);\n                } else if (d > 0) {\n                    if (pos === 'back') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    frontPoints.push(p);\n                    pos = 'front';\n                } else {\n                    if (pos === 'front') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    backPoints.push(p);\n                    pos = 'back';\n                }\n            }\n\n            if (cut) {\n                // Split a face...\n                const { face1, face2 } = faces[i].getPolygon().splitFace(faces[i], frontPoints, backPoints);\n                frontFaces.push(face1);\n                backFaces.push(face2);\n            } else {\n                if (frontPoints.length === points.length && backPoints.length === points.length) {\n                    this.nodes.push(faces[i]);\n                } else if (frontPoints.length === points.length) {\n                    frontFaces.push(faces[i]);\n                } else {\n                    backFaces.push(faces[i]);\n                }\n            }\n        }\n\n        if (frontFaces.length > 0) {\n            this.front = new BSPTree(frontFaces);\n        }\n        if (backFaces.length > 0) {\n            this.back = new BSPTree(backFaces);\n        }\n    }\n\n    addFace(face) {\n        if (this.nodes.length === 0) {\n            this.nodes = [face];\n            return;\n        }\n        const p0 = this.nodes[0].getPoints()[0];\n        const n = this.nodes[0].getNormal();\n        let pos;\n        let cut = false;\n        const frontPoints = [];\n        const backPoints = [];\n        const points = face.getPoints();\n\n        //Get initial pos\n        const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n        if (Math.abs(lastD) < 0.001) {\n            pos = null;\n        } else if (lastD > 0) {\n            pos = 'front';\n        } else {\n            pos = 'back';\n        }\n\n        // Iterate over points\n        for (let j = 0; j < points.length; j++) {\n            const p = points[j];\n            const d = Vector.createFromPoints(p0, p).dot(n);\n            if (Math.abs(d) < 0.001) {\n                pos = null;\n                frontPoints.push(p);\n                backPoints.push(p);\n            } else if (d > 0) {\n                if (pos === 'back') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                frontPoints.push(p);\n                pos = 'front';\n            } else {\n                if (pos === 'front') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                backPoints.push(p);\n                pos = 'back';\n            }\n        }\n\n        if (cut) {\n            // Split a face...\n            const { face1, face2 } = face.getPolygon().splitFace(face, frontPoints, backPoints);\n            if (this.front !== null) {\n                this.front.addFace(face1);\n            } else {\n                this.front = new BSPTree([face1]);\n            }\n            if (this.back !== null) {\n                this.back.addFace(face2);\n            } else {\n                this.back = new BSPTree([face2]);\n            }\n        } else {\n            if (frontPoints.length === points.length && backPoints.length === points.length) {\n                this.nodes.push(face);\n            } else if (frontPoints.length === points.length) {\n                if (this.front !== null) {\n                    this.front.addFace(face);\n                } else {\n                    this.front = new BSPTree([face]);\n                }\n            } else {\n                if (this.back !== null) {\n                    this.back.addFace(face);\n                } else {\n                    this.back = new BSPTree([face]);\n                }\n            }\n        }\n    }\n\n    addFaces(faces) {\n        faces.forEach(face => this.addFace(face));\n    }\n\n    removeFace(face) {\n        const idx = this.nodes.indexOf(face);\n        if (idx !== -1) {\n            this.nodes.splice(idx, 1);\n            return;\n        }\n        if (this.front !== null) {\n            this.front.removeFace(face);\n        }\n        if (this.back !== null) {\n            this.back.removeFace(face);\n        }\n    }\n\n    removeFaces(faces) {\n        faces.forEach(face => this.removeFace(face));\n    }\n\n    traverse(fn, viewport) {\n        if (this.nodes.length > 0) {\n            const n = this.nodes[0].getNormal();\n            const p = this.nodes[0].getPoints()[0];\n            const viewDir = viewport.getViewDir(p, n);\n            if (viewDir === 'towards') {\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n            } else {\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                \n            }\n        }\n    }\n}\n\nexport { BSPTree };\n\n\n// WEBPACK FOOTER //\n// ./js/BSPTree.js","import { deserialize } from \"./MapSerializer\";\n\nvar exampleMapString = \n`p-1 p-2 p-3\np-2 p-3 p-2\np-3 p-1 p-1\np-1 e-1 p-1\np-1 p-1 p-1\n===\n0-0-w-0\n1-0-w-0\n2-0-w-1\n0-1-bs\n2-1-w-1\n0-2-rs\n0-3-ys\n===\n0\n0-1\n1-1-1`;\n\nconst defaultMap = deserialize(exampleMapString);\n\nexport default defaultMap;\n\n\n// WEBPACK FOOTER //\n// ./js/DefaultMap.js","import { serialize } from \"./MapSerializer\";\nimport { TileFactory } from \"./Tile\";\nimport { ObjectiveFactory } from \"./Objective\";\nimport { MapObjectFactory } from \"./MapObject\";\n\nclass Map {\n\n    constructor(state) {\n        this.tiles = [];\n        this.tileMap = {};\n        for (let y = 0; y < state.tiles.length; y++) {\n            const tileRow = [];\n            for (let x = 0; x < state.tiles[y].length; x++) {\n                const tile = TileFactory.create(state.tiles[y][x]);\n                this.tileMap[tile.getKey()] = tile;\n                if (state.tiles[y][x].mapObject !== undefined) {\n                    const m = MapObjectFactory.create(state.tiles[y][x].mapObject);\n                    m.setTile(tile);\n                }\n                if (y > 0) {\n                    this.tiles[y - 1][x].link('down', tile);\n                    tile.link('top', this.tiles[y - 1][x]);\n                }\n                if (x > 0) {\n                    tileRow[x - 1].link('right', tile);\n                    tile.link('left', tileRow[x - 1]);\n                }\n                tileRow.push(tile);\n            }\n            this.tiles.push(tileRow);\n        }\n        this.objective = ObjectiveFactory.create(state.objective);\n        this.turnPlayers = state.turnPlayers;\n        this.actions = state.actions;\n        this.listeners = [];\n        this.cachedActions = null;\n    }\n\n    toJSON() {\n        const state = {};\n        state.tiles = this.tiles.map(tileRow => tileRow.map(tile => tile.toJSON()));\n        state.objective = this.objective.toJSON();\n        state.turnPlayers = this.turnPlayers;\n        state.actions = this.actions;\n        return state;\n    }\n\n    static transition(state, action) {\n        const map = new Map(state);\n        map.doAction(action);\n        return map.toJSON();\n    }\n\n    doAction(action) {\n        //TODO: Validate actions is in available actions\n        const validActions = this.getActions();\n        if (validActions.indexOf(action) === -1) {\n            throw Error('Invalid Action');\n        }\n        const name = action.name;\n        if (this.actions[name] > 0) {\n            const src = this.tileMap[action.src].getMapObject();\n            let dst;\n            if (name === 'attack') {\n                dst = action.dst.map(d => this.tileMap[d]);\n            } else {\n                dst = this.tileMap[action.dst];\n            }\n            src[name](dst);\n            this.actions[name] -= 1;\n\n            this.listeners.forEach(l => l.trigger(action));\n        } else if (name !== 'end') {\n            throw Error('Invalid action');\n        }\n        if (name === 'end' || Object.values(this.actions).reduce((a,b) => a + b, 0) === 0) {\n            this.turnPlayers.push(this.turnPlayers.shift());\n            this.actions = {\n                move: 1,\n                transfer: 1,\n                attack: 1,\n            };\n        }\n    }\n\n    getActions() {\n        if (this.cachedActions !== null) {\n            return this.cachedActions;\n        }\n        let actions = [{name: 'end'}];\n        const objs = this.getMapObjects().filter(m => m.getPlayer() === this.turnPlayers[0]);\n        if (this.actions.move > 0) {\n            actions = objs.reduce((a, b) => {\n                return a.concat(b.getMoveActions());\n            }, actions);\n        }\n        if (this.actions.transfer > 0) {\n            actions = objs.reduce((a, b) => {\n                return a.concat(b.getTransferActions(objs));\n            }, actions);\n        }\n        if (this.actions.attack > 0) {\n            actions = objs.reduce((a, b) => {\n                return a.concat(b.getAttackActions());\n            }, actions);\n        }\n        this.cachedActions = actions;\n        return actions;\n    }\n\n    addListener(l) {\n        this.listeners.push(l);\n    }\n\n    getMapObjects() {\n        const mapObjects = [];\n        this.tiles.forEach(tileRow => {\n            tileRow.forEach(tile => {\n                const mapObject = tile.getMapObject();\n                if (mapObject !== null) {\n                    mapObjects.push(mapObject);\n                }\n            });\n        });\n        return mapObjects;\n    }\n\n    getObjective() {\n        return this.objective;\n    }\n\n    getTurnPlayer() {\n        return this.turnPlayer;\n    }\n\n    isResolved() {\n        return this.objective.check(this);\n    }\n\n    serialize() {\n        return serialize(this);\n    }\n}\n\nexport { Map }\n\n\n// WEBPACK FOOTER //\n// ./js/Map.js","import { Point, Vector } from \"./Vector\";\nimport { Animation, TransitionNoop, TransitionLinear, TransitionQuadraticBezier } from \"./Animation\";\nimport { Viewport } from \"./Viewport\";\nimport { PolygonFactory, Overlay, HOVER_NONE, HOVER_MAIN, HOVER_SECONDARY } from \"./Polygon\";\nimport { PolygonRenderer} from \"./PolygonRenderer\";\nimport { Color } from \"./Color\";\n\nconst DEFAULT_COLOR = new Color(242, 242, 242, 1);\nconst NEXT_VALID_COLOR = new Color(0, 255, 255, 1);\nconst VALID_COLOR = new Color(0, 255, 204, 1);\nconst VALID_HOVER_COLOR = new Color(102, 255, 204, 1);\nconst SELECTED_COLOR = new Color(0, 204, 153, 1);\nconst OVERLAY_DEFAULT_COLOR = new Color(230, 230, 230, 1);\nconst OVERLAY_DISABLE_COLOR = new Color(153, 153, 153, 1);\nconst OVERLAY_HOVER_COLOR = new Color(242, 242, 242, 1);\n\nclass MapScreen {\n\n    constructor(canvas, map) {\n        this.canvas = canvas;\n        this.map = map;\n        this.viewport = new Viewport(\n            new Point(0, 0, 500),\n            new Point(this.canvas.width, 0, 500),\n            new Point(0, this.canvas.height, 500),\n            new Point(this.canvas.width, this.canvas.height, 500),\n            500\n        );\n        this.pressed = {};\n        this.dynamicPolygons = {};\n        this.animations = [];\n\n        const staticPolygons = [];\n        this.polygons = {};\n        this.keyMap = {};\n\n        const state = this.map.toJSON();\n        state.tiles.forEach(tileRow => {\n            tileRow.forEach(tile => {\n                const { tilePolygon, mapObjectPolygon } = PolygonFactory.create(tile);\n                if (tilePolygon !== null) {\n                    staticPolygons.push(tilePolygon);\n                    this.polygons[tilePolygon.getKey()] = tilePolygon;\n                    this.keyMap[tilePolygon.getKey()] = tile.key;\n                }\n                if (mapObjectPolygon !== null) {\n                    this.dynamicPolygons[mapObjectPolygon.getKey()] = mapObjectPolygon;\n                    this.polygons[mapObjectPolygon.getKey()] = mapObjectPolygon;\n                    this.keyMap[mapObjectPolygon.getKey()] = tile.key;\n                }\n            });\n        });\n\n        this.state = {\n            mode: 'menu',\n            hoverKey: null,\n            hoverMainKeyMap: {},\n            hoverSecondaryKeyMap: {},\n        };\n\n        this.overlays = {\n            move: new Overlay(50, 50, 150, 50, 'move'),\n            attack: new Overlay(50, 100, 150, 50, 'attack'),\n            transfer: new Overlay(50, 150, 150, 50, 'transfer'), \n            end: new Overlay(50, 200, 150, 50, 'end'),\n        };\n\n        Object.values(this.overlays).forEach(o => this.polygons[o.getKey()] = o);\n\n        const actions = this.map.getActions();\n        actions.map(a => {\n            const overlay = this.overlays[a.name];\n            const key = overlay.getKey();\n            this.state.hoverMainKeyMap[key] = [key];\n            if (a.src !== undefined) {\n                const srcList = this.state.hoverSecondaryKeyMap[key] || [];\n                const src = Object.keys(this.keyMap).filter(k => this.keyMap[k] === a.src);\n                this.state.hoverSecondaryKeyMap[key] = Array.from(new Set(srcList.concat(src)));\n            }\n        });\n\n        /*this.state = {\n            action: 'menu',\n            validKeyGroups: this.map.getActions(),\n            selectedKeyGroup: [],\n            prevKeyGroup: [],\n        };*/\n\n        //this.postStateUpdate();\n\n        //this.r = new Vector(0, 0, 1);\n        \n        this.renderer = new PolygonRenderer(this.canvas, staticPolygons, (a,b) => a.getNormal().getZ() - b.getNormal().getZ());\n        map.addListener(this);\n    }\n\n    start() {\n        this.renderLoop();\n    }\n\n    renderLoop() {\n        this.viewport.updatePosition();\n        const overlays = this.getOverlays();\n        this.renderer.render(this.viewport, Object.values(this.dynamicPolygons), overlays);\n        this.updateHover();\n        /*this.r.rotate(new Vector(1, 0, 0), 1 * Math.PI / 180);\n        Object.values(this.dynamicPolygons).forEach(p => {\n            p.rotate(this.r, 1 * Math.PI / 180);\n        });*/\n\n        /*const polygonsToDestroy = [];\n        if (this.animations.length > 0) {\n            const animation = this.animations[0];\n            const finishedAnimations = [];\n            for (let key in animation) {\n                const a = animation[key];\n                const p = this.dynamicPolygons[key];\n                if (!a.isInitialized()) {\n                    a.initialize(p.getState());\n                }\n                const state = a.getNextState();\n                p.applyState(state);\n                if (a.finished()) {\n                    finishedAnimations.push(key);\n                    if (a.destroyAfter()) {\n                        polygonsToDestroy.push(key);\n                    }\n                }\n            }\n            finishedAnimations.forEach(key => delete animation[key]);\n            if (Object.keys(animation).length === 0) {\n                this.animations.splice(0, 1);\n            }\n        }\n\n        const overlays = this.state.action === 'menu' ? Object.values(this.overlays) : [];\n\n        const nextValidKeyGroups = this.getNextValidKeyGroups();\n        this.state.selectedKeyGroup.forEach(key => {\n            if (this.staticPolygons[key] !== undefined) {\n                this.staticPolygons[key].setColor(VALID_HOVER_COLOR);\n            }\n            if (this.overlays[key] !== undefined) {\n                this.overlays[key].setColor(OVERLAY_HOVER_COLOR);\n            }\n        });\n        nextValidKeyGroups.forEach(keyGroup => {\n            keyGroup.forEach(key => {\n                if (this.staticPolygons[key] !== undefined) {\n                    this.staticPolygons[key].setColor(NEXT_VALID_COLOR);\n                }\n            });\n        });     \n\n        this.renderer.render(this.viewport, Object.values(this.dynamicPolygons), overlays);\n\n        nextValidKeyGroups.forEach(keyGroup => {\n            keyGroup.forEach(key => {\n                if (this.staticPolygons[key] !== undefined) {\n                    if (this.getKeyGroup(key).length > 0) {\n                        this.staticPolygons[key].setColor(VALID_COLOR);\n                    } else {\n                        this.staticPolygons[key].setColor(DEFAULT_COLOR);\n                    }\n                }\n            });\n        });\n        this.state.selectedKeyGroup.forEach(key => {\n            if (this.staticPolygons[key] !== undefined) {\n                this.staticPolygons[key].setColor(VALID_COLOR);\n            }\n            if (this.overlays[key] !== undefined) {\n                this.overlays[key].setColor(OVERLAY_DEFAULT_COLOR);\n            }\n        });\n\n        this.state.selectedKeyGroup = this.getKeyGroup(this.getKey(this.renderer.getHoveredObj()));\n\n        polygonsToDestroy.forEach(key => delete this.dynamicPolygons[key]);\n        */\n\n        window.requestAnimationFrame((step) => {\n            this.renderLoop();\n        });\n    }\n\n    getOverlays() {\n        return Object.values(this.overlays);\n    }\n\n    /*\n        Three hover states:\n            None - no hover highlight\n            Secondary - secondary hover highlight\n            Main - main hover highlight\n     */ \n    updateHover() {\n        this.cancelHover();\n        const obj = this.renderer.getHoveredObj();\n        this.state.hoverKey = obj === null ? null : obj.getKey();\n        this.setHover();\n    }\n\n    cancelHover() {\n        const key = this.state.hoverKey;\n        if (key !== null) {\n            const hoverMainKeys = this.state.hoverMainKeyMap[key];\n            const hoverSecondaryKeys = this.state.hoverSecondaryKeyMap[key];\n            if (hoverMainKeys !== undefined) {\n                hoverMainKeys.forEach(k => {\n                    this.polygons[k].setHover(HOVER_NONE);\n                });\n            }\n            if (hoverSecondaryKeys !== undefined) {\n                hoverSecondaryKeys.forEach(k => {\n                    this.polygons[k].setHover(HOVER_NONE);\n                });\n            }\n        }\n    }\n\n    setHover() {\n        const key = this.state.hoverKey;\n        if (key !== null) {\n            const hoverMainKeys = this.state.hoverMainKeyMap[key];\n            const hoverSecondaryKeys = this.state.hoverSecondaryKeyMap[key];\n            if (hoverMainKeys !== undefined) {\n                hoverMainKeys.forEach(k => {\n                    this.polygons[k].setHover(HOVER_MAIN);\n                });\n            }\n            if (hoverSecondaryKeys !== undefined) {\n                hoverSecondaryKeys.forEach(k => {\n                    this.polygons[k].setHover(HOVER_SECONDARY);\n                });\n            }\n        }\n    }\n\n    trigger(e) {\n        if (e.name === 'move') {\n            const startCenter = this.staticPolygons[e.path[0]].getCenter();\n            let x = startCenter.getX();\n            let y = startCenter.getY();\n            let z = (startCenter.getZ() * 2) + (TLEN / 2);\n\n            for (let i = 1; i < e.path.length; i++) {\n                const animation = {};\n                const nextCenter = this.staticPolygons[e.path[i]].getCenter();\n                const nextX = nextCenter.getX();\n                const nextY = nextCenter.getY();\n                const nextZ = (nextCenter.getZ() * 2) + (TLEN / 2);\n                const transitions = {};\n                if (z === nextZ) {\n                    transitions.x = new TransitionLinear(x, nextX);\n                    transitions.y = new TransitionLinear(y, nextY);\n                    transitions.z = new TransitionLinear(z, nextZ);\n                } else {\n                    transitions.x = new TransitionQuadraticBezier(x, z > nextZ ? nextX : x, nextX);\n                    transitions.y = new TransitionQuadraticBezier(y, z > nextZ ? nextY : y, nextY);\n                    transitions.z = new TransitionQuadraticBezier(z, Math.max(z, nextZ), nextZ);\n                }\n\n                if (e.color !== undefined && i === e.path.length - 1) {\n                    transitions.r = new TransitionLinear(null, e.color.getR());\n                    transitions.g = new TransitionLinear(null, e.color.getG());\n                    transitions.b = new TransitionLinear(null, e.color.getB());\n\n                    const shardTransitions = {}\n                    shardTransitions.a = new TransitionLinear(null, 0);\n                    shardTransitions.sa = new TransitionLinear(null, 0);\n                    const shardAnimation = new Animation(shardTransitions, 30, true);\n                    animation[e.shardKey] = shardAnimation\n                }\n\n                animation[e.objKey] = new Animation(transitions, 30);\n\n                this.animations.push(animation);\n\n                x = nextX;\n                y = nextY;\n                z = nextZ;\n            }\n        } else if (e.name === 'transfer') {\n            const animation = {};\n\n            const srcTransitions = {}\n            srcTransitions.r = new TransitionLinear(null, e.srcColor.getR());\n            srcTransitions.g = new TransitionLinear(null, e.srcColor.getG());\n            srcTransitions.b = new TransitionLinear(null, e.srcColor.getB());\n            animation[e.srcKey] = new Animation(srcTransitions, 30);\n\n            const dstTransitions = {}\n            dstTransitions.r = new TransitionLinear(null, e.dstColor.getR());\n            dstTransitions.g = new TransitionLinear(null, e.dstColor.getG());\n            dstTransitions.b = new TransitionLinear(null, e.dstColor.getB());\n            animation[e.dstKey] = new Animation(dstTransitions, 30);\n\n            this.animations.push(animation);\n        } else if (e.name === 'attack') {\n            const animation = {};\n\n            e.dst.forEach(target => {\n                const transitions = {};\n                if (target.color === null) {\n                    transitions.a = new TransitionLinear(null, 0);\n                    transitions.sa = new TransitionLinear(null, 0);\n                    animation[target.key] = new Animation(transitions, 30, true);\n                } else {\n                    transitions.r = new TransitionLinear(null, target.color.getR());\n                    transitions.g = new TransitionLinear(null, target.color.getG());\n                    transitions.b = new TransitionLinear(null, target.color.getB());\n                    animation[target.key] = new Animation(transitions, 30);\n                }\n            });\n\n            this.animations.push(animation);\n        }\n    }\n\n    handleMouseDown(x, y) {\n        //this.startDragX = x;\n        //this.startDragY = y;\n    }\n\n    handleMouseMove(x, y) {\n        this.viewport.setMouse(x,y);\n        /*if (this.startDragX !== null && this.startDragY !== null) {\n            const dx = this.startDragX - x;\n            const dy = this.startDragY - y;\n            this.viewport.translateAlongBasis(dx, dy);\n            this.startDragX = x;\n            this.startDragY = y;\n        }*/\n        //this.mapRenderer.renderMap();\n    }\n\n    handleMouseUp(x, y) {\n        //this.startDragX = null;\n        //this.startDragY = null;\n    }\n\n    preStateUpdate() {\n        this.state.prevKeyGroup.forEach(k => {\n            if (this.state.action.indexOf('choose') !== -1) {\n                if (this.staticPolygons[k] !== undefined) {\n                    this.staticPolygons[k].setColor(DEFAULT_COLOR);\n                }\n            }\n        });\n        this.state.validKeyGroups.forEach(keyGroup => {\n            keyGroup.forEach(k => {\n                if (this.state.action.indexOf('choose') !== -1) {\n                    if (this.staticPolygons[k] !== undefined) {\n                        this.staticPolygons[k].setColor(DEFAULT_COLOR);\n                    }\n                }\n                if (this.state.action === 'menu') {\n                    this.overlays[k].setColor(OVERLAY_DISABLE_COLOR);\n                }\n            });\n        });\n    }\n\n    postStateUpdate() {\n        this.state.prevKeyGroup.forEach(k => {\n            if (this.state.action.indexOf('choose') !== -1) {\n                if (this.staticPolygons[k] !== undefined) {\n                    this.staticPolygons[k].setColor(SELECTED_COLOR);\n                }\n            }\n        });\n        this.state.validKeyGroups.forEach(keyGroup => {\n            keyGroup.forEach(k => {\n                if (this.state.action.indexOf('choose') !== -1) {\n                    if (this.staticPolygons[k] !== undefined) {\n                        this.staticPolygons[k].setColor(VALID_COLOR);\n                    }\n                }\n                if (this.state.action === 'menu') {\n                    this.overlays[k].setColor(OVERLAY_DEFAULT_COLOR);\n                }\n            });\n        });\n\n    }\n\n    doMapAction() {\n        const mapArgs = {\n            'choose-move-dst': (key, prevKey) => ['move', prevKey, key],\n            'choose-attack-dst': (key, prevKey) => ['attack', prevKey, key],\n            'choose-transfer-dst': (key, prevKey) => ['transfer', prevKey, key],\n            'menu': (key, prevKey) => key === 'end' ? ['end'] : null,\n        };\n\n        if (mapArgs[this.state.action] !== undefined) {\n            const args = mapArgs[this.state.action](this.state.selectedKeyGroup[0], this.state.prevKeyGroup[0]);\n            if (args !== null) {\n                this.map.doAction(...args);\n            }\n        }\n    }\n\n    getKeyGroup(key) {\n        for (let i = 0; i < this.state.validKeyGroups.length; i++) {\n            if (this.state.validKeyGroups[i].indexOf(key) !== -1) {\n                return this.state.validKeyGroups[i];\n            }\n        }\n        return [];\n    }\n\n    getNextValidKeyGroups() {\n        if (this.state.selectedKeyGroup.length === 0) {\n            return [];\n        }\n\n        const nextValidKeyGroups = {\n            'menu': (key) => {\n                if (key === 'move') {\n                    return this.map.getMoveableKeys();\n                } else if (key === 'transfer') {\n                    return this.map.getTransferableKeys();\n                } else if (key === 'attack') {\n                    return this.map.getAttackableKeys();\n                } else if (key === 'end') {\n                    return this.map.getActions();\n                }\n            },\n            'choose-move-src': (key) => this.map.getMoveableTargets(key),\n            'choose-move-dst': (key) => this.map.getActions(),\n            'choose-transfer-src': (key) => this.map.getTransferableTargets(key),\n            'choose-transfer-dst': (key) => this.map.getActions(),\n            'choose-attack-src': (key) => this.map.getAttackableTargets(key),\n            'choose-attack-dst': (key) => this.map.getActions(),\n        };\n        \n        return nextValidKeyGroups[this.state.action](this.state.selectedKeyGroup[0]);\n    }\n\n    getNextAction() {\n        const nextAction = {\n            'menu': (key) => {\n                if (key === 'move') {\n                    return 'choose-move-src';\n                } else if (key === 'transfer') {\n                    return 'choose-transfer-src';\n                } else if (key === 'attack') {\n                    return 'choose-attack-src';\n                } else if (key === 'end') {\n                    return 'menu';\n                }\n            },\n            'choose-move-src': (key) => 'choose-move-dst',\n            'choose-move-dst': (key) => 'menu',\n            'choose-attack-src': (key) => 'choose-attack-dst',\n            'choose-attack-dst': (key) => 'menu',\n            'choose-transfer-src': (key) => 'choose-transfer-dst',\n            'choose-transfer-dst': (key) => 'menu',\n        };\n\n        return nextAction[this.state.action](this.state.selectedKeyGroup[0]);\n    }\n\n    handleClick(x, y) {\n        this.cancelHover();\n        const key = this.state.hoverKey;\n\n        /*if (this.state.selectedKeyGroup.length > 0) {\n            this.doMapAction();\n            this.preStateUpdate();\n            this.state.prevKeyGroup = this.state.selectedKeyGroup;\n            this.state.validKeyGroups = this.getNextValidKeyGroups();\n            this.state.action = this.getNextAction();\n            this.state.selectedKeyGroup = [];\n            this.postStateUpdate();\n        }*/\n\n        console.log(this.state);\n    }\n\n    handleMouseLeave() {\n        this.viewport.setMouse(null, null);\n        //this.startDragX = null;\n        //this.startDragY = null;\n        //this.mapRenderer.renderMap(this.map, this.viewport);\n    }\n\n    handleKeyDown(code) {\n        if (!this.pressed[code]) {\n            this.pressed[code] = true;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = 20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = -20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = 3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = -3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n\n    handleKeyUp(code) {\n        if (this.pressed[code]) {\n            this.pressed[code] = false;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = -20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = 20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = -3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = 3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n}\n\nexport { MapScreen }\n\n\n// WEBPACK FOOTER //\n// ./js/MapScreen.js","import { Point, Vector } from \"./Vector\";\nimport { Color } from \"./Color\";\n\nlet COUNTER = 0;\nconst HOVER_NONE = 1;\nconst HOVER_MAIN = 2;\nconst HOVER_SECONDARY = 3;\n\nclass Polygon {\n    constructor(faces, type) {\n        this.faces = faces;\n        faces.forEach(face => face.setPolygon(this));\n        this.type = type;\n        this.clippedFace = null;\n        this.originalFaces = faces.slice();\n        this.color = new Color(204, 204, 204, 1);\n        this.stroke = new Color(0, 0, 0, 1);\n        this.key = `polygon-${COUNTER}`;\n        this.hover = HOVER_NONE;\n        COUNTER += 1;\n    }\n\n    getKey() {\n        return this.key;\n    }\n\n    setHover(hoverState) {\n        this.hover = hoverState;\n    }\n\n    translate(x, y, z) {\n        this.getPoints().forEach(point => point.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        const c = this.getCenter();\n        this.getPoints().forEach(point => {\n            point.translate(-c.getX(), -c.getY(), -c.getZ());\n            point.rotate(v, rad);\n            point.translate(c.getX(), c.getY(), c.getZ());\n        });\n        this.faces.forEach(face => {\n            face.getNormal().rotate(v, rad);\n        });\n    }\n\n    getColor() {\n        return this.color;\n    }\n\n    setColor(color) {\n        this.color = color;\n    }\n\n    getStroke() {\n        return this.stroke\n    }\n\n    setStroke(stroke) {\n        this.stroke = stroke;\n    }\n\n    getDrawColor() {\n        if (this.hover === HOVER_NONE) {\n            return this.color;\n        } else if (this.hover === HOVER_MAIN) {\n            return new Color(204, 204, 204, 1);\n        } else if (this.hover === HOVER_SECONDARY) {\n            return new Color(0, 255, 255, 1);\n        }\n    }\n\n    getFaces() {\n        return this.faces;\n    }\n\n    getPoints() {\n        return Array.from(new Set(this.faces.reduce((a,b) => a.concat(b.getPoints()), [])));\n    }\n\n    getCenter() {\n        const points = this.getPoints();\n        const x = points.reduce((a,b) => a + b.getX(), 0) / points.length;\n        const y = points.reduce((a,b) => a + b.getY(), 0) / points.length;\n        const z = points.reduce((a,b) => a + b.getZ(), 0) / points.length;\n        return new Point(x, y, z);\n    }\n\n    getState() {\n        return {\n            x: this.getCenter().getX(),\n            y: this.getCenter().getY(),\n            z: this.getCenter().getZ(),\n            r: this.color.getR(),\n            g: this.color.getG(),\n            b: this.color.getB(),\n            a: this.color.getA(),\n            sr: this.stroke.getR(),\n            sg: this.stroke.getG(),\n            sb: this.stroke.getB(),\n            sa: this.stroke.getA(),\n        };\n    }\n\n    applyState({x, y, z, r, g, b, a, sr, sg, sb, sa}) {\n        const currentState = this.getState();\n        this.translate(x - currentState.x, y - currentState.y, z - currentState.z);\n        this.color.set(r, g, b, a);\n        this.stroke.set(sr, sg, sb, sa);\n    }\n\n    restoreFaces() {\n        this.faces = this.originalFaces.slice();\n    }\n\n    getClippedFace() {\n        return this.clippedFace;\n    }\n\n    calcClippedFace() {\n        let newFacePoints = null;\n        this.faces.forEach(face => {\n            const clippedPoints = face.getClippedPoints();\n            if (clippedPoints.length > 0) {\n                if (newFacePoints === null) {\n                    newFacePoints = clippedPoints.slice();\n                } else {\n                    for (let i = 0; i < clippedPoints.length; i++) {\n                        const c = clippedPoints[i];\n                        let minDist = null;\n                        let minDistIdx = null;\n                        let match = false;\n                        for (let j = 0; j < newFacePoints.length; j++) {\n                            const cp = newFacePoints[j];\n                            const nextcp = j == newFacePoints.length - 1 ? newFacePoints[0] : newFacePoints[j + 1];\n                            const currDist = Vector.createFromPoints(cp, nextcp).getMag();\n                            const cDist1 = Vector.createFromPoints(cp, c).getMag();\n                            const cDist2 = Vector.createFromPoints(nextcp, c).getMag();\n                            const distInc = cDist1 + cDist2 - currDist;\n                            if (distInc === 0) {\n                                match = true;\n                                break;\n                            }\n                            if (minDist == null || distInc < minDist) {\n                                minDist = distInc;\n                                minDistIdx = j;\n                            }\n                        }\n                        if (!match) {\n                            if (minDistIdx == newFacePoints.length - 1) {\n                                newFacePoints.splice(0, 0, c);\n                            } else {\n                                newFacePoints.splice(minDistIdx + 1, 0, c);\n                            }\n                        }\n                    }\n\n                }\n            }\n        });\n        if (newFacePoints !== null) {\n            this.clippedFace = new PolygonFace();\n            this.clippedFace.setVisiblePoints(newFacePoints, []);\n            this.clippedFace.setPolygon(this);\n        } else {\n            this.clippedFace = null;\n        }\n    }\n\n    splitFace(face, points1, points2) {\n        this.faces.splice(this.faces.indexOf(face), 1);\n        const blacklist = face.getEdgeBlacklist();\n        const sharedPoints = points1.filter(p => points2.indexOf(p) !== -1);\n        const n = face.getNormal();\n\n        const [face1, face2] = [points1, points2].map(points => {\n            const f = new PolygonFace(points, n);\n            f.setPolygon(this);\n            const newBlacklist = [sharedPoints];\n            blacklist.forEach(b => {\n                const idx1 = points.indexOf(b[0]);\n                const idx2 = points.indexOf(b[1]);\n                if (idx1 !== -1 && idx2 !== -1) {\n                    newBlacklist.push(b);\n                } else if (idx1 !== -1 || idx2 !== -1) {\n                    const idx = idx1 !== -1 ? idx1 : idx2;\n                    const nidx = idx === points.length - 1 ? 0 : idx + 1;\n                    const pidx = idx === 0 ? points.length - 1 : idx - 1;\n                    const p = points[idx];\n                    const np = points[nidx];\n                    const pp = points[pidx];\n                    if (sharedPoints.indexOf(np) === -1) {\n                        newBlacklist.push([p, pp]);\n                    } else if (sharedPoints.indexOf(pp) === -1) {\n                        newBlacklist.push([p, np]);\n                    } else {\n                        // You've got a triangle\n                        const v1 = Vector.createFromPoints(b[0], b[1]);\n                        v1.normalize();\n                        const v2 = Vector.createFromPoints(p, np);\n                        v2.normalize();\n                        if (Math.abs(Math.abs(v1.dot(v2)) - 1) < 0.001) {\n                            newBlacklist.push([p, np]);\n                        } else {\n                            newBlacklist.push([p, pp]);\n                        }\n                    }\n                }\n            });\n            f.setEdgeBlacklist(newBlacklist);\n            this.faces.push(f);\n            return f;\n        });\n\n        return {\n            face1,\n            face2\n        };\n    }\n\n    static createBox(x, y, z, w, l, h) {\n        const v = [\n            new Point(x, y, z + h),\n            new Point(x + w, y, z + h),\n            new Point(x + w, y + l, z + h),\n            new Point(x , y + l, z + h),\n            new Point(x, y, z),\n            new Point(x + w, y, z),\n            new Point(x + w, y + l, z),\n            new Point(x, y + l, z),\n        ];\n        const faces = [\n            new PolygonFace([v[0], v[1], v[2], v[3]], new Vector(0, 0, 1)),\n            new PolygonFace([v[1], v[2], v[6], v[5]], new Vector(1, 0, 0)),\n            new PolygonFace([v[4], v[5], v[6], v[7]], new Vector(0, 0, -1)),\n            new PolygonFace([v[0], v[1], v[5], v[4]], new Vector(0, -1, 0)),\n            new PolygonFace([v[0], v[3], v[7], v[4]], new Vector(-1, 0, 0)),\n            new PolygonFace([v[2], v[3], v[7], v[6]], new Vector(0, 1, 0))\n        ];\n\n        return new Polygon(faces, 'box');\n    }\n\n    static createIcosahedron(x, y, z, scale) {\n        const t = (1 + Math.sqrt(5)) / 2;\n        const v = [\n            new Point(-1, t, 0),\n            new Point(1, t, 0),\n            new Point(-1, -t, 0),\n            new Point(1, -t, 0),\n            new Point(0, -1, t),\n            new Point(0, 1, t),\n            new Point(0, -1, -t),\n            new Point(0, 1, -t),\n            new Point(t, 0, -1),\n            new Point(t, 0, 1),\n            new Point(-t, 0, -1),\n            new Point(-t, 0, 1)\n        ];\n\n        const faces = [\n        [0, 11, 5],\n        [0, 5, 1],\n        [0, 1, 7],\n        [0, 7, 10],\n        [0, 10, 11],\n\n        [1, 5, 9],\n        [5, 11, 4],\n        [11, 10, 2],\n        [10, 7, 6],\n        [7, 1, 8],\n\n        [3, 9, 4],\n        [3, 4, 2],\n        [3, 2, 6],\n        [3, 6, 8],\n        [3, 8, 9],\n\n        [4, 9, 5],\n        [2, 4, 11],\n        [6, 2, 10],\n        [8, 6, 7],\n        [9, 8, 1]\n        ].map(idx => {\n            const p1 = v[idx[0]];\n            const p2 = v[idx[1]];\n            const p3 = v[idx[2]];\n            const v1 = Vector.createFromPoints(p1, p2);\n            const v2 = Vector.createFromPoints(p1, p3);\n            const n = v1.cross(v2);\n            n.normalize();\n            return new PolygonFace([p1, p2, p3], n);\n        });\n\n        v.forEach(v => {\n            v.scale(scale);\n            v.translate(x, y, z);\n        });\n\n        return new Polygon(faces, 'icosahedron');\n    }\n\n    static createTetrahedron(x, y, z, scale) {\n        const t = 1 / Math.sqrt(2);\n        const v = [\n            new Point(1, 0, -t),\n            new Point(-1, 0 , -t),\n            new Point(0, 1, t),\n            new Point(0, -1, t)\n        ];\n\n        const faces = [\n            [0, 2, 3],\n            [1, 3, 2],\n            [2, 0, 1],\n            [3, 1, 0]\n        ].map(idx => {\n            const p1 = v[idx[0]];\n            const p2 = v[idx[1]];\n            const p3 = v[idx[2]];\n            const v1 = Vector.createFromPoints(p1, p2);\n            const v2 = Vector.createFromPoints(p1, p3);\n            const n = v1.cross(v2);\n            n.normalize();\n            return new PolygonFace([p1, p2, p3], n);\n        });\n\n        v.forEach(v => {\n            v.scale(scale);\n            v.translate(x, y, z);\n        });\n\n        return new Polygon(faces, 'tetrahedron');\n    }\n}\n\nclass PolygonFace {\n    constructor(points, unitNormal) {\n        this.points = points;\n        this.normal = unitNormal;\n        this.polygon = null;\n        this.visiblePoints = [];\n        this.mapping = [];\n        this.edgeBlacklist = [];\n    }\n\n    translate(x, y, z) {\n        this.points.forEach(p => p.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        this.points.forEach(p => p.rotate(v, rad));\n        this.normal.rotate(v, rad);\n    }\n\n    getPoints() {\n        return this.points;\n    }\n\n    getNormal() {\n        return this.normal;\n    }\n\n    getPolygon() {\n        return this.polygon;\n    }\n\n    setPolygon(polygon) {\n        this.polygon = polygon;\n    }\n\n    getClippedPoints() {\n        const clippedPoints = [];\n        for (let i = 0; i < this.mapping.length; i++) {\n            if (typeof this.mapping[i] !== 'number') {\n                clippedPoints.push(this.visiblePoints[i]);\n            }\n        }\n        return clippedPoints;\n    }\n\n    getVisiblePoints() {\n        return this.visiblePoints;\n    }\n\n    setVisiblePoints(points, mapping) {\n        this.visiblePoints = points;\n        this.mapping = mapping;\n    }\n\n    getEdgeBlacklist() {\n        return this.edgeBlacklist;\n    }\n\n    setEdgeBlacklist(blacklist) {\n        this.edgeBlacklist = blacklist;\n    }\n\n    draw(ctx) {\n        ctx.fillStyle = this.polygon.getDrawColor().getString();\n        ctx.beginPath();\n        let k;\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            if (k == 0) {\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n            }\n            if (k == this.visiblePoints.length - 1) {\n                ctx.lineTo(this.visiblePoints[0].getX(), this.visiblePoints[0].getY());\n            } else {\n                ctx.lineTo(this.visiblePoints[k + 1].getX(), this.visiblePoints[k + 1].getY());\n            }\n        }\n        ctx.fill();\n\n        let nextK;\n        let edge;\n        let blacklist;\n        ctx.strokeStyle = this.polygon.getStroke().getString();\n        //Draw outline\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            nextK = k === this.visiblePoints.length - 1 ? 0 : k + 1;\n            edge = null;\n            blacklist = false;\n            if (typeof this.mapping[k] === 'number') {\n                if (typeof this.mapping[nextK] === 'number') {\n                    edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK]]];\n                } else {\n                    if (this.points[this.mapping[k]] === this.points[this.mapping[nextK][0]]) {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][1]]];\n                    } else {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][0]]];\n                    }\n                }\n            } else if (typeof this.mapping[nextK] === 'number') {\n                if (this.points[this.mapping[k][0]] === this.points[this.mapping[nextK]]) {\n                    edge = [this.points[this.mapping[k][1]], this.points[this.mapping[nextK]]];\n                } else {\n                    edge = [this.points[this.mapping[k][0]], this.points[this.mapping[nextK]]];\n                }\n            }\n\n            if (edge !== null) {\n                blacklist = this.edgeBlacklist.filter(b => b.indexOf(edge[0]) !== -1 && b.indexOf(edge[1]) !== -1).length > 0;\n            }\n\n            if (!blacklist) {\n                ctx.beginPath();\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n                ctx.lineTo(this.visiblePoints[nextK].getX(), this.visiblePoints[nextK].getY());\n                ctx.stroke();\n            }\n        }\n    }\n}\n\nclass Overlay {\n    constructor(x, y, w, h, text) {\n        this.color = new Color(153, 153, 153, 1)\n        this.stroke = new Color(0, 0, 0, 1);\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n        this.text = text;\n        this.key = `polygon-${COUNTER}`;\n        this.hover = HOVER_NONE;\n        COUNTER += 1;\n    }\n\n    setHover(hoverState) {\n        this.hover = hoverState;\n    }\n\n    getKey() {\n        return this.key;\n    }\n\n    getVisiblePoints() {\n        return [\n            new Point(this.x, this.y, 0),\n            new Point(this.x + this.w, this.y, 0),\n            new Point(this.x + this.w, this.y + this.h, 0),\n            new Point(this.x, this.y + this.h, 0),\n        ];\n    }\n\n    setColor(color) {\n        this.color = color;\n    }\n\n    draw(ctx) {\n        if (this.hover === HOVER_MAIN) {\n            ctx.fillStyle = (new Color(204, 204, 204, 1)).getString();\n        } else {\n            ctx.fillStyle = this.color.getString();\n        }\n        ctx.strokeStyle = this.stroke.getString();\n        ctx.fillRect(this.x, this.y, this.w, this.h);\n        ctx.strokeRect(this.x, this.y, this.w, this.h);\n        ctx.fillStyle = 'black';\n        ctx.textAlign = 'center';\n        ctx.textBaseline= 'middle'; \n        ctx.font = '30px Arial';\n        ctx.fillText(this.text, this.x + (this.w / 2), this.y + (this.h / 2));\n    }\n}\n\nconst PolygonFactory = {\n    map: {\n        bs: 'tetrahedron',\n        rs: 'tetrahedron',\n        ys: 'tetrahedron',\n        w: 'icosahedron',\n        b: 'icosahedron',\n        r: 'icosahedron',\n        y: 'icosahedron',\n    },\n    settings: {\n        tlen: 100,\n    },\n    create: function(json) {\n        const retVal = {\n            tilePolygon: null,\n            mapObjectPolygon: null,\n        };\n        if (json.type === 'e') {\n            return retVal;\n        }\n        const tlen = this.settings.tlen;\n        retVal.tilePolygon = Polygon.createBox(json.x * tlen, json.y * tlen, 0, tlen, tlen, json.h * tlen);\n        if (json.mapObject !== undefined) {\n            const shape = this.map[json.mapObject.type]\n            if (shape === 'tetrahedron') {\n                retVal.mapObjectPolygon = Polygon.createTetrahedron(json.x * tlen + tlen / 2, json.y * tlen + tlen / 2, json.h * tlen + tlen / 2, 20);\n            } else if (shape === 'icosahedron') {\n                retVal.mapObjectPolygon = Polygon.createIcosahedron(json.x * tlen + tlen / 2, json.y * tlen + tlen / 2, json.h * tlen + tlen / 2, 20);\n            }\n        }\n        return retVal;\n    },\n};\n\nexport { Polygon, PolygonFace, Overlay, PolygonFactory, HOVER_NONE, HOVER_MAIN, HOVER_SECONDARY };\n\n\n// WEBPACK FOOTER //\n// ./js/Polygon.js","import { BSPTree } from \"./BSPTree\";\n\nclass PolygonRenderer {\n    \n    constructor(canvas, staticPolygons, faceSort = () => {}) {\n        this.canvas = canvas;\n        const staticFaces = staticPolygons.reduce((a, b) => a.concat(b.getFaces()), []);\n        staticFaces.sort(faceSort);\n        this.bsp = new BSPTree(staticFaces);\n        this.staticPolygons = staticPolygons;\n        this.hoveredObj = null;\n    }\n\n    render(viewport, polygons, overlays) {\n        const ctx = this.canvas.getContext('2d');\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.hoveredObj = null;\n\n        const facesToDraw = [];\n\n        this.bsp.addFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.bsp.traverse((face) => {\n            const { visiblePoints, mapping, visible} = viewport.projectFace(face);\n            face.setVisiblePoints(visiblePoints, mapping);\n            if (visible) {\n                if (viewport.mouseInside(visiblePoints)) {\n                    this.hoveredObj = face.getPolygon();\n                }\n                facesToDraw.push(face);\n            }\n        }, viewport);\n\n        this.bsp.removeFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.staticPolygons.concat(polygons).forEach(polygon => {\n            polygon.calcClippedFace();\n            const clippedFace = polygon.getClippedFace();\n            if (clippedFace !== null) {\n                if (viewport.mouseInside(clippedFace.getVisiblePoints())) {\n                    this.hoveredObj = polygon;\n                }\n                facesToDraw.push(clippedFace);\n            }\n        });\n\n        overlays.forEach(overlay => {\n            if (viewport.mouseInside(overlay.getVisiblePoints())) {\n                this.hoveredObj = overlay;\n            }\n            facesToDraw.push(overlay);\n        });\n\n        facesToDraw.forEach(face => face.draw(ctx));\n\n        polygons.forEach(polygon => polygon.restoreFaces());\n    }\n\n    getHoveredObj() {\n        return this.hoveredObj;\n    }\n}\n\nexport { PolygonRenderer };\n\n\n// WEBPACK FOOTER //\n// ./js/PolygonRenderer.js","import { Point, Vector } from './Vector';\n\nclass Viewport {\n\n    /*\n        p1 (origin)       p2\n        --------------------\n        |                  |\n        |                  |\n        |                  |\n        --------------------\n        p3                p4\n     */\n    constructor(p1, p2, p3, p4, d=-1) {\n        this.p1 = p1;\n        this.p2 = p2;\n        this.p3 = p3;\n        this.p4 = p4;\n        this.d = d;\n        this.calcVectors();\n\n        this.rates = {\n            r1: 0,\n            r2: 0,\n            t1: 0,\n            t2: 0,\n            t3: 0,\n        };\n        this.mx = null;\n        this.my = null;\n        this.animation = null;\n    }\n\n    projectFace(face) {\n        const points = face.getPoints();\n        const n = face.getNormal();\n        const visiblePoints = [];\n        const clippedPoints = [];\n        const mapping = [];\n        let viewVector, pointVector, pz, li, lz, ri, rz, midpoint, projected;\n        let threshold = this.d;\n        let visible = null;\n        if (this.d === -1) {\n            threshold = 0;\n            visible = this.unitNormal.dot(n) < 0;\n        }\n\n        for (let i = 0; i < points.length; i++) {\n            if (this.d !== -1) {\n                viewVector = Vector.createFromPoints(this.p5, points[i]);\n            } else {\n                viewVector = Vector.createFromPoints(this.midpoint, points[i]);\n            }\n            pz = viewVector.dot(this.unitNormal);\n            if (pz >= threshold) {\n                if (visible === null) {\n                    visible = viewVector.dot(n) < 0;\n                }\n                if (this.d === -1) {\n                    pointVector = Vector.createFromPoints(this.p1, points[i]);\n                } else {\n                    midpoint = this.p5.midpoint(points[i], this.d / pz);\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                }\n                projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                visiblePoints.push(projected);\n                mapping.push(i);\n            } else {\n                li = i == 0 ? points.length - 1 : i - 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[li]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[li]);\n                }\n                lz = viewVector.dot(this.unitNormal);\n                if (lz >= threshold) {\n                    midpoint = points[i].midpoint(points[li], (threshold - pz) / (lz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([li, i]);\n                }\n                ri = i == points.length - 1 ? 0 : i + 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[ri]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[ri]);\n                }\n                rz = viewVector.dot(this.unitNormal);\n                if (rz >= threshold) {\n                    midpoint = points[i].midpoint(points[ri], (threshold - pz) / (rz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([i, ri]);\n                }\n            }\n        }\n        return {\n            visiblePoints,\n            mapping,\n            visible\n        };\n    }\n\n    projectPoint(point) {\n        let viewVector, pointVector, threshold;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n            threshold = this.d;\n        } else {\n            viewVector = Vector.createFromPoints(this.midpoint, point);\n            threshhold = 0;\n        }\n\n        const pz = viewVector.dot(this.unitNormal);\n        if (pz >= threshold) {\n            if (this.d !== -1) {\n                const midpoint = this.p5.midpoint(point, this.d / pz);\n                pointVector = Vector.createFromPoints(this.p1, midpoint);\n            } else {\n                pointVector = Vector.createFromPoints(this.p1, point);\n            }\n            return new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n        }\n        return null;\n    }\n\n    calcViewAngle(point, vector) {\n        let viewVector;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n        } else {\n            viewVector = this.unitNormal;\n        }\n        const cosTheta = viewVector.dot(vector) / viewVector.getMag();\n        return Math.acos(cosTheta);\n    }\n\n    calcVectors() {\n        this.basis1 = Vector.createFromPoints(this.p1, this.p2);\n        this.width = this.basis1.mag;\n        this.basis1.normalize();\n        this.basis2 = Vector.createFromPoints(this.p1, this.p3);\n        this.height = this.basis2.mag;\n        this.basis2.normalize();\n        this.unitNormal = this.basis2.cross(this.basis1);\n        this.midpoint = this.p1.midpoint(this.p4, 0.5);\n        if (this.d !== -1) {\n            const xDist = this.unitNormal.x * this.d; \n            const yDist = this.unitNormal.y * this.d;\n            const zDist = this.unitNormal.z * this.d;\n            this.p5 = this.midpoint.copy()\n            this.p5.translate(-xDist, -yDist, -zDist);\n        }\n    }\n\n    translateAlongBasis(s1, s2, s3) {\n        const xDist = this.basis1.x * s1 + this.basis2.x * s2 + this.unitNormal.x * s3;\n        const yDist = this.basis1.y * s1 + this.basis2.y * s2 + this.unitNormal.y * s3;\n        const zDist = this.basis1.z * s1 + this.basis2.z * s2 + this.unitNormal.z * s3;\n        this.translate(xDist, yDist, zDist);\n    }\n\n    translate(x, y, z, calc=true) {\n        this.p1.translate(x, y, z);\n        this.p2.translate(x, y, z);\n        this.p3.translate(x, y, z);\n        this.p4.translate(x, y, z);\n        if (calc) {\n            this.calcVectors();\n        }\n    }\n\n    rotateByBasis(theta1, theta2, theta3) {\n        const xDist = this.midpoint.getX();\n        const yDist = this.midpoint.getY();\n        const zDist = this.midpoint.getZ();\n        const rad1 = theta1 / 360 * Math.PI;\n        const rad2 = theta2 / 360 * Math.PI;\n        const rad3 = theta3 / 360 * Math.PI;\n\n        this.translate(-xDist, -yDist, -zDist, false);\n        this.p1.rotate(this.basis1, rad1);\n        this.p1.rotate(this.basis2, rad2);\n        this.p1.rotate(this.unitNormal, rad3);\n        this.p2.rotate(this.basis1, rad1);\n        this.p2.rotate(this.basis2, rad2);\n        this.p2.rotate(this.unitNormal, rad3);\n        this.p3.rotate(this.basis1, rad1);\n        this.p3.rotate(this.basis2, rad2);\n        this.p3.rotate(this.unitNormal, rad3);\n        this.p4.rotate(this.basis1, rad1);\n        this.p4.rotate(this.basis2, rad2);\n        this.p4.rotate(this.unitNormal, rad3);\n        this.translate(xDist, yDist, zDist, true);\n    }\n\n    animate(animation) {\n        return new Promise((resolve, reject) => {\n            animation.resolve = resolve;\n            this.animation = animation;\n        });\n    }\n\n    updatePosition() {\n        if (this.animation !== null) {\n            if (this.animation.rate === null) {\n                this.animation.rate = {\n                    x: (this.animation.endpoint.getX() - this.p1.getX()) / this.animation.frames,\n                    y: (this.animation.endpoint.getY() - this.p1.getY()) / this.animation.frames,\n                    z: (this.animation.endpoint.getZ() - this.p1.getZ()) / this.animation.frames\n                }\n            }\n            const dx = this.animation.rate.x;\n            const dy = this.animation.rate.y;\n            const dz = this.animation.rate.z;\n            this.translate(dx, dy, dz);\n            this.animation.frames -= 1;\n            if (this.animation.frames === 0) {\n                this.animation.resolve();\n                this.animation = null;\n            }\n        } else {\n            if (this.rates.r1 || this.rates.r2) {\n                this.rotateByBasis(this.rates.r1, this.rates.r2, 0);\n            }\n            if (this.rates.t1 || this.rates.t2 || this.rates.t3) {\n                this.translateAlongBasis(this.rates.t1, this.rates.t2, this.rates.t3);\n            }\n        }\n    }\n\n    updateRates(rates) {\n        this.rates.r1 += (rates.r1 || 0);\n        this.rates.r2 += (rates.r2 || 0);\n        this.rates.t1 += (rates.t1 || 0);\n        this.rates.t2 += (rates.t2 || 0);\n        this.rates.t3 += (rates.t3 || 0);\n    }\n\n    setMouse(x, y) {\n        this.mx = x;\n        this.my = y;\n    }\n\n    mouseInside(points) {\n        if (this.mx === null && this.my === null) {\n            return false;\n        }\n        let zPos = null;\n        for (let i = 0; i < points.length; i++) {\n            const p = points[i];\n            const np = i === points.length - 1 ? points[0] : points[i + 1];\n            const v1 = {\n                x: np.getX() - p.getX(),\n                y: np.getY() - p.getY(),\n            };\n            const v2 = {\n                x: this.mx - p.getX(),\n                y: this.my - p.getY(),\n            };\n            const cross = (v1.x * v2.y) - (v1.y * v2.x);\n            if (zPos === null) {\n                zPos = cross > 0;\n            } else if ((cross > 0) !== zPos) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getViewDir(point, n) {\n        let dot;\n        if (this.d === -1) {\n            dot = n.dot(this.unitNormal);\n        } else {\n            dot = n.dot(Vector.createFromPoints(this.p5, point));\n        }\n        return dot <= 0 ? 'towards' : 'away';\n    }\n\n    getViewVector(point) {\n        if (this.d !== -1) {\n            return new Vector.createFromPoints(this.p5, point);\n        } else {\n            return this.unitNormal;\n        }\n    }\n\n    getCenteredP1(point, dist) {\n        const px = point.getX() - dist * this.unitNormal.getX();\n        const py = point.getY() - dist * this.unitNormal.getY();\n        const pz = point.getZ() - dist * this.unitNormal.getZ();\n        const dx = px - this.midpoint.getX();\n        const dy = py - this.midpoint.getY();\n        const dz = pz - this.midpoint.getZ();\n        return new Point(this.p1.getX() + dx, this.p1.getY() + dy, this.p1.getZ() + dz);\n    }\n}\n\nexport { Viewport };\n\n\n// WEBPACK FOOTER //\n// ./js/Viewport.js","import Game from \"./Game\";\nimport \"../css/main.css\"\n\nconst g = new Game(window.innerWidth - 16, window.innerHeight - 16);\ng.start();\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/style-loader/lib/urls.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"canvas {\\n\\tborder: 1px solid black;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./css/main.css\n// module id = 19\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/addStyles.js\n// module id = 20\n// module chunks = 0"],"sourceRoot":""}