{"version":3,"sources":["webpack:///webpack/bootstrap 1fda227d7633e6aee485","webpack:///./js/Vector.js","webpack:///./js/MapSerializer.js","webpack:///./js/Game.js","webpack:///./css/main.css?b1a5","webpack:///./js/BSPTree.js","webpack:///./js/DefaultMap.js","webpack:///./js/Map.js","webpack:///./js/MapObject.js","webpack:///./js/MapScreen.js","webpack:///./js/Objective.js","webpack:///./js/Polygon.js","webpack:///./js/PolygonRenderer.js","webpack:///./js/Tile.js","webpack:///./js/Viewport.js","webpack:///./js/main.js","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/lib/urls.js","webpack:///./css/main.css","webpack:///./~/style-loader/lib/addStyles.js"],"names":["Point","x","y","z","p","perc","getX","getY","getZ","v","rad","cost","Math","cos","sint","sin","mcost","vx","vy","vz","dot","newx","newy","newz","s","Vector","mag","sqrt","p1","p2","serialize","map","mapString","tiles","getTiles","i","length","tileRow","j","tile","tileString","mapObjects","getMapObjects","mapObject","mapObjectString","getObjective","serializeTurnPlayers","serializeActions","deserialize","splitString","split","tileArrayString","mapObjectArrayString","settings","tileRowStrings","tileStrings","props","tileClass","getClass","link","push","mapObjectStrings","objective","turnPlayers","deserializeTurnPlayers","actions","deserializeActions","Game","width","height","canvas","document","createElement","body","appendChild","screen","start","window","dmap","addEventListener","e","rect","getBoundingClientRect","handleClick","clientX","left","clientY","top","handleMouseDown","handleMouseMove","handleMouseUp","handleMouseLeave","preventDefault","handleKeyDown","code","handleKeyUp","BSPTree","faces","nodes","front","back","p0","getPoints","n","getNormal","frontFaces","backFaces","pos","cut","frontPoints","backPoints","points","lastD","createFromPoints","abs","d","prevP","prevD","mid","midpoint","getPolygon","splitFace","face1","face2","face","addFace","forEach","idx","indexOf","splice","removeFace","fn","viewport","viewDir","getViewDir","traverse","exampleMapString","defaultMap","Map","turnPlayer","turnPlayerIdx","flattenedArray","row","concat","getTilesFlattened","t","getMapObject","filter","m","ret","move","transfer","attack","check","name","sx","sy","dx","dy","srcTile","obj","dstTile","Object","values","reduce","a","b","str","parseInt","MapObject","setMapObject","getH","constructor","cls","NAME_MAP","slice","Shard","unsetMapObject","BlueShard","RedShard","YellowShard","Vessel","arguments","player","movement","range","Error","mO","getPlayer","getShard","consumeShard","WhiteVessel","getNeighbors","has","attackedBy","shard","BlueVessel","RedVessel","YellowVessel","bs","rs","ys","w","r","MapScreen","pressed","TLEN","tilePolygons","createBox","objPolygons","createIcosahedron","renderer","renderLoop","updatePosition","translate","rotate","PI","render","requestAnimationFrame","step","turnActor","mapRenderer","centerOn","setMouse","updateRates","t1","t3","t2","r1","r2","Objective","num","success","OBJECT_FNS","players","enemies","Polygon","type","setPolygon","clippedFace","hover","originalFaces","Array","from","Set","point","newFacePoints","clippedPoints","getClippedPoints","c","minDist","minDistIdx","match","cp","nextcp","currDist","getMag","cDist1","cDist2","distInc","PolygonFace","setVisiblePoints","points1","points2","blacklist","getEdgeBlacklist","sharedPoints","f","newBlacklist","idx1","idx2","nidx","pidx","np","pp","v1","normalize","v2","setEdgeBlacklist","l","h","scale","p3","cross","unitNormal","normal","polygon","visiblePoints","mapping","edgeBlacklist","undefined","ctx","fillColor","getHover","fillStyle","beginPath","k","moveTo","lineTo","fill","nextK","edge","strokeStyle","stroke","PolygonRenderer","staticPolygons","faceSort","staticFaces","getFaces","sort","bsp","hoveredPolygon","polygons","getContext","clearRect","facesToDraw","hoveredFace","addFaces","projectFace","visible","mouseInside","removeFaces","calcClippedFace","getClippedFace","getVisiblePoints","toggleHover","draw","restoreFaces","Tile","right","down","dir","dist","dirs","queue","nextQueue","results","movable","add","TILE_MAP","PlainTile","EmptyTile","Viewport","p4","calcVectors","rates","mx","my","animation","viewVector","pointVector","pz","li","lz","ri","rz","projected","threshold","p5","basis1","basis2","threshhold","vector","cosTheta","acos","xDist","yDist","zDist","copy","s1","s2","s3","calc","theta1","theta2","theta3","rad1","rad2","rad3","Promise","resolve","reject","rate","endpoint","frames","dz","rotateByBasis","translateAlongBasis","zPos","px","py","g","innerWidth","innerHeight","module","exports","useSourceMap","list","toString","item","content","cssWithMappingToString","join","modules","mediaQuery","alreadyImportedModules","id","cssMapping","btoa","sourceMapping","toComment","sourceURLs","sources","source","sourceRoot","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","css","location","baseUrl","protocol","host","currentDir","pathname","replace","fixedCss","fullMatch","origUrl","unquotedOrigUrl","trim","o","$1","test","newUrl"],"mappings":"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D;AACA,SAAO,SAASV,KAAKC,SAAL,CAAekB,MAAf,CAAT,GAAkC,GAAzC;AACA,EA5Bc,CAAf;;AA8BA;AACA,QAAOR,QAAP;AACA,CA1ED,C;;;;;;ACdA;AACA;;;AAGA;AACA,iCAAkC,4BAA4B,GAAG;;AAEjE;;;;;;;ACPA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,sBAAsB;AACvC;;AAEA;AACA,mBAAmB,2BAA2B;;AAE9C;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC;AACA;;AAEA;AACA;;AAEA,iBAAiB,2BAA2B;AAC5C;AACA;;AAEA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;;AAEA,iBAAiB,uBAAuB;AACxC;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd,kDAAkD,sBAAsB;AACxE;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1fda227d7633e6aee485","class Point {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n    }\n\n    midpoint(p, perc) {\n        const x = (1 - perc) * this.x + perc * p.getX();\n        const y = (1 - perc) * this.y + perc * p.getY();\n        const z = (1 - perc) * this.z + perc * p.getZ();\n        return new Point(x, y, z);\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    translate(x, y, z) {\n        this.x += x;\n        this.y += y;\n        this.z += z;\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n\n    scale(s) {\n        this.x *= s;\n        this.y *= s;\n        this.z *= s;\n    }\n\n    dot(p) {\n        return this.x * p.getX() + this.y * p.getY() + this.z * p.getZ();\n    }\n\n    copy() {\n        return new Point(this.x, this.y, this.z);\n    }\n\n    equals(p) {\n        return this.x === p.getX() && this.y === p.getY() && this.z === p.getZ();\n    }\n}\n\nclass Vector {\n\n    constructor(x, y, z) {\n        this.x = x;\n        this.y = y;\n        this.z = z;\n        this.mag = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n    }\n\n    static createFromPoints(p1, p2) {\n        return new Vector(p2.getX() - p1.getX(), p2.getY() - p1.getY(), p2.getZ() - p1.getZ());\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getZ() {\n        return this.z;\n    }\n\n    getMag() {\n        return this.mag;\n    }\n\n    normalize() {\n        this.x = this.x / this.mag;\n        this.y = this.y / this.mag;\n        this.z = this.z / this.mag;\n        this.mag = 1;\n    }\n\n    cross(v) {\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const x = this.y * vz - this.z * vy;\n        const y = this.z * vx - this.x * vz;\n        const z = this.x * vy - this.y * vx;\n        return new Vector(x, y, z);\n    }\n\n    dot(v) {\n        return this.x * v.getX() + this.y * v.getY() + this.z * v.getZ();\n    }\n\n    equals(v) {\n        return this.x === v.getX() && this.y === v.getY() && this.z === v.getZ();\n    }\n\n    rotate(v, rad) {\n        const cost = Math.cos(rad);\n        const sint = Math.sin(rad);\n        const mcost = 1 - cost;\n        const vx = v.getX();\n        const vy = v.getY();\n        const vz = v.getZ();\n        const dot = this.x * vx + this.y * vy + this.z * vz;\n        const newx = this.x * cost + (vy * this.z - vz * this.y) * sint + vx * dot * mcost;\n        const newy = this.y * cost + (vz * this.x - vx * this.z) * sint + vy * dot * mcost;\n        const newz = this.z * cost + (vx * this.y - vy * this.x) * sint + vz * dot * mcost;\n        this.x = newx;\n        this.y = newy;\n        this.z = newz;\n    }\n}\n\nexport { Point, Vector };\n\n\n// WEBPACK FOOTER //\n// ./js/Vector.js","import { Tile } from \"./Tile\";\nimport { MapObject } from \"./MapObject\";\nimport { Map } from './Map';\nimport { Objective } from './Objective';\n\nfunction serialize(map) {\n    let mapString = '';\n    const tiles = map.getTiles();\n    for (let i = 0; i < tiles.length; i++) {\n        const tileRow = tiles[i];\n        for (let j = 0; j < tileRow.length; j++) {\n            const tile = tileRow[j];\n            const tileString = tile.serialize();\n            mapString += tileString;\n            if (j !== tileRow.length - 1) {\n                mapString += ' ';\n            }\n        }\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    const mapObjects = map.getMapObjects();\n    for (let i = 0; i < mapObjects.length; i++) {\n        const mapObject = mapObjects[i];\n        const mapObjectString = mapObject.serialize();\n        mapString += mapObjectString;\n        mapString += '\\n';\n    }\n    mapString += '===\\n';\n    mapString += map.getObjective().serialize();\n    mapString += '\\n';\n    mapString += map.serializeTurnPlayers();\n    mapString += '\\n';\n    mapString += map.serializeActions();\n    return mapString;\n}\n\nfunction deserialize(mapString) {\n    const splitString = mapString.split('\\n===\\n');\n    const tileArrayString = splitString[0];\n    const mapObjectArrayString = splitString[1];\n    const settings = splitString[2].split('\\n');\n\n    const tiles = [];\n    const tileRowStrings = tileArrayString.split('\\n');\n    for (let y = 0; y < tileRowStrings.length; y++) {\n        const tileRow = [];\n        const tileStrings = tileRowStrings[y].split(' ');\n        for (let x = 0; x < tileStrings.length; x++) {\n            const props = tileStrings[x].split('-');\n            const tileClass = Tile.getClass(props[0]);\n            const tile = new tileClass(x, y, props[1]);\n\n            if (x > 0) {\n                tile.link('left', tileRow[x - 1]);\n                tileRow[x - 1].link('right', tile);\n            }\n            if (y > 0) {\n                tile.link('top', tiles[y - 1][x]);\n                tiles[y - 1][x].link('down', tile);\n            }\n            tileRow.push(tile);\n        }\n        tiles.push(tileRow);\n    }\n\n    const mapObjectStrings = mapObjectArrayString.split('\\n');\n    for (let i = 0; i < mapObjectStrings.length; i++) {\n        const mapObject = MapObject.deserialize(mapObjectStrings[i], tiles);\n    }\n\n    const objective = Objective.deserialize(settings[0]);\n    const turnPlayers = Map.deserializeTurnPlayers(settings[1]);\n    const actions = Map.deserializeActions(settings[2]);\n    return new Map(tiles, objective, turnPlayers, actions);\n}\n\nexport { serialize, deserialize }\n\n\n\n// WEBPACK FOOTER //\n// ./js/MapSerializer.js","import { MapScreen } from \"./MapScreen\";\nimport DefaultMap from \"./DefaultMap\";\n\nexport default class Game {\n    constructor(width, height) {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n\n    start() {\n        document.body.appendChild(this.canvas);\n        this.screen = new MapScreen(this.canvas, DefaultMap);\n        this.screen.start();\n        window.dmap = DefaultMap;\n    \n        this.canvas.addEventListener(\"click\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleClick(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousedown\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseDown(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mousemove\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseMove(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseup\", (e) => {\n            const rect = this.canvas.getBoundingClientRect();\n            this.screen.handleMouseUp(e.clientX - rect.left, e.clientY - rect.top);\n        });\n\n        this.canvas.addEventListener(\"mouseleave\", (e) => {\n            this.screen.handleMouseLeave();\n        });\n\n        document.addEventListener(\"keydown\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyDown(e.code);\n        });\n\n        document.addEventListener(\"keyup\", (e) => {\n            e.preventDefault();\n            this.screen.handleKeyUp(e.code);\n        });\n\n        /*this.loadAssets().then(() => {\n\n            this.canvas.addEventListener(\"click\", (e) => {\n                console.log(e);\n            });\n\n            this.loadDemo();\n        });*/\n    }\n\n    /*loadAssets() {\n        let loadingPromise = new Promise((resolve, reject) => {\n            resolve();\n        });\n        return loadingPromise\n    }*/\n}\n\n\n// WEBPACK FOOTER //\n// ./js/Game.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!./main.css\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!./main.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./css/main.css\n// module id = 3\n// module chunks = 0","import { Vector } from './Vector';\n\nclass BSPTree {\n    \n    constructor(faces) {\n        this.nodes = [];\n        this.front = null;\n        this.back = null;\n        if (faces.length == 0) {\n            return;\n        }\n\n        this.nodes = [faces[0]];\n        const p0 = faces[0].getPoints()[0];\n        const n = faces[0].getNormal();\n        const frontFaces = [];\n        const backFaces = [];\n\n        for (let i = 1; i < faces.length; i++) {\n            let pos;\n            let cut = false;\n            const frontPoints = [];\n            const backPoints = [];\n            const points = faces[i].getPoints();\n\n            //Get initial pos\n            const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n            if (Math.abs(lastD) < 0.001) {\n                pos = null;\n            } else if (lastD > 0) {\n                pos = 'front';\n            } else {\n                pos = 'back';\n            }\n\n            // Iterate over points\n            for (let j = 0; j < points.length; j++) {\n                const p = points[j];\n                const d = Vector.createFromPoints(p0, p).dot(n);\n                if (Math.abs(d) < 0.001) {\n                    pos = null;\n                    frontPoints.push(p);\n                    backPoints.push(p);\n                } else if (d > 0) {\n                    if (pos === 'back') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    frontPoints.push(p);\n                    pos = 'front';\n                } else {\n                    if (pos === 'front') {\n                        const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                        const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                        const mid = p.midpoint(prevP, d / (d - prevD));\n                        frontPoints.push(mid);\n                        backPoints.push(mid);\n                        cut = true;\n                    }\n                    backPoints.push(p);\n                    pos = 'back';\n                }\n            }\n\n            if (cut) {\n                // Split a face...\n                const { face1, face2 } = faces[i].getPolygon().splitFace(faces[i], frontPoints, backPoints);\n                frontFaces.push(face1);\n                backFaces.push(face2);\n            } else {\n                if (frontPoints.length === points.length && backPoints.length === points.length) {\n                    this.nodes.push(faces[i]);\n                } else if (frontPoints.length === points.length) {\n                    frontFaces.push(faces[i]);\n                } else {\n                    backFaces.push(faces[i]);\n                }\n            }\n        }\n\n        if (frontFaces.length > 0) {\n            this.front = new BSPTree(frontFaces);\n        }\n        if (backFaces.length > 0) {\n            this.back = new BSPTree(backFaces);\n        }\n    }\n\n    addFace(face) {\n        if (this.nodes.length === 0) {\n            this.nodes = [face];\n            return;\n        }\n        const p0 = this.nodes[0].getPoints()[0];\n        const n = this.nodes[0].getNormal();\n        let pos;\n        let cut = false;\n        const frontPoints = [];\n        const backPoints = [];\n        const points = face.getPoints();\n\n        //Get initial pos\n        const lastD = Vector.createFromPoints(p0, points[points.length - 1]).dot(n);\n        if (Math.abs(lastD) < 0.001) {\n            pos = null;\n        } else if (lastD > 0) {\n            pos = 'front';\n        } else {\n            pos = 'back';\n        }\n\n        // Iterate over points\n        for (let j = 0; j < points.length; j++) {\n            const p = points[j];\n            const d = Vector.createFromPoints(p0, p).dot(n);\n            if (Math.abs(d) < 0.001) {\n                pos = null;\n                frontPoints.push(p);\n                backPoints.push(p);\n            } else if (d > 0) {\n                if (pos === 'back') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                frontPoints.push(p);\n                pos = 'front';\n            } else {\n                if (pos === 'front') {\n                    const prevP = j === 0 ? points[points.length - 1] : points[j - 1];\n                    const prevD = Vector.createFromPoints(p0, prevP).dot(n);\n                    const mid = p.midpoint(prevP, d / (d - prevD));\n                    frontPoints.push(mid);\n                    backPoints.push(mid);\n                    cut = true;\n                }\n                backPoints.push(p);\n                pos = 'back';\n            }\n        }\n\n        if (cut) {\n            // Split a face...\n            const { face1, face2 } = face.getPolygon().splitFace(face, frontPoints, backPoints);\n            if (this.front !== null) {\n                this.front.addFace(face1);\n            } else {\n                this.front = new BSPTree([face1]);\n            }\n            if (this.back !== null) {\n                this.back.addFace(face2);\n            } else {\n                this.back = new BSPTree([face2]);\n            }\n        } else {\n            if (frontPoints.length === points.length && backPoints.length === points.length) {\n                this.nodes.push(face);\n            } else if (frontPoints.length === points.length) {\n                if (this.front !== null) {\n                    this.front.addFace(face);\n                } else {\n                    this.front = new BSPTree([face]);\n                }\n            } else {\n                if (this.back !== null) {\n                    this.back.addFace(face);\n                } else {\n                    this.back = new BSPTree([face]);\n                }\n            }\n        }\n    }\n\n    addFaces(faces) {\n        faces.forEach(face => this.addFace(face));\n    }\n\n    removeFace(face) {\n        const idx = this.nodes.indexOf(face);\n        if (idx !== -1) {\n            this.nodes.splice(idx, 1);\n            return;\n        }\n        if (this.front !== null) {\n            this.front.removeFace(face);\n        }\n        if (this.back !== null) {\n            this.back.removeFace(face);\n        }\n    }\n\n    removeFaces(faces) {\n        faces.forEach(face => this.removeFace(face));\n    }\n\n    traverse(fn, viewport) {\n        if (this.nodes.length > 0) {\n            const n = this.nodes[0].getNormal();\n            const p = this.nodes[0].getPoints()[0];\n            const viewDir = viewport.getViewDir(p, n);\n            if (viewDir === 'towards') {\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n            } else {\n                if (this.front !== null) {\n                    this.front.traverse(fn, viewport);\n                }\n                for (let i = 0; i < this.nodes.length; i++) {\n                    fn(this.nodes[i]);\n                }\n                if (this.back !== null) {\n                    this.back.traverse(fn, viewport);\n                }\n                \n            }\n        }\n    }\n}\n\nexport { BSPTree };\n\n\n// WEBPACK FOOTER //\n// ./js/BSPTree.js","import { deserialize } from \"./MapSerializer\";\n\nvar exampleMapString = \n`p-1 p-2 p-3\np-2 p-3 p-2\np-3 p-1 p-1\n===\nw-0-0-0\nw-1-0-0\nw-2-0-0\n===\n0\n0-1\n1-1-1`;\n/*\nvar exampleMapString = \n`p-1\np-3\n===\nk-0-0-0-20`;*/\n\nconst defaultMap = deserialize(exampleMapString);\n\nexport default defaultMap;\n\n\n// WEBPACK FOOTER //\n// ./js/DefaultMap.js","import { serialize } from \"./MapSerializer\";\n\nclass Map {\n\n    constructor(tiles, objective, turnPlayers, actions) {\n        this.tiles = tiles\n        this.objective = objective;\n        this.turnPlayers = turnPlayers;\n        this.turnPlayer = turnPlayers[0];\n        this.turnPlayerIdx = 0;\n        this.actions = actions;\n    }\n\n    getTiles() {\n        return this.tiles;\n    }\n\n    getTilesFlattened() {\n        let flattenedArray = [];\n        this.tiles.forEach((row) => {\n            flattenedArray = flattenedArray.concat(row);\n        });\n        return flattenedArray;\n    }\n\n    getMapObjects() {\n        return this.getTilesFlattened().map(t => t.getMapObject()).filter(m => m !== null);\n    }\n\n    getObjective() {\n        return this.objective;\n    }\n\n    serializeTurnPlayers() {\n        let ret = '';\n        let idx = this.turnPlayerIdx;\n        for (let i = 0; i < this.turnPlayers.length; i++) {\n            ret += this.turnPlayers[idx];\n            if (i !== this.turnPlayers.length - 1) {\n                ret += '-';\n            }\n            idx = (idx + 1) % this.turnPlayers.length;\n        }\n        return ret;\n    }\n\n    static deserializeTurnPlayers(str) {\n        return str.split('-');\n    }\n\n    getTurnPlayer() {\n        return this.turnPlayer;\n    }\n\n    serializeActions() {\n        return `${this.actions.move}-${this.actions.transfer}-${this.actions.attack}`;\n    }\n\n    static deserializeActions(str) {\n        const s = str.split('-');\n        return {\n            move: parseInt(s[0]),\n            transfer: parseInt(s[1]),\n            attack: parseInt(s[2]),\n        };\n    }\n\n    isResolved() {\n        return this.objective.check(this);\n    }\n\n    serialize() {\n        return serialize(this);\n    }\n\n    /*\n       Actions:\n        move/attack\n        transfer\n    */\n    doAction(name, sx, sy, dx, dy) {\n        if (this.actions[name] > 0) {\n            const srcTile = this.tiles[sy][sx];\n            const obj = srcTile.getMapObject();\n            const dstTile = this.tiles[dy][dx]; \n            obj[name](dstTile, this.turnPlayer);\n            this.actions[name] -= 1;\n        } \n        if (name === 'end' || Object.values(this.actions).reduce((a,b) => a + b, 0) === 0) {\n            this.turnPlayerIdx = (this.turnPlayerIdx + 1) % this.turnPlayers.length;\n            this.turnPlayer = this.turnPlayers[this.turnPlayerIdx];\n            this.actions = {\n                move: 1,\n                transfer: 1,\n                attack: 1,\n            };\n        }\n    }\n    /*\n\n    applyAction(actor, action, receiver) {\n        if (action === 'move') {\n            actor.moveTo(receiver);\n        }\n    }\n\n    clicked(obj) {\n        if (obj instanceof MapObject) {\n            //this.setSelection(obj);\n            //rerender = true;\n        } else if (obj instanceof Tile) {\n            if (obj.isHighlighted()) {\n                this.turnActor.moveTo(obj);\n            }\n        }\n    }\n\n    serialize() {\n        const serializer = new MapSerializer();\n        return serializer.serialize(this);\n    }\n\n    /*nextTurn() {\n        if (this.turnActor !== null) {\n            this.turnQueue.pop();\n            this.turnActor.subtractTicks(this.TICK_THRESHOLD);\n        }\n        while (this.turnQueue.length === 0) {\n            for (let i = 0; i < this.actors.length; i++) {\n                this.actors[i].tickForward();\n                const ticks = this.actors[i].getTicks();\n                if (ticks > this.TICK_THRESHOLD) {\n                    let idx = this.turnQueue.length;\n                    for (let j = 0; j < this.turnQueue.length; j++) {\n                        if (this.turnQueue[j][1] > ticks) {\n                            idx = j;\n                            break;\n                        }\n                    }\n                    this.turnQueue.splice(idx, 0, [this.actors[i], ticks]);\n                }\n            }\n        }\n        this.turnActor = this.turnQueue[this.turnQueue.length - 1][0];\n        return this.turnActor;\n    }*/\n\n    /*getTurnActor() {\n        return this.turnActor;\n    }\n\n    getPlayerOptions() {\n        return this.playerOptions;\n    }\n\n    setPlayerOptions(options) {\n        this.playerOptions = options;\n    }*/\n}\n\nexport { Map }\n\n\n// WEBPACK FOOTER //\n// ./js/Map.js","class MapObject {\n\n    constructor(props, tile = null) {\n        this.tile = tile;\n        if (tile !== null) {\n            tile.setMapObject(this);\n        }\n    }\n\n    getTile() {\n        return this.tile;\n    }\n\n    getX() {\n        return this.tile.getX();\n    }\n\n    getY() {\n        return this.tile.getY();\n    }\n\n    getH() {\n        return this.tile.getH();\n    }\n\n    serialize() {\n        return `${this.constructor.name()}-${this.getX()}-${this.getY()}`;\n    }\n\n    static deserialize(props, tiles) {\n        const p = props.split('-');\n        const cls = NAME_MAP[p[0]];\n        const x = parseInt(p[1]);\n        const y = parseInt(p[2]);\n        return new cls(p.slice(3, p.length), tiles[y][x]);\n    }\n\n    setReferences(tiles, mapObjects) {\n        this.tile = tiles[this.y][this.x];\n        this.tile.setMapObject(this);\n    }\n\n    getActions() {\n        return [];\n    }\n\n    getPlayer() {\n        return null;\n    }\n}\n\nclass Shard extends MapObject {\n\n    attackedBy() {\n        this.tile.unsetMapObject();\n    }\n}\n\nclass BlueShard extends Shard {\n\n    static name() {\n        return 'bs';\n    }\n}\n\nclass RedShard extends Shard {\n    static name() {\n        return 'rs';\n    }\n}\n\nclass YellowShard extends Shard {\n    static name() {\n        return 'ys';\n    }\n}\n\n\nclass Vessel extends MapObject {\n\n    constructor(props, tile) {\n        super(...arguments);\n        this.player = props[0];\n        this.movement = 4;\n        this.range = 1;\n    }\n\n\n    serialize() {\n        return `${super.serialize()}-${this.player}`\n    }\n\n    transfer(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n        const mO = tile.getMapObject();\n        if (mO !== null && mO.getPlayer() === this.player && this.getShard() !== null) {\n            const cls = mO.consumeShard(this.getShard());\n            new cls([mO.getPlayer()], tile);\n            new WhiteVessel([this.player], this.tile);\n        } else {\n            throw Error('Invalid transfer tile');\n        }\n    }\n\n    attack(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n        if (!this.tile.getNeighbors(this.range).has(tile)) {\n            throw Error('Invalid action: cannot reach tile');\n        }\n\n        const mO = tile.getMapObject();\n        if (mO !== null) {\n            mO.attackedBy(this);\n        } else {\n            throw Error('Invalid attack tile');\n        }\n    }\n\n    move(tile, player) {\n        if (player !== this.player) {\n            throw Error('Invalid action: wrong player');\n        }\n        if (!this.tile.getNeighbors(this.movement).has(tile)) {\n            throw Error('Invalid action: cannot reach tile');\n        }\n\n        const mO = tile.getMapObject();\n        if (mO === null) {\n            this.tile.unsetMapObject();\n            tile.setMapObject(this);\n            this.tile = tile;\n        } else if (mO instanceof Shard) {\n            const cls = this.consumeShard(mO);\n            new cls([this.player], tile);\n            this.tile.unsetMapObject();\n        } else {\n            throw Error('Invalid move tile');\n        }\n    }\n\n    getPlayer() {\n        return this.player;\n    }\n\n    getShard() {\n        return null;\n    }\n\n    attackedBy() {\n        this.tile.unsetMapObject();\n    }\n}\n\nclass WhiteVessel extends Vessel {\n\n    consumeShard(shard) {\n        if (shard instanceof BlueShard) {\n            return BlueVessel;\n        } else if (shard instanceof RedShard) {\n            return RedVessel;\n        } else if (shard instanceof YellowShard) {\n            return YellowVessel;\n        }\n    }\n\n    static name() {\n        return 'w';\n    }\n}\n\nclass BlueVessel extends Vessel {\n\n    static name() {\n        return 'b';\n    }\n\n    getShard() {\n        return new BlueShard();\n    }\n}\n\nclass RedVessel extends Vessel {\n\n    static name() {\n        return 'r';\n    }\n\n    getShard() {\n        return new RedShard();\n    }\n}\n\nclass YellowVessel extends Vessel {\n\n    constructor() {\n        super(...arguments);\n        this.movement = 5;\n    }\n\n    static name() {\n        return 'y';\n    }\n\n    getShard() {\n        return new YellowShard();\n    }\n}\n\nconst NAME_MAP = {\n    bs: BlueShard,\n    rs: RedShard,\n    ys: YellowShard,\n    w: WhiteVessel,\n    b: BlueVessel,\n    r: RedVessel,\n    y: YellowVessel,\n}\n\nexport { MapObject }\n\n\n// WEBPACK FOOTER //\n// ./js/MapObject.js","import { Point, Vector } from \"./Vector\";\nimport { Viewport } from \"./Viewport\";\nimport { Polygon } from \"./Polygon\";\nimport { PolygonRenderer} from \"./PolygonRenderer\";\n\nclass MapScreen {\n\n    constructor(canvas, map) {\n        this.canvas = canvas;\n        this.map = map;\n        this.viewport = new Viewport(\n            new Point(0, 0, 500),\n            new Point(this.canvas.width, 0, 500),\n            new Point(0, this.canvas.height, 500),\n            new Point(this.canvas.width, this.canvas.height, 500),\n            500\n        );\n        this.pressed = {};\n\n        const TLEN = 100;\n        const tilePolygons = this.map.getTilesFlattened().map(t => Polygon.createBox(t.getX() * TLEN, t.getY() * TLEN, 0, TLEN, TLEN, t.getH() *TLEN));\n        this.objPolygons = this.map.getMapObjects().map(m => Polygon.createIcosahedron(m.getX() * TLEN + TLEN / 2, m.getY() * TLEN + TLEN / 2, m.getH() * TLEN + TLEN / 2, 20));\n\n        this.renderer = new PolygonRenderer(this.canvas, tilePolygons, (a,b) => a.getNormal().getZ() - b.getNormal().getZ());\n    }\n\n    start() {\n        this.renderLoop();\n    }\n\n    renderLoop() {\n        this.viewport.updatePosition();\n        this.objPolygons.forEach(obj => {\n            obj.translate(1, 0, 0);\n            obj.rotate(new Vector(0, 0, 1), 1 * Math.PI / 180);\n        });\n        this.renderer.render(this.viewport, this.objPolygons);\n        window.requestAnimationFrame((step) => {\n            this.renderLoop();\n        });\n    }\n\n    /*turnLoop() {\n        if (this.map.isResolved()) {\n            // End\n        } else {\n            const turnActor = this.map.nextTurn();\n            this.animateNextTurn(turnActor).then(() => {\n                turnActor.takeTurn().then(() => {\n                    this.turnLoop();\n                });\n                //this.mapRenderer.renderMap(this.map, this.viewport);\n            });\n        }\n    }*/\n\n    animateNextTurn(turnActor) {\n        return this.mapRenderer.centerOn(turnActor);\n        //return new Promise((resolve, reject) => {\n        //    resolve();\n            //return this.mapRenderer.centerOn(turnActor);\n        //});\n    }\n\n    handleMouseDown(x, y) {\n        //this.startDragX = x;\n        //this.startDragY = y;\n    }\n\n    handleMouseMove(x, y) {\n        this.viewport.setMouse(x,y);\n        /*if (this.startDragX !== null && this.startDragY !== null) {\n            const dx = this.startDragX - x;\n            const dy = this.startDragY - y;\n            this.viewport.translateAlongBasis(dx, dy);\n            this.startDragX = x;\n            this.startDragY = y;\n        }*/\n        //this.mapRenderer.renderMap();\n    }\n\n    handleMouseUp(x, y) {\n        //this.startDragX = null;\n        //this.startDragY = null;\n    }\n\n    handleClick(x, y) {\n        //this.viewport.mx = this.viewport.x1 + x;\n        //this.viewport.my = this.viewport.y1 + y;\n        /*const clickedObj = this.mapRenderer.getClickedObject();\n        if (clickedObj instanceof Tile) {\n            const action = this.map.getSelectedAction(clickedObj);\n            if (action !== null && action.action === 'move') {\n                this.mapRenderer.animateMove(action.actor, action.receiver).then(() => {\n                    this.map.applyAction(action.actor, action.action, action.receiver);\n                });\n            }\n        } else if (clickedObj instanceof ActorAction) {\n            this.map.getTurnActor().handleAction(clickedObj);\n        }*/\n        //const clickedObjs = this.mapRenderer.getClickedObjects();\n\n        //const rerender = this.map.clicked(clickedObjs);\n        //if (rerender) {\n            //this.mapRenderer.renderMap(this.map, this.viewport);\n        //}\n    }\n\n    handleMouseLeave() {\n        this.viewport.setMouse(null, null);\n        //this.startDragX = null;\n        //this.startDragY = null;\n        //this.mapRenderer.renderMap(this.map, this.viewport);\n    }\n\n    handleKeyDown(code) {\n        if (!this.pressed[code]) {\n            this.pressed[code] = true;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = 20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = -20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = 3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = -3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n\n    handleKeyUp(code) {\n        if (this.pressed[code]) {\n            this.pressed[code] = false;\n            const updateRates = {};\n            switch (code) {\n                case 'KeyA':\n                    updateRates.t1 = 20;\n                    break;\n                case 'KeyW':\n                    updateRates.t3 = -20;\n                    break;\n                case 'KeyD':\n                    updateRates.t1 = -20;\n                    break;\n                case 'KeyS':\n                    updateRates.t3 = 20;\n                    break;\n                case 'Space':\n                    updateRates.t2 = 20;\n                    break;\n                case 'ShiftLeft':\n                    updateRates.t2 = -20;\n                    break;\n                case 'ArrowUp':\n                    updateRates.r1 = 3;\n                    break;\n                case 'ArrowDown':\n                    updateRates.r1 = -3;\n                    break;\n                case 'ArrowLeft':\n                    updateRates.r2 = -3;\n                    break;\n                case 'ArrowRight':\n                    updateRates.r2 = 3;\n                    break;\n            }\n            this.viewport.updateRates(updateRates);\n        }\n    }\n}\n\nexport { MapScreen }\n\n\n// WEBPACK FOOTER //\n// ./js/MapScreen.js","class Objective {\n\n    constructor(fn, num) {\n        this.fn = fn;\n        this.num = num;\n    }\n\n    serialize() {\n        return this.num;\n    }\n\n    static deserialize(num) {\n        return new Objective(OBJECT_FNS[num], num);\n    }\n\n    check(map) {\n        return this.fn.check(map);\n    }\n\n    success(map) {\n        return this.fn.success(map);\n    }\n\n}\n\nconst OBJECT_FNS = {\n    0: {\n        check: map => {\n            let players = map.getMapObjects().map(m => m.getPlayer()).filter(p => p !== null);\n            let player = players.filter(p => p === '0');\n            let enemies =  players.filter(p => p !== '0');\n            return player.length === 0 || enemies.length === 0;\n        },\n        success: map => {\n            let players = map.getMapObjects().map(m => m.getPlayer());\n            let enemies =  players.filter(p => p !== '0' && p !== null);\n            return enemies.length === 0;\n        }\n    },\n}\n\nexport { Objective }\n\n\n// WEBPACK FOOTER //\n// ./js/Objective.js","import { Point, Vector } from \"./Vector\";\n\nclass Polygon {\n    constructor(faces, type) {\n        this.faces = faces;\n        faces.forEach(face => face.setPolygon(this));\n        this.type = type;\n        this.clippedFace = null;\n        this.hover = false;\n        this.originalFaces = faces.slice();\n    }\n\n    translate(x, y, z) {\n        const points = Array.from(new Set(this.faces.reduce((a,b) => a.concat(b.getPoints()), [])));\n        points.forEach(point => point.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        const points = Array.from(new Set(this.faces.reduce((a,b) => a.concat(b.getPoints()), [])));\n        const x = points.reduce((a,b) => a + b.getX(), 0) / points.length;\n        const y = points.reduce((a,b) => a + b.getY(), 0) / points.length;\n        const z = points.reduce((a,b) => a + b.getZ(), 0) / points.length;\n        points.forEach(point => {\n            point.translate(-x, -y, -z);\n            point.rotate(v, rad);\n            point.translate(x, y, z);\n        });\n        this.faces.forEach(face => {\n            face.getNormal().rotate(v, rad);\n        });\n    }\n\n    getHover() {\n        return this.hover;\n    }\n\n    toggleHover() {\n        this.hover = !this.hover;\n    }\n\n    getFaces() {\n        return this.faces;\n    }\n\n    restoreFaces() {\n        this.faces = this.originalFaces.slice();\n    }\n\n    getClippedFace() {\n        return this.clippedFace;\n    }\n\n    calcClippedFace() {\n        let newFacePoints = null;\n        this.faces.forEach(face => {\n            const clippedPoints = face.getClippedPoints();\n            if (clippedPoints.length > 0) {\n                if (newFacePoints === null) {\n                    newFacePoints = clippedPoints.slice();\n                } else {\n                    for (let i = 0; i < clippedPoints.length; i++) {\n                        const c = clippedPoints[i];\n                        let minDist = null;\n                        let minDistIdx = null;\n                        let match = false;\n                        for (let j = 0; j < newFacePoints.length; j++) {\n                            const cp = newFacePoints[j];\n                            const nextcp = j == newFacePoints.length - 1 ? newFacePoints[0] : newFacePoints[j + 1];\n                            const currDist = Vector.createFromPoints(cp, nextcp).getMag();\n                            const cDist1 = Vector.createFromPoints(cp, c).getMag();\n                            const cDist2 = Vector.createFromPoints(nextcp, c).getMag();\n                            const distInc = cDist1 + cDist2 - currDist;\n                            if (distInc === 0) {\n                                match = true;\n                                break;\n                            }\n                            if (minDist == null || distInc < minDist) {\n                                minDist = distInc;\n                                minDistIdx = j;\n                            }\n                        }\n                        if (!match) {\n                            if (minDistIdx == newFacePoints.length - 1) {\n                                newFacePoints.splice(0, 0, c);\n                            } else {\n                                newFacePoints.splice(minDistIdx + 1, 0, c);\n                            }\n                        }\n                    }\n\n                }\n            }\n        });\n        if (newFacePoints !== null) {\n            this.clippedFace = new PolygonFace();\n            this.clippedFace.setVisiblePoints(newFacePoints, []);\n            this.clippedFace.setPolygon(this);\n        } else {\n            this.clippedFace = null;\n        }\n    }\n\n    splitFace(face, points1, points2) {\n        this.faces.splice(this.faces.indexOf(face), 1);\n        const blacklist = face.getEdgeBlacklist();\n        const sharedPoints = points1.filter(p => points2.indexOf(p) !== -1);\n        const n = face.getNormal();\n\n        const [face1, face2] = [points1, points2].map(points => {\n            const f = new PolygonFace(points, n);\n            f.setPolygon(this);\n            const newBlacklist = [sharedPoints];\n            blacklist.forEach(b => {\n                const idx1 = points.indexOf(b[0]);\n                const idx2 = points.indexOf(b[1]);\n                if (idx1 !== -1 && idx2 !== -1) {\n                    newBlacklist.push(b);\n                } else if (idx1 !== -1 || idx2 !== -1) {\n                    const idx = idx1 !== -1 ? idx1 : idx2;\n                    const nidx = idx === points.length - 1 ? 0 : idx + 1;\n                    const pidx = idx === 0 ? points.length - 1 : idx - 1;\n                    const p = points[idx];\n                    const np = points[nidx];\n                    const pp = points[pidx];\n                    if (sharedPoints.indexOf(np) === -1) {\n                        newBlacklist.push([p, pp]);\n                    } else if (sharedPoints.indexOf(pp) === -1) {\n                        newBlacklist.push([p, np]);\n                    } else {\n                        // You've got a triangle\n                        const v1 = Vector.createFromPoints(b[0], b[1]);\n                        v1.normalize();\n                        const v2 = Vector.createFromPoints(p, np);\n                        v2.normalize();\n                        if (Math.abs(Math.abs(v1.dot(v2)) - 1) < 0.001) {\n                            newBlacklist.push([p, np]);\n                        } else {\n                            newBlacklist.push([p, pp]);\n                        }\n                    }\n                }\n            });\n            f.setEdgeBlacklist(newBlacklist);\n            this.faces.push(f);\n            return f;\n        });\n\n        return {\n            face1,\n            face2\n        };\n    }\n\n    static createBox(x, y, z, w, l, h) {\n        const v = [\n            new Point(x, y, z + h),\n            new Point(x + w, y, z + h),\n            new Point(x + w, y + l, z + h),\n            new Point(x , y + l, z + h),\n            new Point(x, y, z),\n            new Point(x + w, y, z),\n            new Point(x + w, y + l, z),\n            new Point(x, y + l, z),\n        ];\n        const faces = [\n            new PolygonFace([v[0], v[1], v[2], v[3]], new Vector(0, 0, 1)),\n            new PolygonFace([v[1], v[2], v[6], v[5]], new Vector(1, 0, 0)),\n            new PolygonFace([v[4], v[5], v[6], v[7]], new Vector(0, 0, -1)),\n            new PolygonFace([v[0], v[1], v[5], v[4]], new Vector(0, -1, 0)),\n            new PolygonFace([v[0], v[3], v[7], v[4]], new Vector(-1, 0, 0)),\n            new PolygonFace([v[2], v[3], v[7], v[6]], new Vector(0, 1, 0))\n        ];\n\n        return new Polygon(faces, 'box');\n    }\n\n    static createIcosahedron(x, y, z, scale) {\n        const t = (1 + Math.sqrt(5)) / 2;\n        const v = [\n            new Point(-1, t, 0),\n            new Point(1, t, 0),\n            new Point(-1, -t, 0),\n            new Point(1, -t, 0),\n            new Point(0, -1, t),\n            new Point(0, 1, t),\n            new Point(0, -1, -t),\n            new Point(0, 1, -t),\n            new Point(t, 0, -1),\n            new Point(t, 0, 1),\n            new Point(-t, 0, -1),\n            new Point(-t, 0, 1)\n        ];\n\n        const faces = [\n        [0, 11, 5],\n        [0, 5, 1],\n        [0, 1, 7],\n        [0, 7, 10],\n        [0, 10, 11],\n\n        [1, 5, 9],\n        [5, 11, 4],\n        [11, 10, 2],\n        [10, 7, 6],\n        [7, 1, 8],\n\n        [3, 9, 4],\n        [3, 4, 2],\n        [3, 2, 6],\n        [3, 6, 8],\n        [3, 8, 9],\n\n        [4, 9, 5],\n        [2, 4, 11],\n        [6, 2, 10],\n        [8, 6, 7],\n        [9, 8, 1]\n        ].map(idx => {\n            const p1 = v[idx[0]];\n            const p2 = v[idx[1]];\n            const p3 = v[idx[2]];\n            const v1 = Vector.createFromPoints(p1, p2);\n            const v2 = Vector.createFromPoints(p1, p3);\n            const n = v1.cross(v2);\n            n.normalize();\n            return new PolygonFace([p1, p2, p3], n);\n        });\n\n        v.forEach(v => {\n            v.scale(scale);\n            v.translate(x, y, z);\n        });\n\n        return new Polygon(faces, 'icosahedron');\n    }\n}\n\nclass PolygonFace {\n    constructor(points, unitNormal) {\n        this.points = points;\n        this.normal = unitNormal;\n        this.polygon = null;\n        this.visiblePoints = [];\n        this.mapping = [];\n        this.edgeBlacklist = [];\n    }\n\n    translate(x, y, z) {\n        this.points.forEach(p => p.translate(x, y, z));\n    }\n\n    rotate(v, rad) {\n        this.points.forEach(p => p.rotate(v, rad));\n        this.normal.rotate(v, rad);\n    }\n\n    getPoints() {\n        return this.points;\n    }\n\n    getNormal() {\n        return this.normal;\n    }\n\n    getPolygon() {\n        return this.polygon;\n    }\n\n    setPolygon(polygon) {\n        this.polygon = polygon;\n    }\n\n    getClippedPoints() {\n        const clippedPoints = [];\n        for (let i = 0; i < this.mapping.length; i++) {\n            if (typeof this.mapping[i] !== 'number') {\n                clippedPoints.push(this.visiblePoints[i]);\n            }\n        }\n        return clippedPoints;\n    }\n\n    getVisiblePoints() {\n        return this.visiblePoints;\n    }\n\n    setVisiblePoints(points, mapping) {\n        if (this.normal !== undefined && this.normal.getY() === 0 && this.normal.getX() < 0 && this.normal.getZ() > 0) {\n            var a = 1;\n        }\n        this.visiblePoints = points;\n        this.mapping = mapping;\n    }\n\n    getEdgeBlacklist() {\n        return this.edgeBlacklist;\n    }\n\n    setEdgeBlacklist(blacklist) {\n        this.edgeBlacklist = blacklist;\n    }\n\n    draw(ctx) {\n        let fillColor;\n        if (this.polygon.getHover()) {\n            fillColor = \"#E6E6E6\";\n        } else {\n            fillColor = \"#CCCCCC\";\n        }\n        ctx.fillStyle = fillColor;\n        ctx.beginPath();\n        let k;\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            if (k == 0) {\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n            }\n            if (k == this.visiblePoints.length - 1) {\n                ctx.lineTo(this.visiblePoints[0].getX(), this.visiblePoints[0].getY());\n            } else {\n                ctx.lineTo(this.visiblePoints[k + 1].getX(), this.visiblePoints[k + 1].getY());\n            }\n        }\n        ctx.fill();\n\n        let nextK;\n        let edge;\n        let blacklist;\n        ctx.strokeStyle = \"#000000\";\n        //Draw outline\n        for (k = 0; k < this.visiblePoints.length; k++) {\n            nextK = k === this.visiblePoints.length - 1 ? 0 : k + 1;\n            edge = null;\n            blacklist = false;\n            if (typeof this.mapping[k] === 'number') {\n                if (typeof this.mapping[nextK] === 'number') {\n                    edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK]]];\n                } else {\n                    if (this.points[this.mapping[k]] === this.points[this.mapping[nextK][0]]) {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][1]]];\n                    } else {\n                        edge = [this.points[this.mapping[k]], this.points[this.mapping[nextK][0]]];\n                    }\n                }\n            } else if (typeof this.mapping[nextK] === 'number') {\n                if (this.points[this.mapping[k][0]] === this.points[this.mapping[nextK]]) {\n                    edge = [this.points[this.mapping[k][1]], this.points[this.mapping[nextK]]];\n                } else {\n                    edge = [this.points[this.mapping[k][0]], this.points[this.mapping[nextK]]];\n                }\n            }\n\n            if (edge !== null) {\n                blacklist = this.edgeBlacklist.filter(b => b.indexOf(edge[0]) !== -1 && b.indexOf(edge[1]) !== -1).length > 0;\n            }\n\n            if (!blacklist) {\n                ctx.beginPath();\n                ctx.moveTo(this.visiblePoints[k].getX(), this.visiblePoints[k].getY());\n                ctx.lineTo(this.visiblePoints[nextK].getX(), this.visiblePoints[nextK].getY());\n                ctx.stroke();\n            }\n        }\n    }\n}\n\nexport { Polygon, PolygonFace };\n\n\n// WEBPACK FOOTER //\n// ./js/Polygon.js","import { BSPTree } from \"./BSPTree\";\n\nclass PolygonRenderer {\n    \n    constructor(canvas, staticPolygons, faceSort = () => {}) {\n        this.canvas = canvas;\n        const staticFaces = staticPolygons.reduce((a, b) => a.concat(b.getFaces()), []);\n        staticFaces.sort(faceSort);\n        this.bsp = new BSPTree(staticFaces);\n        this.staticPolygons = staticPolygons;\n        this.hoveredPolygon = null;\n    }\n\n    render(viewport, polygons) {\n        const ctx = this.canvas.getContext('2d');\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        const facesToDraw = [];\n        let hoveredFace = null;\n\n        this.bsp.addFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.bsp.traverse((face) => {\n            const { visiblePoints, mapping, visible} = viewport.projectFace(face);\n            face.setVisiblePoints(visiblePoints, mapping);\n            if (visible) {\n                if (viewport.mouseInside(visiblePoints)) {\n                    hoveredFace = face;\n                }\n                facesToDraw.push(face);\n            }\n        }, viewport);\n\n        this.bsp.removeFaces(polygons.reduce((a, b) => a.concat(b.getFaces()), []));\n\n        this.staticPolygons.concat(polygons).forEach(polygon => {\n            polygon.calcClippedFace();\n            const clippedFace = polygon.getClippedFace();\n            if (clippedFace !== null) {\n                if (viewport.mouseInside(clippedFace.getVisiblePoints())) {\n                    hoveredFace = clippedFace;\n                }\n                facesToDraw.push(clippedFace);\n            }\n        });\n\n        if (this.hoveredPolygon !== null) {\n            this.hoveredPolygon.toggleHover();\n        }\n        if (hoveredFace !== null) {\n            this.hoveredPolygon = hoveredFace.getPolygon();\n            this.hoveredPolygon.toggleHover();\n        } else {\n            this.hoveredPolygon = null;\n        }\n\n        facesToDraw.forEach(face => face.draw(ctx));\n\n        polygons.forEach(polygon => polygon.restoreFaces());\n    }\n}\n\nexport { PolygonRenderer };\n\n\n// WEBPACK FOOTER //\n// ./js/PolygonRenderer.js","class Tile {\n\n    constructor(x, y, h) {\n        this.x = x;\n        this.y = y;\n        this.h = h;\n        this.left = null;\n        this.right = null;\n        this.top = null;\n        this.down = null;\n        this.mapObject = null;\n    }\n\n    link(dir, tile) {\n        this[dir] = tile;\n    }\n\n    getX() {\n        return this.x;\n    }\n\n    getY() {\n        return this.y;\n    }\n\n    getH() {\n        return this.h;\n    }\n\n    setMapObject(mapObject) {\n        this.mapObject = mapObject;\n    }\n\n    unsetMapObject() {\n        this.mapObject = null;\n    }\n\n    getMapObject() {\n        return this.mapObject;\n    }\n\n    getNeighbors(dist) {\n        const dirs = ['left', 'right', 'top', 'down'];\n        let queue = new Set([this]);\n        let nextQueue;\n        const results = new Set();\n        for (let i = 0; i < dist; i++) {\n            nextQueue = new Set();\n            queue.forEach(tile => {\n                dirs.forEach((dir) => {\n                    if (tile[dir] !== null && tile[dir] !== this && tile[dir].movable()) {\n                        if (!results.has(tile[dir])) {\n                            results.add(tile[dir]);\n                            nextQueue.add(tile[dir]);\n                        }\n                    }\n                })\n            });\n            queue = nextQueue;\n        }\n        return results;\n    }\n\n    movable() {\n        return true;\n    }\n\n    serialize() {\n        return `${this.constructor.name()}-${this.h}`\n    }\n\n    static getClass(name) {\n        return TILE_MAP[name];\n    }\n\n}\n\nclass PlainTile extends Tile {\n\n    static name() {\n        return 'p';\n    }\n}\n\nclass EmptyTile extends Tile {\n\n    movable() {\n        return false;\n    }\n\n    getNeighbors() {\n        return new Set();\n    }\n\n    static name() {\n        return 'e';\n    }\n}\n\nconst TILE_MAP = {\n    p: PlainTile,\n    e: EmptyTile,\n};\n\nexport { Tile, EmptyTile, PlainTile };\n\n\n// WEBPACK FOOTER //\n// ./js/Tile.js","import { Point, Vector } from './Vector';\n\nclass Viewport {\n\n    /*\n        p1 (origin)       p2\n        --------------------\n        |                  |\n        |                  |\n        |                  |\n        --------------------\n        p3                p4\n     */\n    constructor(p1, p2, p3, p4, d=-1) {\n        this.p1 = p1;\n        this.p2 = p2;\n        this.p3 = p3;\n        this.p4 = p4;\n        this.d = d;\n        this.calcVectors();\n\n        this.rates = {\n            r1: 0,\n            r2: 0,\n            t1: 0,\n            t2: 0,\n            t3: 0,\n        };\n        this.mx = null;\n        this.my = null;\n        this.animation = null;\n    }\n\n    projectFace(face) {\n        const points = face.getPoints();\n        const n = face.getNormal();\n        const visiblePoints = [];\n        const clippedPoints = [];\n        const mapping = [];\n        let viewVector, pointVector, pz, li, lz, ri, rz, midpoint, projected;\n        let threshold = this.d;\n        let visible = null;\n        if (this.d === -1) {\n            threshold = 0;\n            visible = this.unitNormal.dot(n) < 0;\n        }\n\n        for (let i = 0; i < points.length; i++) {\n            if (this.d !== -1) {\n                viewVector = Vector.createFromPoints(this.p5, points[i]);\n            } else {\n                viewVector = Vector.createFromPoints(this.midpoint, points[i]);\n            }\n            pz = viewVector.dot(this.unitNormal);\n            if (pz >= threshold) {\n                if (visible === null) {\n                    visible = viewVector.dot(n) < 0;\n                }\n                if (this.d === -1) {\n                    pointVector = Vector.createFromPoints(this.p1, points[i]);\n                } else {\n                    midpoint = this.p5.midpoint(points[i], this.d / pz);\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                }\n                projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                visiblePoints.push(projected);\n                mapping.push(i);\n            } else {\n                li = i == 0 ? points.length - 1 : i - 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[li]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[li]);\n                }\n                lz = viewVector.dot(this.unitNormal);\n                if (lz >= threshold) {\n                    midpoint = points[i].midpoint(points[li], (threshold - pz) / (lz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([li, i]);\n                }\n                ri = i == points.length - 1 ? 0 : i + 1;\n                if (this.d !== -1) {\n                    viewVector = Vector.createFromPoints(this.p5, points[ri]);\n                } else {\n                    viewVector = Vector.createFromPoints(this.midpoint, points[ri]);\n                }\n                rz = viewVector.dot(this.unitNormal);\n                if (rz >= threshold) {\n                    midpoint = points[i].midpoint(points[ri], (threshold - pz) / (rz - pz));\n                    pointVector = Vector.createFromPoints(this.p1, midpoint);\n                    projected = new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n                    visiblePoints.push(projected);\n                    mapping.push([i, ri]);\n                }\n            }\n        }\n        return {\n            visiblePoints,\n            mapping,\n            visible\n        };\n    }\n\n    projectPoint(point) {\n        let viewVector, pointVector, threshold;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n            threshold = this.d;\n        } else {\n            viewVector = Vector.createFromPoints(this.midpoint, point);\n            threshhold = 0;\n        }\n\n        const pz = viewVector.dot(this.unitNormal);\n        if (pz >= threshold) {\n            if (this.d !== -1) {\n                const midpoint = this.p5.midpoint(point, this.d / pz);\n                pointVector = Vector.createFromPoints(this.p1, midpoint);\n            } else {\n                pointVector = Vector.createFromPoints(this.p1, point);\n            }\n            return new Point(pointVector.dot(this.basis1), pointVector.dot(this.basis2), 0);\n        }\n        return null;\n    }\n\n    calcViewAngle(point, vector) {\n        let viewVector;\n        if (this.d !== -1) {\n            viewVector = Vector.createFromPoints(this.p5, point);\n        } else {\n            viewVector = this.unitNormal;\n        }\n        const cosTheta = viewVector.dot(vector) / viewVector.getMag();\n        return Math.acos(cosTheta);\n    }\n\n    calcVectors() {\n        this.basis1 = Vector.createFromPoints(this.p1, this.p2);\n        this.width = this.basis1.mag;\n        this.basis1.normalize();\n        this.basis2 = Vector.createFromPoints(this.p1, this.p3);\n        this.height = this.basis2.mag;\n        this.basis2.normalize();\n        this.unitNormal = this.basis2.cross(this.basis1);\n        this.midpoint = this.p1.midpoint(this.p4, 0.5);\n        if (this.d !== -1) {\n            const xDist = this.unitNormal.x * this.d; \n            const yDist = this.unitNormal.y * this.d;\n            const zDist = this.unitNormal.z * this.d;\n            this.p5 = this.midpoint.copy()\n            this.p5.translate(-xDist, -yDist, -zDist);\n        }\n    }\n\n    translateAlongBasis(s1, s2, s3) {\n        const xDist = this.basis1.x * s1 + this.basis2.x * s2 + this.unitNormal.x * s3;\n        const yDist = this.basis1.y * s1 + this.basis2.y * s2 + this.unitNormal.y * s3;\n        const zDist = this.basis1.z * s1 + this.basis2.z * s2 + this.unitNormal.z * s3;\n        this.translate(xDist, yDist, zDist);\n    }\n\n    translate(x, y, z, calc=true) {\n        this.p1.translate(x, y, z);\n        this.p2.translate(x, y, z);\n        this.p3.translate(x, y, z);\n        this.p4.translate(x, y, z);\n        if (calc) {\n            this.calcVectors();\n        }\n    }\n\n    rotateByBasis(theta1, theta2, theta3) {\n        const xDist = this.midpoint.getX();\n        const yDist = this.midpoint.getY();\n        const zDist = this.midpoint.getZ();\n        const rad1 = theta1 / 360 * Math.PI;\n        const rad2 = theta2 / 360 * Math.PI;\n        const rad3 = theta3 / 360 * Math.PI;\n\n        this.translate(-xDist, -yDist, -zDist, false);\n        this.p1.rotate(this.basis1, rad1);\n        this.p1.rotate(this.basis2, rad2);\n        this.p1.rotate(this.unitNormal, rad3);\n        this.p2.rotate(this.basis1, rad1);\n        this.p2.rotate(this.basis2, rad2);\n        this.p2.rotate(this.unitNormal, rad3);\n        this.p3.rotate(this.basis1, rad1);\n        this.p3.rotate(this.basis2, rad2);\n        this.p3.rotate(this.unitNormal, rad3);\n        this.p4.rotate(this.basis1, rad1);\n        this.p4.rotate(this.basis2, rad2);\n        this.p4.rotate(this.unitNormal, rad3);\n        this.translate(xDist, yDist, zDist, true);\n    }\n\n    animate(animation) {\n        return new Promise((resolve, reject) => {\n            animation.resolve = resolve;\n            this.animation = animation;\n        });\n    }\n\n    updatePosition() {\n        if (this.animation !== null) {\n            if (this.animation.rate === null) {\n                this.animation.rate = {\n                    x: (this.animation.endpoint.getX() - this.p1.getX()) / this.animation.frames,\n                    y: (this.animation.endpoint.getY() - this.p1.getY()) / this.animation.frames,\n                    z: (this.animation.endpoint.getZ() - this.p1.getZ()) / this.animation.frames\n                }\n            }\n            const dx = this.animation.rate.x;\n            const dy = this.animation.rate.y;\n            const dz = this.animation.rate.z;\n            this.translate(dx, dy, dz);\n            this.animation.frames -= 1;\n            if (this.animation.frames === 0) {\n                this.animation.resolve();\n                this.animation = null;\n            }\n        } else {\n            if (this.rates.r1 || this.rates.r2) {\n                this.rotateByBasis(this.rates.r1, this.rates.r2, 0);\n            }\n            if (this.rates.t1 || this.rates.t2 || this.rates.t3) {\n                this.translateAlongBasis(this.rates.t1, this.rates.t2, this.rates.t3);\n            }\n        }\n    }\n\n    updateRates(rates) {\n        this.rates.r1 += (rates.r1 || 0);\n        this.rates.r2 += (rates.r2 || 0);\n        this.rates.t1 += (rates.t1 || 0);\n        this.rates.t2 += (rates.t2 || 0);\n        this.rates.t3 += (rates.t3 || 0);\n    }\n\n    setMouse(x, y) {\n        this.mx = x;\n        this.my = y;\n    }\n\n    mouseInside(points) {\n        if (this.mx === null && this.my === null) {\n            return false;\n        }\n        let zPos = null;\n        for (let i = 0; i < points.length; i++) {\n            const p = points[i];\n            const np = i === points.length - 1 ? points[0] : points[i + 1];\n            const v1 = {\n                x: np.getX() - p.getX(),\n                y: np.getY() - p.getY(),\n            };\n            const v2 = {\n                x: this.mx - p.getX(),\n                y: this.my - p.getY(),\n            };\n            const cross = (v1.x * v2.y) - (v1.y * v2.x);\n            if (zPos === null) {\n                zPos = cross > 0;\n            } else if ((cross > 0) !== zPos) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    getViewDir(point, n) {\n        let dot;\n        if (this.d === -1) {\n            dot = n.dot(this.unitNormal);\n        } else {\n            dot = n.dot(Vector.createFromPoints(this.p5, point));\n        }\n        return dot <= 0 ? 'towards' : 'away';\n    }\n\n    getViewVector(point) {\n        if (this.d !== -1) {\n            return new Vector.createFromPoints(this.p5, point);\n        } else {\n            return this.unitNormal;\n        }\n    }\n\n    getCenteredP1(point, dist) {\n        const px = point.getX() - dist * this.unitNormal.getX();\n        const py = point.getY() - dist * this.unitNormal.getY();\n        const pz = point.getZ() - dist * this.unitNormal.getZ();\n        const dx = px - this.midpoint.getX();\n        const dy = py - this.midpoint.getY();\n        const dz = pz - this.midpoint.getZ();\n        return new Point(this.p1.getX() + dx, this.p1.getY() + dy, this.p1.getZ() + dz);\n    }\n}\n\nexport { Viewport };\n\n\n// WEBPACK FOOTER //\n// ./js/Viewport.js","import Game from \"./Game\";\nimport \"../css/main.css\"\n\nconst g = new Game(window.innerWidth - 16, window.innerHeight - 16);\ng.start();\n\n\n// WEBPACK FOOTER //\n// ./js/main.js","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/css-loader/lib/css-base.js","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/style-loader/lib/urls.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"canvas {\\n\\tborder: 1px solid black;\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./css/main.css\n// module id = 17\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tmemo[selector] = fn.call(this, selector);\n\t\t}\n\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton) options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/lib/addStyles.js\n// module id = 18\n// module chunks = 0"],"sourceRoot":""}